(this["webpackJsonphotel-chakra"]=this["webpackJsonphotel-chakra"]||[]).push([[0],{220:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(273),a=n(73),c=n(1),o=n.n(c),s=n(61),l=n.n(s),d=n(65),j=n(6),u=n(39),b=n(272),h=n(286),f=n(242),O=n(262),m=n(28),x=n(17),p=n(4),g=n(287),v=n(243),y=n(285),w=n(246),S=n(149),k=n.n(S),C=(n(132),n(133),n(284)),D=n(24),I=n.n(D),z=n(42),R=n(76),P=n.n(R),T="https://nicehostel.herokuapp.com",W=P.a.create(),F=P.a.create();W.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.Authorization="Bearer ".concat(t),e})),W.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e.response)}));var L=function(e){return W({url:T+"/api/reviews/",method:"POST",data:e})},N=function(e){return W({method:"POST",url:T+"/api/properties/",data:e})},E=function(e){return W({url:T+"/api/reservations",method:"POST",data:JSON.stringify({propertyId:e.roomId,fromDate:e.bookFromDate,toDate:e.bookToDate,adultNum:e.guest,childrenNum:e.children}),headers:{"Content-Type":"application/json"}})},A=function(e){return W.post(T+"/api/user/authenticate",{email:e.email,password:e.password})},q=function(e){return P.a.post(T+"/api/user/register-user",{email:e.email,password:e.password,confirmPassword:e.confirmPassword})},G=function(){var e=Object(z.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:return"/api/properties",console.log(n),e.abrupt("return",P.a.get(T+"/api/properties",{params:{typeId:t,city:n.city,from:n.from,to:n.to,guestNum:n.guestNum,childrenNum:n.childrenNum}}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(z.a)(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(T+"/api/cities");case 2:return t=e.sent,n=t.json(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(z.a)(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(T+"/api/propertytypes");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(z.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.get(T+"/api/properties/"+t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(z.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.get(T+"/api/reservations/user"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(z.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.get(T+"/api/reviews",{params:{propertyId:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(z.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.delete(T+"/api/reservations/"+t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){var t=e.roomId,n=e.token;return W.post("".concat(T,"/api/likes/").concat(t),{},{headers:{Authorization:"Bearer ".concat(n)}})},V={dots:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,initialSlide:0,swipeToSlide:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:1,infinite:!0,dots:!0}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:1,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},J=function(e){var t=e.type,n=(e.children,Object(x.g)());return Object(r.jsxs)(g.d,{alignItems:"start",p:"4",children:[Object(r.jsx)(v.a,{onClick:function(){n.push({pathname:"/rooms",state:{type:t}})},children:Object(r.jsx)(y.a,{hasArrow:!0,placement:"top","aria-label":"tooltips",label:t.description,openDelay:500,children:Object(r.jsxs)(f.a,{children:[Object(r.jsx)(f.a,{maxW:"sm",maxH:"sm",minH:"100px",children:Object(r.jsx)(w.a,{width:"inherit",height:"inherit",src:t.thumbnailImg,objectFit:"cover"})}),Object(r.jsx)(f.a,{mt:"1",fontWeight:"semibold",as:"h4",lineHeight:"tight",isTruncated:!0,children:t.propertyType})]})})}),Object(r.jsx)(f.a,{color:"gray.500",fontSize:"md",children:t.count+" "+t.propertyType})]})},K=function(){var e=Object(C.a)("propertypeList",H,{staleTime:6e5}),t=e.data,n=e.isError;return e.isFetching&&console.log("refetching prop"),n?Object(r.jsx)(f.a,{children:"Something's wrong"}):Object(r.jsx)("div",{children:Object(r.jsx)(k.a,Object(j.a)(Object(j.a)({},V),{},{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(r.jsx)(J,{type:e},t)}))}))})},Z=n(248),X=n(250),Q=n(251),ee=n(252),te=n(223),ne=n(277),re=n(154),ie=n(245),ae=n(167),ce=n(19),oe=n(22),se=n(276),le=n(281),de=n(101),je=n.n(de),ue=(n(219),new Date(Date.now()),function(e,t){var n=new Date(e),r=new Date(t),i=[],a=n;for(a.setDate(a.getDate()+1);a.getDate()<r.getDate();)i.push(new Date(a)),a.setDate(a.getDate()+1);return i}),be=function(e){var t;return null===e||void 0===e||null===(t=e.reservedDates)||void 0===t?void 0:t.map((function(e){return new Date(e.fromDate)}))},he=function(e,t){var n=void 0;return(null===t||void 0===t?void 0:t.reservedDates)&&t.reservedDates.forEach((function(t){var r=new Date(t.fromDate);r>e&&(n?r<=n&&(n=r):n=r)})),n!==e?n:null},fe={from:void 0,to:void 0,enteredTo:void 0},Oe=function(e){var t=e.from,n=e.to,i=e.updateDate,a=e.schedules,c=Object(u.a)(e,["from","to","updateDate","schedules"]),s=Object(se.a)(),l=o.a.useState({from:t,to:n}),d=Object(p.a)(l,2),b=d[0],h=d[1],O=[{before:new Date(Date.now())}].concat(Object(oe.a)(function(e){var t=[];if(null===e||void 0===e?void 0:e.reservedDates)for(var n=0;n<e.reservedDates.length;n++)t.push.apply(t,Object(oe.a)(ue(e.reservedDates[n].fromDate,e.reservedDates[n].toDate)));return(null===e||void 0===e?void 0:e.dayOff)&&t.push.apply(t,Object(oe.a)(e.dayOff)),t}(a))),m=o.a.useState(O),x=Object(p.a)(m,2),g=x[0],v=x[1];o.a.useEffect((function(){(b.from&&b.to||!b.from&&!b.to)&&i(b.from,b.to)}),[b.from,b.to]);var y=function(e,t,n){var r=t&&de.DateUtils.isDayBefore(e,t);return!t||r||t&&n},w=function(){h(fe)},S=[b.from,{from:b.from,to:b.enteredTo}],k={start:b.from,end:b.enteredTo,checkoutOnly:be(a)},C=Object(le.a)({base:1,md:2});return Object(r.jsxs)(f.a,Object(j.a)(Object(j.a)({d:"flex",flexDir:"column"},c),{},{overflow:"clip",children:[Object(r.jsx)(f.a,{alignSelf:"center",children:Object(r.jsx)(je.a,{numberOfMonths:C,fromMonth:b.from,modifiers:k,onDayClick:function(e,t){if(!t.disabled){var n=new Date(Date.now());if(!(e<n)){var r=b.from,i=b.to;if(r&&i&&e>=r&&e<=i)w();else if(y(e,r,i)){if(t.checkoutOnly)return void s({status:"info",description:"Check out only!",duration:3e3});v((function(t){return Object(j.a)(Object(j.a)({},t),{},{before:e,after:he(e,a)})})),h({from:e,to:void 0,enteredTo:void 0})}else{var c;if(v(O),(null===(c=b.from)||void 0===c?void 0:c.getDate())===e.getDate())return void h({from:void 0,to:void 0,enteredTo:void 0});h((function(t){return Object(j.a)(Object(j.a)({},t),{},{to:e,enteredTo:e})}))}}}},disabledDays:g,onDayMouseEnter:function(e){var t=b.from,n=b.to;y(e,t,n)||h((function(t){return Object(j.a)(Object(j.a)({},t),{},{enteredTo:e})}))},selectedDays:S})}),Object(r.jsxs)(Z.a,{justifyContent:"center",alignItems:"center",children:[!b.from&&!b.to&&"Please select the first day.",b.from&&!b.to&&"Please select the last day.",b.from&&b.to&&"Selected from ".concat(b.from.toLocaleDateString()," to\n                ").concat(b.to.toLocaleDateString())," ",b.from&&b.to&&Object(r.jsx)(re.a,{onClick:w,children:"Reset"})]})]}))},me=n(249),xe=function(e){var t=e.guest,n=e.children,i=e.updatePeople,a=e.maxGuest;return Object(r.jsx)(f.a,{p:"4",style:{backdropFilter:"blur(5px)"},children:Object(r.jsxs)(g.d,{align:"stretch",spacing:4,children:[Object(r.jsxs)(Z.a,{alignItems:"center",children:[Object(r.jsx)(me.a,{mr:"auto",fontSize:"md",children:"Guests"}),Object(r.jsx)(f.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(re.a,{variant:"ghost",borderRadius:"0",disabled:t<=0,onClick:function(){return i(--t,n)},children:"-"})}),Object(r.jsx)(me.a,{mx:"4",fontSize:"md",children:t}),Object(r.jsx)(f.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(re.a,{variant:"ghost",borderRadius:"0",disabled:void 0!==a&&t>=a,onClick:function(){return i(++t,n)},children:"+"})})]}),Object(r.jsxs)(Z.a,{alignItems:"center",children:[Object(r.jsx)(me.a,{mr:"auto",fontSize:"md",children:"Children"}),Object(r.jsx)(f.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(re.a,{variant:"ghost",borderRadius:"0",disabled:n<=0,onClick:function(){return i(t,--n)},children:"-"})}),Object(r.jsx)(me.a,{mx:"4",fontSize:"md",children:n}),Object(r.jsx)(f.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(re.a,{variant:"ghost",borderRadius:"0",isDisabled:n>=5,onClick:function(){return i(t,++n)},children:"+"})})]})]})})},pe=function(e){var t,n,i=Object(C.a)("cities",B,{staleTime:6e5}),a=i.data,c=i.isLoading,s=(i.status,Object(x.g)()),l=e.search;o.a.useEffect((function(){e.updateSearch&&(console.log("update form"),e.updateSearch(l))}),[l]);return Object(r.jsx)(f.a,{p:"2",border:"1px",borderColor:"yellow.400",style:{backdropFilter:"blur(5px)"},children:Object(r.jsxs)(Z.a,{display:{lg:"flex"},alignItems:"center",children:[Object(r.jsxs)(X.a,{children:[Object(r.jsx)(Q.a,{pointerEvents:"none",children:Object(r.jsx)(ce.l,{})}),Object(r.jsx)(ee.a,{list:"datalist-cities",placeholder:"City",size:"lg",borderRadius:"0",onChange:function(t){return n=t.target.value,void(e.updateSearch&&(null===e||void 0===e||e.updateSearch(Object(j.a)(Object(j.a)({},e.search),{},{city:n}))));var n},value:e.search.city}),c?Object(r.jsx)(Q.b,{children:Object(r.jsx)(te.a,{alignSelf:"center"})}):Object(r.jsx)("datalist",{id:"datalist-cities",children:null===a||void 0===a?void 0:a.map((function(e){return Object(r.jsx)("option",{value:e.cityName},e.id)}))})]}),Object(r.jsxs)(ne.a,{closeOnBlur:!0,children:[Object(r.jsx)(ne.c,{children:Object(r.jsxs)(re.a,{variant:"outline",w:["100%","100%","100%","150%"],size:"lg",_focusVisible:{border:"0"},borderRadius:"0",px:"2",children:[(null===l||void 0===l||null===(t=l.from)||void 0===t?void 0:t.toLocaleDateString())||"From"," - ",(null===l||void 0===l||null===(n=l.to)||void 0===n?void 0:n.toLocaleDateString())||"To"]})}),Object(r.jsx)(ie.a,{children:Object(r.jsx)(ne.b,{flexWrap:"nowrap",alignItems:"center",style:{backdropFilter:"blur(5px)"},w:"100%",borderRadius:"0",bgColor:Object(ae.e)("gray.100","gray.800"),children:Object(r.jsx)(Oe,{updateDate:function(t,n){e.updateSearch&&(null===e||void 0===e||e.updateSearch(Object(j.a)(Object(j.a)({},e.search),{},{from:t,to:n})))}})})})]}),Object(r.jsxs)(ne.a,{children:[Object(r.jsx)(ne.c,{children:Object(r.jsx)(re.a,{variant:"outline",w:["100%","100%","100%","150%"],size:"lg",borderRadius:"0",px:"2",children:l.guestNum+" guests - "+l.childrenNum+" children"})}),Object(r.jsx)(ie.a,{children:Object(r.jsx)(ne.b,{flexWrap:"nowrap",borderRadius:"0",bg:"inherit",bgColor:Object(ae.e)("gray.100","gray.800"),children:Object(r.jsx)(xe,{updatePeople:function(t,n){e.updateSearch&&(null===e||void 0===e||e.updateSearch(Object(j.a)(Object(j.a)({},e.search),{},{guestNum:t,childrenNum:n})))},guest:l.guestNum,children:l.childrenNum})})})]}),Object(r.jsx)(re.a,{alignSelf:"center",size:"lg",minW:"100px",ml:[0,0,0,2],onClick:e.onClickSearch?e.onClickSearch:function(){s.push({pathname:"/rooms",state:{search:e.search}})},isLoading:e.isLoading,mt:[2,2,2,0],w:["100%","100%","100%","30%"],borderRadius:"0",children:"Search"})]})})},ge=n(261),ve=n.p+"static/media/HomeBG.c3c3859c.webp",ye=n(244),we=n(259),Se=n(260),ke=n(274),Ce=n(278),De=n(255),Ie=n(35),ze=function(e){var t=Object(ae.d)().toggleColorMode,n=Object(ae.e)("dark","light"),i=Object(ae.e)(Ie.f,Ie.i);return Object(r.jsx)(De.a,Object(j.a)({size:"md",fontSize:"lg",variant:"ghost",color:"current",marginLeft:"2",onClick:t,icon:Object(r.jsx)(i,{}),"aria-label":"Switch to ".concat(n," mode")},e))},Re=n(156),Pe=n(57),Te=n(15),We=n(289),Fe=n(13),Le=n.p+"static/media/logo.314a949b.svg";function Ne(){var e=Object(Re.a)(["\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n"]);return Ne=function(){return e},e}var Ee=Object(Pe.b)(Ne()),Ae=Object(Te.a)((function(e,t){var n=Object(We.a)()?void 0:"".concat(Ee," infinite 20s linear");return Object(r.jsx)(Fe.a.img,Object(j.a)({animation:n,boxSize:"30px",src:Le,ref:t},e))})),qe=n(157),Ge=n(95),Be=n(290),He=o.a.createContext({}),Ue=function(e){var t=e.children,n=o.a.useState(!1),i=Object(p.a)(n,2),a=i[0],c=i[1],s=o.a.useState(void 0),l=Object(p.a)(s,2),d=l[0],j=l[1],u=o.a.useState(localStorage.getItem("token")),b=Object(p.a)(u,2),h=b[0],f=b[1],O=(Object(Ge.b)(),Object(se.a)());o.a.useEffect((function(){var e=localStorage.getItem("token");e&&(function(e){return fetch("".concat(T,"/api/user/validate-token"),{headers:{Authorization:"Bearer ".concat(e)}})}(e).then((function(e){if(console.log("validating..."),200!==e.status)return g("Token expired")})),f(e))}),[]),o.a.useEffect((function(){if(h){var e=Object(qe.a)(h);j({email:e.email,name:e.name,roles:e.roles,token:h})}}),[h]);var m=Object(Be.a)(A,{onSuccess:function(e){f(e.data.token),localStorage.setItem("token",e.data.token),O({description:"Logged in successfully",status:"success",duration:3e3})},onError:function(e){O({description:e.data.message,status:"error",duration:3e3})},onSettled:function(){return c(!1)}}),x=Object(Be.a)(q,{onSuccess:function(e){f(e.data.token),localStorage.setItem("token",e.data.token),O({description:"Logged in successfully",status:"success",duration:3e3})},onError:function(e){console.log(e.data);for(var t=0;t<e.data.messages.length;t++)O({description:e.data.messages[t],status:"error",duration:3e3})},onSettled:function(){return c(!1)}}),g=function(){var e=Object(z.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1e3)}));case 2:return j(void 0),f(null),localStorage.removeItem("token"),O({title:t||"Logged out successfully!",isClosable:!0,duration:3e3,status:"success"}),e.next=8,new Promise((function(e){return setTimeout(e,500)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(z.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,new Promise((function(e){return setTimeout(e,1e3)}));case 3:try{m.mutate(t)}catch(n){console.log(n)}finally{c(!1)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(z.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,new Promise((function(e){return setTimeout(e,1e3)}));case 3:try{x.mutate(t)}catch(n){console.log(n)}finally{c(!1)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(He.Provider,{value:{loginAsync:v,logoutAsync:g,updateToken:function(e){f(e)},isLoading:a,user:d,registerAsync:y},children:t})},Me=n(68),Ye=n(256),_e=n(257),$e=n(258),Ve=n(282);var Je=function(e){var t=e.initRef,n=e.fromUrl,i=e.isRegistering,a=Object(x.g)(),c=o.a.useState({remember:!1,isRegistering:i}),s=Object(p.a)(c,2),l=s[0],d=s[1],u=o.a.useState(!1),b=Object(p.a)(u,2),h=b[0],f=b[1],O=o.a.useState(!1),m=Object(p.a)(O,2),g=m[0],v=m[1],y=o.a.useState(!1),w=Object(p.a)(y,2),S=w[0],k=w[1];o.a.useEffect((function(){var e,t;e=l.email,t=l.password,function(e){return!!e&&/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}(e)?f(!1):f(!0),v(""===t)}),[l.email,l.password]),o.a.useEffect((function(){l.isRegistering&&l.confirmedPassword===l.password?(console.log(l.password),console.log(l.confirmedPassword),k(!1),console.log(S)):k(!0)}),[l.confirmedPassword,l.isRegistering,l.password]);var C=o.a.useContext(He);return Object(r.jsxs)(Fe.a.form,{d:"flex",flexDir:"column",children:[Object(r.jsxs)(Me.a,{isInvalid:h,children:[Object(r.jsx)(Ye.a,{htmlFor:"email",children:"Email"}),Object(r.jsx)(ee.a,{placeholder:"Enter your email",id:"email",isInvalid:h,ref:t,variant:"filled",size:"lg",type:"email",value:l.email,isRequired:!0,onChange:function(e){return d((function(t){return Object(j.a)(Object(j.a)({},t),{},{email:e.target.value.trim()})}))}}),Object(r.jsx)(_e.a,{children:"Email not correct"})]}),Object(r.jsxs)(Me.a,{isInvalid:g,children:[Object(r.jsx)(Ye.a,{htmlFor:"password",my:"2",children:"Password"}),Object(r.jsx)(ee.a,{placeholder:"Enter your password",id:"password",isInvalid:g,variant:"filled",size:"lg",type:"password",value:l.password,minLength:1,isRequired:!0,onChange:function(e){return d((function(t){return Object(j.a)(Object(j.a)({},t),{},{password:e.target.value})}))}})]}),Object(r.jsxs)($e.a,{in:l.isRegistering,children:[Object(r.jsxs)(Me.a,{isInvalid:S,children:[Object(r.jsx)(Ye.a,{htmlFor:"confirm-password",my:"2",children:"Confirm Password"}),Object(r.jsx)(ee.a,{placeholder:"Confirm your password",id:"confirm-password",isInvalid:S,variant:"filled",size:"lg",type:"password",value:l.confirmedPassword,minLength:1,isRequired:!0,onChange:function(e){return d((function(t){return Object(j.a)(Object(j.a)({},t),{},{confirmedPassword:e.target.value})}))}})]}),Object(r.jsx)(_e.a,{children:"Password does not match"})]}),Object(r.jsx)(Ve.a,{size:"lg",checked:l.remember,mt:"2",onChange:function(e){return d((function(t){return Object(j.a)(Object(j.a)({},t),{},{remember:e.target.checked})}))},children:"Remember me"}),Object(r.jsx)(re.a,{my:"3",w:"30%",rounded:"full",type:"submit",alignSelf:"center",title:"Login",isLoading:C.isLoading,isDisabled:l.isRegistering?h||g||S:h||g,onClick:l.isRegistering?function(){C.registerAsync({email:l.email,password:l.password,confirmPassword:l.confirmedPassword}),n&&a.replace(n)}:function(){C.loginAsync(l),n&&a.replace(n)},children:Object(r.jsx)(Ie.a,{})}),Object(r.jsx)(re.a,{variant:"link",alignSelf:"center",textStyle:"",onClick:function(){d((function(e){return Object(j.a)(Object(j.a)({},e),{},{isRegistering:!e.isRegistering})}))},children:l.isRegistering?"Or login instead!":"Register your account!"})]})},Ke=function(e){var t,n=Object.assign({},e),i=o.a.useContext(He),a=Object(ye.a)(),c=o.a.useRef(null),s=o.a.useState(!1),l=Object(p.a)(s,2),d=l[0],u=l[1],b=(Object(x.h)().pathname,Object(ae.e)("gray.800","gray.800"),Object(ae.e)("white","white"),Object(ae.e)("cyan.200","blue.400"));return Object(r.jsx)(f.a,Object(j.a)(Object(j.a)({marginBottom:["5%"]},n),{},{children:Object(r.jsxs)(Z.a,{justifyContent:"center",alignItems:"center",children:[Object(r.jsx)(m.b,{to:"/",children:Object(r.jsxs)(g.a,{spacing:4,children:[Object(r.jsx)(we.a,{children:Object(r.jsx)(Ae,{})}),Object(r.jsx)(Se.a,{size:"md",display:{base:"none",sm:"block"},children:"Nice homestays"})]})}),Object(r.jsx)(ge.a,{}),Object(r.jsxs)(g.a,{spacing:4,children:[Object(r.jsx)(ze,{}),void 0===i.user?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(re.a,{variant:"ghost",onClick:function(){a.onOpen(),u(!1)},children:"Login"}),Object(r.jsxs)(ke.a,{isOpen:a.isOpen,onClose:a.onClose,size:"xl",motionPreset:"slideInBottom",isCentered:!0,initialFocusRef:c,children:[Object(r.jsx)(ke.f,{}),Object(r.jsxs)(ke.d,{children:[Object(r.jsx)(ke.e,{children:d?"Sign up new account":"Login"}),Object(r.jsx)(ke.c,{}),Object(r.jsx)(ke.b,{pb:"2",children:Object(r.jsx)(Je,{initRef:c,isRegistering:d})})]})]}),Object(r.jsx)(re.a,{variant:"ghost",onClick:function(){a.onOpen(),u(!0)},children:"Register"})]}):Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(Ce.a,{children:[Object(r.jsx)(Ce.b,{as:re.a,variant:"ghost",rightIcon:Object(r.jsx)(ce.f,{}),children:i.user.name}),Object(r.jsxs)(Ce.e,{children:[Object(r.jsxs)(Ce.d,{as:m.b,to:"/profile?view=likes",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ce.c,{})}),"Saved rooms"]}),Object(r.jsxs)(Ce.d,{as:m.b,to:"/profile?view=reservations",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ce.e,{})}),"Your Reservations"]}),Object(r.jsxs)(Ce.d,{as:m.b,to:"/profile?view=notifications",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ce.b,{})}),"Notifications"]}),Object(r.jsx)(Ce.c,{}),(null===(t=i.user.roles)||void 0===t?void 0:t.includes("Owner"))?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Ce.d,{as:m.b,to:"/user/publish",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ce.j,{})}),"Host your property"]}),Object(r.jsxs)(Ce.d,{as:m.b,to:"/user/publish",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ce.i,{})}),"Your properties"]})]}):Object(r.jsxs)(Ce.d,{bg:b,as:m.b,to:"/user/register-host",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ce.j,{})}),"Become a host"]}),Object(r.jsxs)(Ce.d,{as:m.b,to:"/",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ce.k,{})}),"Account"]}),Object(r.jsx)(Ce.c,{}),Object(r.jsxs)(Ce.d,{onClick:function(){return i.logoutAsync()},children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ce.d,{})}),"Log Out"]})]})]})})]})]})}))},Ze=function(){var e=o.a.useState({childrenNum:0,guestNum:0}),t=Object(p.a)(e,2),n=t[0],i=t[1];return Object(r.jsxs)(f.a,{children:[Object(r.jsx)(f.a,{minH:["50vh","75vh","85vh"],style:{background:"url('"+ve+"') center/cover"},color:"white",children:Object(r.jsxs)(f.a,{px:"10%",pt:"5",children:[Object(r.jsx)(Ke,{}),Object(r.jsx)(ae.c,{children:Object(r.jsx)(pe,{search:n,updateSearch:function(e){i(e)}})}),Object(r.jsx)(f.a,{as:"h1",fontFamily:"mono",textShadow:"gray 2px 2px 2px",color:"whiteAlpha.600",fontWeight:"bold",fontSize:["3xl","4xl","6xl","8xl"],mt:["5vh","10vh","20vh","30vh"],children:"EXPLORE AROUND"})]})}),Object(r.jsxs)(f.a,{px:"10%",mt:"10",children:[Object(r.jsxs)(g.a,{children:[Object(r.jsx)(f.a,{as:"h2",fontWeight:"bold",fontSize:"4xl",mb:"5",children:"LIVE ANYWHERE"}),Object(r.jsx)(ge.a,{}),Object(r.jsxs)(v.a,{as:m.b,to:"/rooms",d:"flex",flexDir:"row",alignItems:"center",children:["All properties ",Object(r.jsx)(f.a,{ml:"2",children:Object(r.jsx)(ce.a,{})})]})]}),Object(r.jsx)(K,{})]})]})},Xe=n(158),Qe=n(263),et=function(e){var t,n,i,a=e.room,c=e.bookInfo,s=e.updateDate,l=e.updatePeople,d=o.a.useContext(He),j=Object(x.g)(),u=Object(ye.a)(),b=o.a.useState(0),h=Object(p.a)(b,2),m=h[0],v=h[1],w=Object(se.a)(),S=Object(C.a)(["pricing",c],(function(){if(c.roomId&&c.bookFromDate&&c.bookToDate)return function(e){return console.log(e),P.a.get(T+"/api/reservations/check-pricing",{params:{fromDate:e.bookFromDate,toDate:e.bookToDate,propertyId:e.roomId,guestNum:e.guest,childrenNum:e.children}})}(c)}),{onSuccess:function(e){return console.log(null===e||void 0===e?void 0:e.data)},staleTime:6e4}),k=Object(Be.a)(E,{onSuccess:function(e){w({description:"Success",status:"success",isClosable:!0}),j.push("/profile?view=reservations")},onError:function(e){w({description:"Something's wrong",status:"error",isClosable:!0})}}),D=function(){var e=Object(z.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.user){e.next=2;break}return e.abrupt("return",w({description:"Login is required",status:"info",isClosable:!0}));case 2:k.mutate(c);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=null===(t=S.data)||void 0===t?void 0:t.data;return o.a.useEffect((function(){return c.bookFromDate&&c.bookToDate?(v(ue(c.bookFromDate.toDateString(),c.bookToDate.toDateString()).length+1),u.onOpen()):u.onClose()}),[c.bookFromDate,c.bookToDate]),Object(r.jsxs)(f.a,{display:"inline-flex",flexDir:"column",alignContent:"center",justifyContent:"center",children:[Object(r.jsxs)(Z.a,{alignItems:"baseline",children:[Object(r.jsx)(f.a,{as:"h2",fontFamily:"mono",fontSize:"3xl",fontWeight:"semibold",children:a.formattedPrice+"$ "}),Object(r.jsx)(f.a,{as:"span",color:"gray.500",fontStyle:"italic",children:"/ per night"}),Object(r.jsx)(ge.a,{}),Object(r.jsx)(f.a,{d:"flex",alignItems:"center",children:Array(5).fill("").map((function(e,t){return t<Math.round(a.totalStar/a.totalReview)?Object(r.jsx)(ce.n,{colorRendering:"teal.400"},t):Object(r.jsx)(ce.m,{},t)}))})]}),Object(r.jsxs)(f.a,{mt:"4",children:[Object(r.jsxs)(ne.a,{closeOnBlur:!0,children:[Object(r.jsx)(ne.c,{children:Object(r.jsxs)(g.a,{spacing:"0",children:[Object(r.jsx)(re.a,{variant:"outline",borderTopLeftRadius:"lg",size:"lg",w:"100%",_focusVisible:{border:"0"},borderRadius:"0",children:(null===c||void 0===c||null===(n=c.bookFromDate)||void 0===n?void 0:n.toLocaleDateString())||"From"}),Object(r.jsx)(re.a,{variant:"outline",borderTopRightRadius:"lg",size:"lg",w:"100%",_focusVisible:{border:"0"},borderRadius:"0",children:(null===c||void 0===c||null===(i=c.bookToDate)||void 0===i?void 0:i.toLocaleDateString())||"To"})]})}),Object(r.jsx)(ne.b,{flexWrap:"nowrap",alignItems:"center",w:"100%",style:{backdropFilter:"blur(5px)"},borderRadius:"0",bg:"inherit",bgColor:"rgba(66, 153, 225, 0.5)",children:Object(r.jsx)(Oe,{schedules:{reservedDates:a.reservedDates,dayOff:a.daysOff},updateDate:s})})]}),Object(r.jsxs)(ne.a,{children:[Object(r.jsx)(ne.c,{children:Object(r.jsx)(re.a,{variant:"outline",w:"100%",size:"lg",borderRadius:"0",borderBottomRadius:"lg",px:"2",children:c.guest+" guests - "+c.children+" children"})}),Object(r.jsx)(ne.b,{flexWrap:"nowrap",borderRadius:"0",bg:"inherit",bgColor:"rgba(66, 153, 225, 0.5)",children:Object(r.jsx)(xe,{updatePeople:l,guest:c.guest,children:c.children,maxGuest:a.maxGuest})})]})]}),Object(r.jsx)(re.a,{variant:"solid",colorScheme:"green",alignSelf:"stretch",mt:"4",isDisabled:!u.isOpen,onClick:D,children:u.isOpen?"Proceed checkout":"Choose dates to see detail"}),Object(r.jsx)(f.a,{alignSelf:"center",my:"2",fontWeight:"thin",fontStyle:"oblique",children:"You won't be charged yet"}),Object(r.jsx)($e.a,{in:u.isOpen,children:Object(r.jsxs)(f.a,{fontSize:"lg",children:[Object(r.jsxs)(Z.a,{alignItems:"baseline",children:[Object(r.jsx)(y.a,{label:m&&"You are currently booking ".concat(null===R||void 0===R?void 0:R.nightCount," night(s)"),placement:"left",hasArrow:!0,children:Object(r.jsxs)(f.a,{fontWeight:"light",textDecoration:"underline",children:[a.formattedPrice,"$ x ",null===R||void 0===R?void 0:R.nightCount," nights"]})}),Object(r.jsx)(ge.a,{}),S.isLoading?Object(r.jsx)(te.a,{}):Object(r.jsx)(f.a,{fontFamily:"mono",children:R&&"".concat((null===R||void 0===R?void 0:R.pricePerNight)*(null===R||void 0===R?void 0:R.nightCount)," $")})]}),Object(r.jsxs)(Z.a,{alignItems:"baseline",children:[Object(r.jsx)(y.a,{label:"The owner keeps your place in highest cleanliness",placement:"left",hasArrow:!0,children:Object(r.jsx)(f.a,{fontWeight:"light",textDecoration:"underline",children:"Cleaning fee"})}),Object(r.jsx)(ge.a,{}),S.isLoading?Object(r.jsx)(te.a,{}):Object(r.jsxs)(f.a,{fontFamily:"mono",children:[null===R||void 0===R?void 0:R.cleaningFee," $"]})]}),Object(r.jsxs)(Z.a,{alignItems:"baseline",children:[Object(r.jsx)(y.a,{label:"This helps us run our platform and offer services like 24/7 support on your trip. It includes VAT.",placement:"left",hasArrow:!0,children:Object(r.jsx)(f.a,{fontWeight:"light",textDecoration:"underline",children:"Service fee"})}),Object(r.jsx)(ge.a,{}),S.isLoading?Object(r.jsx)(te.a,{}):Object(r.jsxs)(f.a,{fontFamily:"mono",children:[null===R||void 0===R?void 0:R.serviceFee," $"]})]}),Object(r.jsxs)(Z.a,{alignItems:"baseline",children:[Object(r.jsx)(y.a,{label:"We offer you discount based on your reservation!",placement:"left",hasArrow:!0,children:Object(r.jsxs)(f.a,{fontWeight:"light",textDecoration:"underline",children:["Discount",Object(r.jsx)(f.a,{as:"span",textDecoration:"none",mx:"2",children:R?R.discountPercent+"%":"0%"})]})}),Object(r.jsx)(ge.a,{}),S.isLoading?Object(r.jsx)(te.a,{}):Object(r.jsxs)(f.a,{fontFamily:"mono",children:[null===R||void 0===R?void 0:R.discount," $"]})]}),Object(r.jsx)(O.a,{my:"2",colorScheme:"green",variant:"dashed"}),Object(r.jsxs)(Z.a,{fontWeight:"black",fontSize:"3xl",children:[Object(r.jsx)(f.a,{fontFamily:"mono",children:"Total"}),Object(r.jsx)(ge.a,{}),S.isLoading?Object(r.jsx)(te.a,{}):Object(r.jsxs)(f.a,{fontFamily:"mono",children:[null===R||void 0===R?void 0:R.totalCost," $"]})]})]})})]})},tt=n(77),nt=n(124),rt=[{id:"1",title:"Helpful owner",description:"Owner provides best services"},{id:"2",title:"Extra clean",description:"Owner follows our strict policies of enhanced clealiness"},{id:"3",title:"Not smoking",description:"Owner does not allow smoking inside"},{id:"4",title:"Free cancelation",description:"You can cancel with full refund in 24 hours"}],it=function(e){var t=e.id,n=o.a.useState(),i=Object(p.a)(n,2),a=i[0],c=i[1],s=o.a.useState(),l=Object(p.a)(s,2),d=l[0],j=l[1];return o.a.useEffect((function(){var e=rt.find((function(e){return e.id===t}));switch(j(e),t){case"1":c(nt.b);break;default:c(nt.a)}}),[t]),Object(r.jsxs)(g.a,{alignContent:"center",spacing:"0",mb:"2",children:[Object(r.jsx)(tt.a,{d:"flex",boxSize:"10",alignItems:"center",justifyContent:"center",mt:"2",ml:"2",children:a}),Object(r.jsxs)(g.d,{alignItems:"start",spacing:"0",children:[Object(r.jsx)(f.a,{as:"h4",fontSize:"md",fontWeight:"semibold",children:null===d||void 0===d?void 0:d.title}),Object(r.jsx)(f.a,{as:"h5",fontSize:"sm",m:"0",children:null===d||void 0===d?void 0:d.description})]})]})},at=function(e){var t,n,i,a=e.propId,c=(Object(u.a)(e,["propId"]),Object(C.a)(["reviews",a],(function(){return Y(a)}),{retry:2,onSuccess:function(e){}})),o=(null===(t=c.data)||void 0===t?void 0:t.data)?c.data.data:[],s=0;return o.forEach((function(e){return s+=e.starCount})),Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(f.a,{d:"flex",gridGap:"2",alignItems:"baseline",fontWeight:"semibold",fontSize:"2xl",mb:"5",children:[Object(r.jsx)(ce.n,{}),Object(r.jsxs)(f.a,{as:"h2",children:[" ",0!=o.length?(s/o.length).toPrecision(2):0," (",o.length," reviews)"]})]}),0===(null===(n=c.data)||void 0===n?void 0:n.data.length)?Object(r.jsx)(f.a,{fontWeight:"light",children:"Looks like this property does not have any reviews"}):Object(r.jsxs)(f.a,{d:"flex",flexWrap:"wrap",gridGap:"5",children:[null===(i=c.data)||void 0===i?void 0:i.data.map((function(e){return Object(r.jsx)(ot,{review:e},e.reviewId)})),Object(r.jsx)(ot,{review:ct}),Object(r.jsx)(ot,{review:ct}),Object(r.jsx)(ot,{review:ct})]})]})},ct={user:{name:"Test user name",userId:"123",profileImageUrl:""},comment:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Id, repellat. Harum, facilis corrupti eligendi laborum minus nihil et a mollitia!",propertyId:"1",reviewId:"123123",starCount:4,timeCreated:"20202020",timeUpdated:"20202020"},ot=function(e){var t,n=e.review,i=Object(u.a)(e,["review"]);return Object(r.jsxs)(f.a,Object(j.a)(Object(j.a)({},i),{},{flex:"1 1 25em",children:[Object(r.jsxs)(f.a,{d:"flex",flexDir:"row",gridGap:"2",children:[Object(r.jsx)(Qe.a,{name:null===(t=n.user)||void 0===t?void 0:t.name,src:n.user.profileImageUrl}),Object(r.jsxs)(f.a,{d:"flex",flexDir:"column",children:[Object(r.jsx)(f.a,{as:"h4",fontWeight:"bold",children:n.user.name}),Object(r.jsx)(f.a,{as:"h4",fontWeight:"light",children:n.timeUpdated})]})]}),Object(r.jsx)(f.a,{as:"h4",children:n.comment})]}))},st=rt,lt={id:"1",name:"Crystal palace",thumbnailUrl:"https://bit.ly/2Z4KKcF",maxGuest:1,images:[{url:"https://picsum.photos/1100/1000"},{url:"https://picsum.photos/700/1200"},{url:"https://picsum.photos/1000/1000"},{url:"https://picsum.photos/1200/1000"},{url:"https://picsum.photos/1100/900"}],thumbnailAlt:"rear view house with pool",introduction:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum congue eros id ligula porta, id fermentum ligula semper. Pellentesque eget pulvinar justo. Phasellus eu risus dolor. Aliquam mollis urna vel lectus ornare, nec ultricies augue gravida. Nunc dignissim diam vel massa cursus condimentum. Nulla pharetra molestie nunc, ac hendrerit felis posuere a. Sed finibus magna ut nibh luctus, ac dapibus mauris cursus. Sed eu porttitor lacus. Nulla venenatis erat quis orci consectetur efficitur. Phasellus nisl nisl, luctus et sapien nec, dictum feugiat felis. Nam nec ullamcorper mi, eu vulputate justo. Nullam nibh ipsum, dictum at commodo nec, molestie et ipsum. Aliquam sit amet tincidunt augue, sit amet consectetur mi.",description:"Best place in town",location:"Dark side, the moon",totalReview:4,totalStar:19,formattedPrice:2021,services:["Pet","Kitchen","Breakfast","Wifi"],roomBadges:st,serviceFee:0,cleaningFee:40},dt={userId:"1234",name:"Ivanov Ivan Ivanovich",profileImageUrl:""},jt=function(e){e.initRoom,e.children;var t,n=o.a.useContext(He),i=o.a.useState(lt),a=Object(p.a)(i,2),c=a[0],s=a[1],l=o.a.useState({guest:0,children:0}),d=Object(p.a)(l,2),u=d[0],b=d[1],h=o.a.useState(),v=Object(p.a)(h,2),y=(v[0],v[1]),S=o.a.useState(!1),k=Object(p.a)(S,2),D=k[0],I=k[1],z=Object(x.i)().slug,R=Object(se.a)(),P=Object(C.a)(["property",z],(function(){return U(z)}),{retry:2,onError:function(e){console.log(e)},onSuccess:function(e){e.data.liked&&I(e.data.liked),s(Object(j.a)(Object(j.a)({},e.data),{},{roomBadges:st})),b((function(t){return Object(j.a)(Object(j.a)({},t),{},{roomId:e.data.id})}))},onSettled:function(){}}),T=P.data,W=(P.isError,P.error,P.isLoading,Object(Be.a)($,{onSuccess:function(e){I(e.data.liked),R({description:e.data.liked?"Saved room":"Removed from wishlist",status:"info",duration:1e3})},onError:function(e){return console.log(e)}}));o.a.useEffect((function(){y(dt)}),[]);var F=function(e,t){b((function(n){return Object(j.a)(Object(j.a)({},n),{},{bookFromDate:e,bookToDate:t})}))};return T?Object(r.jsxs)(f.a,{children:[Object(r.jsx)(O.a,{my:"5"}),Object(r.jsx)(f.a,{as:"h2",fontSize:"3xl",fontWeight:"semibold",children:c.name}),Object(r.jsxs)(f.a,{d:"flex",mt:"1",flexDir:{base:"column",sm:"row"},children:[Object(r.jsxs)(f.a,{d:"flex",alignItems:"start",children:[Object(r.jsxs)(f.a,{d:"flex",flexDir:{base:"column",sm:"row"},children:[Object(r.jsx)(f.a,{d:"flex",flexDir:{base:"row"},children:Array(5).fill("").map((function(e,t){return t<Math.round(c.totalStar/c.totalReview)?Object(r.jsx)(ce.n,{colorRendering:"teal.400"},t):Object(r.jsx)(ce.m,{},t)}))}),Object(r.jsxs)(f.a,{as:"span",ml:"2",color:"gray.500",children:[c.totalReview," reviews"]})]}),Object(r.jsx)(ge.a,{}),Object(r.jsx)(m.b,{to:"/",children:Object(r.jsxs)(re.a,{variant:"link",children:[Object(r.jsx)(f.a,{mx:"4",children:"\u2022"}),c.location]})})]}),Object(r.jsx)(ge.a,{}),Object(r.jsx)(re.a,{alignSelf:"start",variant:"ghost",size:"sm",onClick:function(){n.user?W.mutate({roomId:c.id,token:n.user.token}):R({description:"Login is required",status:"info",duration:1e3})},leftIcon:D&&n.user?Object(r.jsx)(ce.h,{color:"red"}):Object(r.jsx)(ce.g,{}),children:"Like"})]}),Object(r.jsx)(f.a,{borderRadius:"lg",overflow:"hidden",mt:"4",children:Object(r.jsx)(Xe.a,{gap:"2",h:"40%",maxH:"450px",objectFit:"cover",templateRows:"repeat(2, 1fr)",templateColumns:"repeat(4, 1fr)",children:c.images.slice(0,5).map((function(e,t){return Object(r.jsx)(Xe.b,{colSpan:0===t?2:1,rowSpan:0===t?2:1,overflow:"hidden",children:Object(r.jsx)(w.a,{src:e.url,h:"auto",height:"100%",w:"100%",objectFit:"cover",loading:"lazy"})},t)}))})}),Object(r.jsxs)(f.a,{mt:"4",d:["flex","flex","flex","block"],flexDir:"column-reverse",children:[Object(r.jsx)(f.a,{w:["100%","100%","100%","35%"],boxShadow:"2xl",mt:{base:"4",lg:"0"},top:"30%",float:{lg:"right"},position:{lg:"sticky"},borderRadius:"lg",display:"inline-flex",flexDir:"column",zIndex:1,borderWidth:"thin",p:"4",alignContent:"center",justifyContent:"center",children:Object(r.jsx)(et,{room:c,bookInfo:u,updateDate:F,updatePeople:function(e,t){b((function(n){return Object(j.a)(Object(j.a)({},n),{},{guest:e,children:t})}))}})}),Object(r.jsxs)(f.a,{w:["100%","100%","100%","60%"],children:[Object(r.jsxs)(Z.a,{alignItems:"center",children:[Object(r.jsxs)(g.d,{alignItems:"start",children:[Object(r.jsx)(f.a,{as:"h1",fontSize:"2xl",fontWeight:"semibold",children:"Owner: "+c.ownerInfo.name}),Object(r.jsx)(g.a,{children:c.services.map((function(e,t){return Object(r.jsxs)(f.a,{color:"gray.500",fontWeight:"semibold",letterSpacing:"wide",fontSize:"xs",textTransform:"uppercase",ml:"2",isTruncated:!0,children:[e," ",c.services[c.services.length-1]!==e&&Object(r.jsx)(r.Fragment,{children:"\u2022"})," "]},t)}))})]}),Object(r.jsx)(ge.a,{}),Object(r.jsx)(Qe.a,{name:c.ownerInfo.name,src:c.ownerInfo.profileImageUrl,cursor:"pointer",onClick:function(){return alert("go to user's page")}})]}),Object(r.jsx)(O.a,{my:"3"}),null===(t=c.roomBadges)||void 0===t?void 0:t.map((function(e,t){return Object(r.jsx)(it,{id:e.id},t)})),Object(r.jsx)(O.a,{my:"3"}),Object(r.jsx)(f.a,{as:"h5",fontWeight:"semibold",fontSize:"2xl",children:"More about room"}),Object(r.jsx)(f.a,{as:"p",children:c.introduction}),Object(r.jsx)(O.a,{my:"3"}),Object(r.jsx)(f.a,{w:"100%",display:{base:"none",sm:"block"},children:Object(r.jsx)(Oe,{schedules:{reservedDates:c.reservedDates,dayOff:c.daysOff},updateDate:F})})]})]}),Object(r.jsx)(O.a,{my:"5"}),Object(r.jsx)(at,{propId:c.id})]}):Object(r.jsx)(r.Fragment,{})},ut=n(288),bt=function(){var e=Object(x.h)();if(e.state){var t=e.state.message;return Object(r.jsxs)(ut.a,{status:"error",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[Object(r.jsx)(ut.c,{boxSize:"40px",mr:0}),Object(r.jsx)(ut.d,{mt:4,mb:1,fontSize:"lg",children:t}),Object(r.jsx)(ut.b,{maxWidth:"md",children:"Look like you have some problems! Contact us for more info!"})]})}return Object(r.jsxs)(ut.a,{status:"info",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[Object(r.jsx)(ut.c,{boxSize:"40px",mr:0}),Object(r.jsx)(ut.d,{mt:4,mb:1,fontSize:"lg",children:"Not Found!"}),Object(r.jsx)(ut.b,{maxWidth:"md",children:"The page you are looking does not exist or was deleted"})]})},ht=n(266),ft=n(265),Ot=n(264),mt=function(e){var t=e.room,n=e.isSaved,i=Object(u.a)(e,["room","isSaved"]);return Object(r.jsxs)(f.a,Object(j.a)(Object(j.a)({borderWidth:"1px",borderRadius:"lg"},i),{},{bg:Object(ae.e)("gray.100","gray.900"),d:"flex",flexDir:"column",children:[Object(r.jsx)(v.a,{as:m.b,to:"/rooms/"+t.id,children:Object(r.jsx)(f.a,{minH:"200px",maxH:"300px",overflow:"hidden",children:Object(r.jsx)(w.a,{src:t.thumbnailUrl,objectFit:"cover",fit:"cover",fallback:Object(r.jsx)(f.a,{bgColor:"gray",color:"gray"}),alt:t.thumbnailAlt,overflow:"hidden",style:{transition:"ease 0.5s"},_hover:{transform:"scale(1.1)"}})})}),Object(r.jsx)(ge.a,{}),Object(r.jsxs)(f.a,{p:"4",d:"flex",flexDir:"column",children:[!n&&Object(r.jsxs)(f.a,{d:"flex",alignItems:"baseline",children:[Object(r.jsx)(Ot.a,{borderRadius:"full",px:"2",colorScheme:"teal",children:"New"}),t.services.map((function(e,n){return Object(r.jsxs)(f.a,{color:"gray.500",fontWeight:"semibold",letterSpacing:"wide",fontSize:"xs",textTransform:"uppercase",ml:"2",isTruncated:!0,children:[e," ",t.services[t.services.length-1]!==e&&Object(r.jsx)(r.Fragment,{children:"\u2022"})," "]},n)}))]}),Object(r.jsx)(f.a,{mt:"1",fontWeight:"semibold",as:"h4",lineHeight:"tight",children:t.name}),!n&&Object(r.jsx)(f.a,{as:"p",lineHeight:"tight",textOverflow:"ellipsis",overflow:"hidden",children:t.description.length>100?t.description.substring(0,100)+"...":t.description}),Object(r.jsxs)(f.a,{d:"flex",flexWrap:"wrap",justifySelf:"end",alignItems:"baseline",flexDir:"row",children:[Object(r.jsx)(f.a,{as:"h4",fontSize:"3xl",children:t.formattedPrice+"$"}),Object(r.jsx)(f.a,{as:"span",color:"gray.500",fontStyle:"italic",children:"/ per night"}),Object(r.jsx)(f.a,{d:"flex",alignItems:"center",alignSelf:"center",ml:"auto",children:Array(5).fill("").map((function(e,n){return n<Math.round(t.totalStar/t.totalReview)?Object(r.jsx)(ce.n,{colorRendering:"teal.400"},n):Object(r.jsx)(ce.m,{},n)}))})]})]})]}))},xt={id:"random-id-12321",name:"Crystal palace",thumbnailUrl:"https://picsum.photos/1100/1000?random=1",thumbnailAlt:"rear view house with pool",description:"Best place in townBest place in townBest place in townBest ",location:"Dark side, the moon",totalReview:4,totalStar:23,formattedPrice:2021,services:["Pet","Kitchen","Breakfast","Wifi"]},pt=(Object(j.a)(Object(j.a)({},xt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=1"}),Object(j.a)(Object(j.a)({},xt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=2"}),Object(j.a)(Object(j.a)({},xt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=3"}),Object(j.a)(Object(j.a)({},xt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=4"}),Object(j.a)(Object(j.a)({},xt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=5"}),function(e){var t=e.rooms;return t&&0!==t.length?Object(r.jsx)(ft.a,{spacing:"8",columns:[1,1,1,2,3],children:t&&t.map((function(e,t){return Object(r.jsx)(mt,{room:e,isSaved:!1},e.id)}))}):Object(r.jsx)(f.a,{children:"Not found any room"})}),gt=function(e){e.label,e.onClose;var t=Object(u.a)(e,["label","onClose"]);return Object(r.jsxs)(ht.a,Object(j.a)(Object(j.a)({size:"lg",colorScheme:"green"},t),{},{children:[Object(r.jsx)(ht.c,{children:e.label}),Object(r.jsx)(ht.b,{onClick:function(){return e.onClose()}})]}))},vt=function(){new URLSearchParams(Object(x.h)().search);var e=Object(ae.e)("gray.100","gray.900"),t=Object(x.h)(),n=o.a.useState({childrenNum:0,guestNum:0}),i=Object(p.a)(n,2),a=i[0],c=i[1],s=o.a.useState(),l=Object(p.a)(s,2),d=l[0],u=l[1];o.a.useEffect((function(){void 0!==t.state&&t.state.search&&c(t.state.search),void 0!==t.state&&t.state.type&&u(t.state.type)}),[]);var b=[null===d||void 0===d?void 0:d.id,a],h=Object(C.a)(["propertyView",b],(function(){return G(null===d||void 0===d?void 0:d.id,a)}),{staleTime:6e4}),O=h.data,m=h.isLoading,v=h.error,y=h.refetch,w=h.remove;return v?Object(r.jsx)(r.Fragment,{children:"Error"}):Object(r.jsxs)(f.a,{d:"flex",flexDir:"column",gridGap:"5",children:[Object(r.jsxs)(f.a,{position:{lg:"sticky"},top:0,bgColor:e,d:"flex",flexDir:"column",boxShadow:"2xl",gridGap:"5",pb:"5",children:[Object(r.jsx)(pe,{search:a,updateSearch:function(e){c(e)},isLoading:m,onClickSearch:function(){w(),y()}}),Object(r.jsxs)(g.a,{children:[d&&Object(r.jsx)(gt,{label:"Property type: "+d.propertyType,onClose:function(){u(void 0)}}),a.city&&Object(r.jsx)(gt,{label:a.city,onClose:function(){c((function(e){return Object(j.a)(Object(j.a)({},e),{},{city:""})}))}}),a.from&&Object(r.jsx)(gt,{label:"From: "+a.from.toLocaleDateString(),onClose:function(){c((function(e){return Object(j.a)(Object(j.a)({},e),{},{from:void 0})}))}}),a.to&&Object(r.jsx)(gt,{label:"To: "+a.to.toLocaleDateString(),onClose:function(){c((function(e){return Object(j.a)(Object(j.a)({},e),{},{to:void 0})}))}}),a.guestNum>0&&Object(r.jsx)(gt,{label:a.guestNum+" guests",onClose:function(){c((function(e){return Object(j.a)(Object(j.a)({},e),{},{guestNum:0})}))}}),a.childrenNum>0&&Object(r.jsx)(gt,{label:a.childrenNum+" children",onClose:function(){c((function(e){return Object(j.a)(Object(j.a)({},e),{},{childrenNum:0})}))}})]})]}),Object(r.jsx)(f.a,{as:"h3",mb:"5",fontSize:"4xl",fontWeight:"bold",children:"Find place that fits you most..."}),m?Object(r.jsx)(te.a,{color:"green",size:"lg",alignSelf:"center"}):Object(r.jsx)(pt,{rooms:null===O||void 0===O?void 0:O.data})]})},yt=(n(220),n(155)),wt=function(e){return Object(r.jsxs)(me.a,Object(j.a)(Object(j.a)({fontSize:"sm"},e),{},{children:["\xa9 ",(new Date).getFullYear()," Hai, Inc. All rights reserved."]}))},St=function(e){var t="";"fb"===e?t="https://facebook.com":"github"===e?t="https://github.com/haihaibeo":"reddit"===e&&(t="https://reddit.com/user/haihaibeo"),window.open(t,"_blank").focus()},kt=function(e){return Object(r.jsxs)(yt.a,Object(j.a)(Object(j.a)({variant:"ghost",color:"gray.600"},e),{},{children:[Object(r.jsx)(De.a,{as:"a",href:"#","aria-label":"Facebook",onClick:function(){return St("fb")},icon:Object(r.jsx)(Ie.c,{fontSize:"20px"})}),Object(r.jsx)(De.a,{as:"a",href:"#","aria-label":"GitHub",onClick:function(){return St("github")},icon:Object(r.jsx)(Ie.d,{fontSize:"20px"})}),Object(r.jsx)(De.a,{as:"a",href:"#","aria-label":"Reddit",onClick:function(){return St("reddit")},icon:Object(r.jsx)(Ie.h,{fontSize:"20px"})})]}))},Ct=function(e){e.children;var t=Object(u.a)(e,["children"]);return Object(r.jsx)(f.a,Object(j.a)(Object(j.a)({as:"footer",role:"contentinfo",py:"12"},t),{},{children:Object(r.jsx)(g.b,{spacing:"10",divider:Object(r.jsx)(g.c,{}),children:Object(r.jsxs)(g.b,{direction:{base:"column-reverse",md:"row"},justifyContent:"space-between",alignItems:"center",children:[Object(r.jsx)(wt,{}),Object(r.jsx)(kt,{})]})})}))},Dt=n(280),It=n(267),zt=n(268),Rt=function(e){var t=o.a.useState(0),n=Object(p.a)(t,2),i=n[0],a=n[1],c=o.a.useState(0),s=Object(p.a)(c,2),l=s[0],d=s[1],u=o.a.useState(),b=Object(p.a)(u,2),h=b[0],O=b[1],m=Object(ae.e)("red","yellow"),x=Object(se.a)(),g=e.onClose,v=Object(Be.a)(L,{onSuccess:function(e){console.log(e.data),x({description:"Successfully sent review",status:"success"})},onError:function(e){console.log(e)}});return Object(r.jsxs)(ke.a,Object(j.a)(Object(j.a)({},e),{},{onClose:function(){d(0),g()},children:[Object(r.jsx)(ke.f,{}),Object(r.jsxs)(ke.d,{children:[Object(r.jsx)(ke.e,{children:"Write a review"}),Object(r.jsx)(ke.b,{children:Object(r.jsxs)(Z.a,{flexDir:"column",gridGap:"2",children:[Object(r.jsx)(f.a,{children:Array(5).fill(5).map((function(e,t){return Object(r.jsx)(De.a,{variant:"ghost","aria-label":"star",onClick:function(){d(t+1)},_focus:{borderWidth:"1px"},borderRadius:"full",onMouseOver:function(){return a(t+1)},onMouseLeave:function(){return a(0)},icon:i>t||l>t?Object(r.jsx)(ce.n,{color:m}):Object(r.jsx)(ce.m,{})},t)}))}),Object(r.jsx)(It.a,{size:"md",placeholder:"Please describe some of your thoughts",value:h,onChange:function(e){return O(e.target.value)}}),Object(r.jsx)(re.a,{ml:"auto",isDisabled:l<=0,onClick:function(){v.mutate({propertyId:e.propId,starCount:l,reviewComment:h,reservationId:e.reservationId})},children:"Send"})]})})]})]}))},Pt=function(e){var t,n=Object(ye.a)(),i=o.a.useContext(He),a=Object(se.a)(),c=o.a.useState(""),s=Object(p.a)(c,2),l=s[0],d=s[1],u=Object(C.a)(["reservations",null===(t=i.user)||void 0===t?void 0:t.token],M,{onSuccess:function(e){},retry:2}),b=u.data,h=(u.error,u.isError),m=Object(Be.a)(_,{onSuccess:function(){a({description:"Reservation is canceled",status:"success"})},onError:function(e){a({description:e.errors,status:"success"})}});return 0===(null===b||void 0===b?void 0:b.data.length)?Object(r.jsx)(f.a,{children:"You don't have any reservations"}):h?Object(r.jsx)(f.a,{children:"Something's wrong"}):Object(r.jsx)(f.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(r.jsxs)(Z.a,{gridGap:"2",flexDir:"column",children:[Object(r.jsx)(f.a,{as:"h1",fontFamily:"heading",fontWeight:"bold",fontSize:"4xl",mb:"3",children:"Your reservations"}),null===b||void 0===b?void 0:b.data.map((function(e){return Object(r.jsx)(f.a,{borderWidth:"1px",p:"2",style:{transition:"ease 0.3s"},_hover:{transform:"scale(1.02)"},bg:Object(ae.e)("gray.100","gray.800"),borderRadius:"10px",children:Object(r.jsxs)(Z.a,{w:"100%",flexDir:"row",gridGap:"2",children:[Object(r.jsx)(g.b,{w:"100%",gridGap:"2",children:Object(r.jsx)(zt.b,{h:"100%",children:Object(r.jsxs)(Xe.a,{h:"100%",fontWeight:"bold",gridTemplateColumns:{base:"1fr",md:"1fr 1fr"},templateRows:"auto",gridGap:"2",children:[Object(r.jsx)(zt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"From Date: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.fromDate}),Object(r.jsx)(zt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"To Date: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.toDate}),Object(r.jsx)(zt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"Total Cost: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.total}),Object(r.jsx)(zt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"Reserved from: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.createdAt}),Object(r.jsx)(zt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"Reservations Status: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.reservationStatus}),Object(r.jsx)(zt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"Payment Status: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.paymentStatus}),Object(r.jsx)(re.a,{colorScheme:"green",onClick:function(){d(e.property.id),n.onOpen()},children:"Write a review"}),Object(r.jsx)(re.a,{colorScheme:"red",isDisabled:"on reserved"!==e.reservationStatus.toLowerCase(),onClick:function(){var t;t=e.id,m.mutate(t)},children:"Cancel reservation"})]})})}),Object(r.jsx)(f.a,{ml:"auto",children:Object(r.jsx)(O.a,{orientation:"vertical",borderColor:"currentcolor"})}),Object(r.jsx)(mt,{room:e.property,isSaved:!0,flex:"0 0 15em",borderWidth:"0px"})]},e.id)})})),Object(r.jsx)(Rt,{isOpen:n.isOpen,isCentered:!0,onClose:n.onClose,reservationId:"",propId:l})]})}))},Tt=function(){var e=Object(C.a)("propertiesLiked",(function(){return W.get(T+"/api/properties/saved")}),{onSuccess:function(e){},refetchOnMount:"always"}).data;return 0===(null===e||void 0===e?void 0:e.data.length)?Object(r.jsx)(f.a,{children:"Looks like you didn't save any room"}):Object(r.jsxs)(f.a,{children:[Object(r.jsx)(f.a,{as:"h1",fontFamily:"heading",fontWeight:"bold",fontSize:"4xl",mb:"3",children:"Rooms that you saved"}),Object(r.jsx)(ft.a,{spacing:"4",columns:{base:1,lg:2},children:null===e||void 0===e?void 0:e.data.map((function(e){return Object(r.jsx)(mt,{room:e,isSaved:!0},e.id)}))})]})},Wt=function(){return Object(r.jsx)(f.a,{children:"Notification"})},Ft=function(){var e,t=o.a.useContext(He).user,n=null===(e=new URLSearchParams(Object(x.h)().search).get("view"))||void 0===e?void 0:e.toLowerCase();return Object(r.jsxs)(f.a,{d:"flex",flexDir:{base:"column",md:"row"},children:[Object(r.jsx)(f.a,{w:{base:"100%",md:"25%"},minW:"300px",children:Object(r.jsxs)(f.a,{d:"flex",overflow:"hidden",borderWidth:"1px",borderRadius:"lg",p:"4",flexDir:{base:"row-reverse",md:"column"},spacing:"2",children:[Object(r.jsxs)(g.d,{alignSelf:"center",justifySelf:"start",children:[Object(r.jsx)(Qe.a,{name:null===t||void 0===t?void 0:t.name,boxSize:{base:"20",md:"40"}}),Object(r.jsx)(re.a,{variant:"link",my:"2",fontSize:"sm",children:"Update photo"})]}),Object(r.jsxs)(g.d,{alignItems:"start",spacing:"2",children:[Object(r.jsx)(tt.a,{as:Ie.j,boxSize:"8"}),Object(r.jsx)(f.a,{as:"h4",fontWeight:"bold",fontSize:"lg",fontFamily:"mono",children:"Identity verification"}),Object(r.jsx)(f.a,{as:"h4",children:"Show others you\u2019re really you with the identity verification badge."}),Object(r.jsx)(O.a,{}),Object(r.jsx)(f.a,{as:"h4",fontWeight:"bold",fontSize:"lg",fontFamily:"mono",children:(null===t||void 0===t?void 0:t.name)+" confirmed"}),Object(r.jsxs)(f.a,{d:"flex",flexDir:"row",alignItems:"baseline",children:[Object(r.jsx)(Ie.b,{}),Object(r.jsx)(f.a,{as:"h4",ml:"4",children:"Email confirmed"})]}),Object(r.jsxs)(f.a,{d:"flex",flexDir:"row",alignItems:"baseline",children:[Object(r.jsx)(Ie.b,{}),Object(r.jsx)(f.a,{as:"h4",ml:"4",children:"Phone confirmed"})]})]})]})}),Object(r.jsx)(ge.a,{minW:"2"}),Object(r.jsxs)(f.a,{w:{base:"100%",md:"65%"},children:[("likes"===n||null==n)&&Object(r.jsx)(Tt,{}),"notifications"===n&&Object(r.jsx)(Wt,{}),"reservations"===n&&Object(r.jsx)(Pt,{})]})]})},Lt=n(283),Nt=n(279),Et=n(271),At=n(269),qt=function(e){return Object(r.jsxs)(Me.a,{display:"flex",alignItems:"center",justifyContent:"space-between",pr:"2",children:[Object(r.jsx)(Ye.a,{htmlFor:"service_"+e.name,mb:"0",opacity:e.isOn?1:.4,children:e.name}),Object(r.jsx)(Et.a,Object(j.a)(Object(j.a)({id:"service_"+e.name,isChecked:e.isOn},e),{},{onChange:function(t){e.toggle(t.target.checked)}}))]})},Gt=function(e){var t=Object.assign({},e),n=Object(se.a)(),i=o.a.useState(),a=Object(p.a)(i,2),c=a[0],s=a[1],l=o.a.useState({cityId:"1",countryId:"",description:"Test description",images:[{url:"https://picsum.photos/1100/1000?random=1",alt:"alt",deleteHash:"delHash"},{url:"https://picsum.photos/1100/1000?random=2",alt:"alt",deleteHash:"delHash"},{url:"https://picsum.photos/1100/1000?random=3",alt:"alt",deleteHash:"delHash"}],maxGuest:0,propTypeId:"",introdution:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto minus ad assumenda dignissimos. Perferendis optio est nam accusamus aliquid voluptas?",name:"Lorem ipsum",refundPercent:100,number:"12",streetName:"Street asdfgg",services:{breakfast:!0,kitchen:!1,parking:!0,pet:!1,wifi:!0},basePrice:250,cleaningFee:10,serviceFee:0}),u=Object(p.a)(l,2),b=u[0],h=u[1];o.a.useEffect((function(){console.log(b.cityId)}),[b]);var x=Object(C.a)("cities",B,{staleTime:6e5,onSuccess:function(e){console.log(e),s(function(e){var t,n=[],r=new Set,i=Object(d.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.has(a.countryId)||n.push({id:a.countryId,countryName:a.countryName}),r.add(a.countryId)}}catch(c){i.e(c)}finally{i.f()}return console.log(n),n}(e))}}),y=x.data,w=(x.isLoading,x.status,Object(C.a)("propertypeList",H,{staleTime:6e5})),S=w.data,k=(w.isError,Object(Be.a)(N,{onSuccess:function(e){n({description:e.data,status:"success"})},onError:function(e){console.log(e),n({description:"Something's wrong",status:"error"})}}));o.a.useEffect((function(){return function(){localStorage.removeItem("previewRoom")}}),[]);var D=function(e){if(null!=e.target.files){var t=Array.from(e.target.files),n=new FormData;n.append("image",t[0]),(i=n,F({method:"post",url:"https://api.imgur.com/3/upload",data:i,headers:{"Content-Type":"multipart/form-data"}})).then((function(e){return e.data})).catch((function(e){return console.log(e)})),(r="",W({method:"DELETE",url:"https://api.imgur.com/3/image/".concat(r)})).then((function(e){return console.log(e.data)}))}var r,i};return Object(r.jsx)(Fe.a.form,{children:Object(r.jsx)(f.a,Object(j.a)(Object(j.a)({d:"flex",flexDir:"column",mt:"10"},t),{},{children:Object(r.jsxs)(g.d,{spacing:"8",w:"75%",alignSelf:"center",children:[Object(r.jsx)(f.a,{as:"h1",fontSize:"3xl",fontWeight:"bold",alignSelf:"start",children:"Publish your new property"}),Object(r.jsx)(O.a,{borderColor:"currentcolor"}),Object(r.jsxs)(f.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(f.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Property info"}),Object(r.jsxs)(g.d,{alignItems:"start",w:"100%",children:[Object(r.jsxs)(Me.a,{isRequired:!0,id:"prop-name",children:[Object(r.jsx)(Ye.a,{as:"h2",fontSize:"md",children:"Property Name"}),Object(r.jsx)(ee.a,{variant:"filled",required:!0,value:b.name,onChange:function(e){return h((function(t){return Object(j.a)(Object(j.a)({},t),{},{name:e.target.value})}))}})]}),Object(r.jsxs)(Me.a,{isRequired:!0,id:"prop-type",children:[Object(r.jsx)(Ye.a,{as:"h2",fontSize:"md",children:"Property's Type"}),Object(r.jsx)(At.a,{variant:"filled",placeholder:"--Choose your property type--",onChange:function(e){return h((function(t){return Object(j.a)(Object(j.a)({},t),{},{propTypeId:e.target.value,cityId:""})}))},children:null===S||void 0===S?void 0:S.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.propertyType},e.id)}))})]}),Object(r.jsxs)(Me.a,{isRequired:!0,id:"prop-description",children:[Object(r.jsx)(Ye.a,{as:"h2",fontSize:"md",children:"Description"}),Object(r.jsx)(ee.a,{variant:"filled",required:!0,value:b.description,onChange:function(e){return h((function(t){return Object(j.a)(Object(j.a)({},t),{},{description:e.target.value})}))}})]}),Object(r.jsxs)(Me.a,{isRequired:!0,id:"prop-introduction",children:[Object(r.jsx)(Ye.a,{as:"h2",fontSize:"md",children:"Introduction"}),Object(r.jsx)(It.a,{rows:4,required:!0,variant:"filled",value:b.introdution,onChange:function(e){return h((function(t){return Object(j.a)(Object(j.a)({},t),{},{introdution:e.target.value})}))}})]})]})]}),Object(r.jsx)(O.a,{borderColor:"currentcolor"}),Object(r.jsxs)(f.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(f.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Location info"}),Object(r.jsxs)(g.d,{alignItems:"start",w:"100%",children:[Object(r.jsxs)(Me.a,{isRequired:!0,id:"prop-country",children:[Object(r.jsx)(Ye.a,{as:"h2",fontSize:"md",children:"Country"}),Object(r.jsx)(At.a,{variant:"filled",placeholder:"--Choose your country--",onChange:function(e){return h((function(t){return Object(j.a)(Object(j.a)({},t),{},{countryId:e.target.value,cityId:""})}))},children:null===c||void 0===c?void 0:c.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.countryName},e.countryName)}))})]}),Object(r.jsxs)(Me.a,{isRequired:!0,id:"prop-city",children:[Object(r.jsx)(Ye.a,{as:"h2",fontSize:"md",children:"City"}),Object(r.jsx)(At.a,{variant:"filled",placeholder:"--Choose your city--",onChange:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{cityId:e.target.value})}))},children:null===y||void 0===y?void 0:y.filter((function(e){return e.countryId===b.countryId})).map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.cityName},e.id)}))})]}),Object(r.jsxs)(Z.a,{gridGap:"2",w:"100%",flexDir:{base:"column",lg:"row"},children:[Object(r.jsxs)(Me.a,{isRequired:!0,id:"prop-street",flex:"0 1 60%",children:[Object(r.jsx)(Ye.a,{as:"h2",fontSize:"md",children:"Street Name"}),Object(r.jsx)(ee.a,{required:!0,variant:"filled",value:b.streetName,onChange:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{streetName:e.target.value})}))}})]}),Object(r.jsxs)(Me.a,{isRequired:!0,id:"prop-number",flex:"0 1 40%",children:[Object(r.jsx)(Ye.a,{as:"h2",fontSize:"md",children:"Property's number"}),Object(r.jsx)(ee.a,{required:!0,variant:"filled",value:b.number,onChange:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{number:e.target.value})}))}})]})]}),Object(r.jsxs)(Me.a,{id:"prop-add-note",children:[Object(r.jsxs)(Ye.a,{as:"h2",fontSize:"md",children:["Notes to client",Object(r.jsx)(f.a,{as:"span",fontStyle:"oblique",fontWeight:"light",children:"(optional)"})]}),Object(r.jsx)(ee.a,{variant:"filled",value:b.addressDesc,onChange:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{addressDesc:e.target.value})}))}})]})]})]}),Object(r.jsx)(O.a,{borderColor:"currentcolor"}),Object(r.jsxs)(f.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",justifyContent:"space-between",children:[Object(r.jsxs)(f.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",flexWrap:"wrap",children:[Object(r.jsx)(f.a,{children:"Images"}),Object(r.jsx)(f.a,{as:"span",fontStyle:"oblique",fontWeight:"light",children:" (At least 5 images)"})]}),Object(r.jsx)(ee.a,{required:!0,variant:"ghost",type:"file",justifySelf:"flex-end",multiple:!0,accept:"image/*",onChange:function(e){return D(e)}})]}),Object(r.jsx)(O.a,{borderColor:"currentcolor"}),Object(r.jsxs)(f.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(f.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Services"}),Object(r.jsx)(f.a,{w:"100%",children:Object(r.jsxs)(ft.a,{minChildWidth:"12em",spacingX:"5rem",spacingY:"2",children:[Object(r.jsxs)(Z.a,{gridGap:"2",alignItems:"center",children:[Object(r.jsx)(f.a,{as:"h2",fontSize:"md",children:"Max Guests"}),Object(r.jsx)(ge.a,{}),Object(r.jsx)(De.a,{"aria-label":"Minus",size:"sm",icon:Object(r.jsx)(Ie.e,{}),isDisabled:b.maxGuest<=0,onClick:function(){return h((function(e){return Object(j.a)(Object(j.a)({},e),{},{maxGuest:e.maxGuest--})}))}}),Object(r.jsx)(f.a,{as:"h3",fontSize:"md",w:"3ch",textAlign:"center",children:b.maxGuest}),Object(r.jsx)(De.a,{"aria-label":"Plus",size:"sm",icon:Object(r.jsx)(Ie.g,{}),isDisabled:b.maxGuest>=10,onClick:function(){return h((function(e){return Object(j.a)(Object(j.a)({},e),{},{maxGuest:e.maxGuest++})}))}})]}),Object(r.jsx)(qt,{name:"Wifi",isOn:b.services.wifi,toggle:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{services:Object(j.a)(Object(j.a)({},t.services),{},{wifi:e})})}))}}),Object(r.jsx)(qt,{name:"Kitchen",isOn:b.services.kitchen,toggle:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{services:Object(j.a)(Object(j.a)({},t.services),{},{kitchen:e})})}))}}),Object(r.jsx)(qt,{name:"Breakfast",isOn:b.services.breakfast,toggle:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{services:Object(j.a)(Object(j.a)({},t.services),{},{breakfast:e})})}))}}),Object(r.jsx)(qt,{name:"Pet Allow",isOn:b.services.pet,toggle:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{services:Object(j.a)(Object(j.a)({},t.services),{},{pet:e})})}))}}),Object(r.jsx)(qt,{name:"Free Parking",isOn:b.services.parking,toggle:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{services:Object(j.a)(Object(j.a)({},t.services),{},{parking:e})})}))}})]})})]}),Object(r.jsx)(O.a,{borderColor:"currentcolor"}),Object(r.jsxs)(f.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(f.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Pricing ($)"}),Object(r.jsxs)(g.d,{alignItems:"start",w:"100%",children:[Object(r.jsx)(qt,{isOn:100===b.refundPercent,name:"Allow full refund",size:"lg",toggle:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{refundPercent:e?100:80})}))}}),100!==b.refundPercent&&Object(r.jsxs)(f.a,{children:["Amount refund: ",b.refundPercent,"%"]}),Object(r.jsxs)(Lt.a,{value:b.refundPercent,min:0,max:100,step:5,colorScheme:"blue",onChange:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{refundPercent:e})}))},children:[Object(r.jsx)(Lt.d,{children:Object(r.jsx)(Lt.b,{})}),Object(r.jsx)(Lt.c,{boxSize:6})]}),Object(r.jsxs)(Me.a,{isRequired:!0,id:"prop-price-base",isInvalid:0===b.basePrice,children:[Object(r.jsx)(Ye.a,{opacity:0===b.basePrice?.4:1,as:"h2",fontSize:"md",children:"Base price"}),Object(r.jsx)(Nt.a,{value:b.basePrice,onChange:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{basePrice:0|parseInt(e)})}))},children:Object(r.jsx)(Nt.b,{variant:"filled",required:!0})})]}),Object(r.jsxs)(Me.a,{isRequired:!0,id:"prop-price-cleaning",children:[Object(r.jsx)(Ye.a,{opacity:0===b.cleaningFee?.4:1,as:"h2",fontSize:"md",children:"Cleaning fee"}),Object(r.jsx)(Nt.a,{value:b.cleaningFee,onChange:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{cleaningFee:0|parseInt(e)})}))},children:Object(r.jsx)(Nt.b,{variant:"filled",required:!0})})]}),Object(r.jsxs)(Me.a,{isRequired:!0,id:"prop-price-service",children:[Object(r.jsx)(Ye.a,{opacity:0===b.serviceFee?.4:1,as:"h2",fontSize:"md",children:"Service fee"}),Object(r.jsx)(Nt.a,{value:b.serviceFee,onChange:function(e){h((function(t){return Object(j.a)(Object(j.a)({},t),{},{serviceFee:0|parseInt(e)})}))},children:Object(r.jsx)(Nt.b,{variant:"filled",required:!0})})]})]})]}),Object(r.jsxs)(f.a,{children:[Object(r.jsx)(v.a,{as:m.b,to:"/room/preview",_hover:{textStyle:"none"},target:"_blank",onClick:function(){return localStorage.setItem("previewRoom",JSON.stringify(b))},children:Object(r.jsx)(re.a,{variant:"solid",mr:"10",colorScheme:"green",children:"See a preview"})}),Object(r.jsx)(re.a,{variant:"solid",type:"submit",colorScheme:"blue",onClick:function(e){return function(e){e.preventDefault(),k.mutate(b)}(e)},children:"Confirm"})]})]})}))})},Bt=n(159),Ht=function(){var e=o.a.useState(),t=Object(p.a)(e,2),n=t[0],i=t[1];return console.log(n),o.a.useEffect((function(){var e=localStorage.getItem("previewRoom");return console.log(e),e&&i(JSON.parse(e)),function(){localStorage.removeItem("previewRoom")}}),[]),o.a.useEffect((function(){console.log(n)}),[n]),Object(r.jsx)(r.Fragment,{children:"Hello"})},Ut=function(){return Object(r.jsxs)(ut.a,{status:"success",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[Object(r.jsx)(ut.c,{boxSize:"40px",mr:0}),Object(r.jsx)(ut.d,{mt:4,mb:1,fontSize:"lg",children:"Application submitted!"}),Object(r.jsx)(ut.b,{maxWidth:"sm",children:"Thanks for submitting your application. Our team will get back to you soon."})]})},Mt=function(){var e,t,n=Object(c.useContext)(He),i=Object(se.a)(),a=Object(ye.a)(),o=function(){a.onOpen(),W.post(T+"/api/user/register-host").then((function(e){console.log(e),200===e.status&&(localStorage.setItem("token",e.data.token),n.updateToken(e.data.token),i({description:"Congrat! You are eligible as a new host!",status:"success"}))})).catch((function(e){i({description:e,status:"error"})}))};return Object(r.jsxs)(f.a,{d:"flex",flexDir:"column",gridGap:"2",justifyItems:"center",justifyContent:"center",children:[Object(r.jsx)(re.a,{onClick:function(){return o()},colorScheme:"green",w:"30ch",isDisabled:null===(e=n.user)||void 0===e?void 0:e.roles.includes("Owner"),alignSelf:"center",children:(null===(t=n.user)||void 0===t?void 0:t.roles.includes("Owner"))?"You are already a host!":"Register to become a host!"}),Object(r.jsx)($e.a,{in:a.isOpen,children:Object(r.jsx)(Ut,{})})]})},Yt=Object(b.a)({config:{initialColorMode:"dark"},components:{Button:{defaultProps:{}}}}),_t=new Dt.a({defaultOptions:{queries:{}}}),$t=function(){var e=c.useRef(null);return c.useEffect((function(){e.current.complete(),W.interceptors.request.use((function(t){return e.current.staticStart(),t}),(function(t){return e.current.complete(),Promise.reject(t)})),W.interceptors.response.use((function(t){return e.current.complete(),t}),(function(t){return e.current.complete(),Promise.reject(t)}))}),[]),Object(r.jsx)(m.a,{basename:"/",children:Object(r.jsx)(h.a,{theme:Yt,children:Object(r.jsx)(Ge.a,{client:_t,children:Object(r.jsxs)(f.a,{d:"flex",flexDir:"column",minH:"100vh",children:[Object(r.jsxs)(Ue,{children:[Object(r.jsx)(Zt,{}),Object(r.jsxs)(f.a,{flex:"1",children:[Object(r.jsx)(Bt.a,{color:"#f11946",ref:e}),Object(r.jsxs)(x.d,{children:[Object(r.jsx)(x.b,{exact:!0,path:"/",children:Object(r.jsx)(Ze,{})}),Object(r.jsx)(x.b,{component:Vt,exact:!0,path:"/login",render:function(e){var t=e.location;return Object(r.jsx)(x.a,{to:{pathname:"/login",state:{from:t}}})}}),Object(r.jsxs)(f.a,{mx:{base:"10px",md:"50px",lg:"100px"},mt:"5",children:[Object(r.jsx)(Ke,{}),Object(r.jsxs)(x.d,{children:[Object(r.jsx)(x.b,{exact:!0,path:"/rooms/:slug",component:jt}),Object(r.jsx)(x.b,{exact:!0,path:"/rooms",component:vt}),Object(r.jsx)(x.b,{exact:!0,path:"/room/preview",component:Ht}),Object(r.jsx)(Jt,{exact:!0,path:"/profile",component:Ft}),Object(r.jsx)(Kt,{roles:["Owner"],exact:!0,path:"/user/publish",component:Gt}),"roles=",["Owner"],Object(r.jsx)(Jt,{exact:!0,path:"/user/register-host",component:Mt}),Object(r.jsx)(Kt,{roles:["Admin"],exact:!0,path:"/admin"}),Object(r.jsx)(x.b,{component:bt})]})]})]})]})]}),Object(r.jsx)(O.a,{mt:"10"}),Object(r.jsx)(Ct,{mx:{base:"10px",md:"50px",lg:"100px"}})]})})})})},Vt=function(){var e=Object(x.h)(),t=c.useContext(He),n=(e.state||{from:{pathname:"/"}}).from;return t.user?Object(r.jsx)(x.a,{to:n}):Object(r.jsxs)(f.a,{mx:"20%",mt:"10",flex:"0",children:[Object(r.jsx)(Ke,{}),Object(r.jsx)(Je,{isRegistering:!1})]})},Jt=function(e){var t=e.children,n=Object(u.a)(e,["children"]);return c.useContext(He).user?Object(r.jsx)(x.b,Object(j.a)(Object(j.a)({},n),{},{children:t})):Object(r.jsx)(x.b,Object(j.a)(Object(j.a)({},n),{},{children:Object(r.jsx)(x.a,{to:{pathname:"/login",state:{from:n.path}}})}))},Kt=function(e){var t,n=e.roles,i=e.children,a=Object(u.a)(e,["roles","children"]),o=c.useContext(He);if(!o.user)return Object(r.jsx)(x.b,Object(j.a)(Object(j.a)({},a),{},{children:Object(r.jsx)(x.a,{to:{pathname:"/login",state:{from:a.path}}})}));return function(e,t){if(!e)return!1;if(!t)return!0;var n,r=Object(d.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!e.includes(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(null===(t=o.user)||void 0===t?void 0:t.roles,n)?Object(r.jsx)(x.b,Object(j.a)(Object(j.a)({},a),{},{children:i})):Object(r.jsx)(x.b,Object(j.a)(Object(j.a)({},a),{},{children:Object(r.jsx)(x.a,{to:{pathname:"/error",state:{message:"You are not authorized"}}})}))},Zt=function(){var e=Object(x.h)().pathname;return c.useEffect((function(){window.scrollTo(0,0)}),[e]),null};l.a.render(Object(r.jsxs)(c.StrictMode,{children:[Object(r.jsx)(i.a,{initialColorMode:a.theme.config.initialColorMode}),Object(r.jsx)($t,{})]}),document.getElementById("root"))}},[[221,1,2]]]);
//# sourceMappingURL=main.8ac564a9.chunk.js.map