{"version":3,"sources":["API.ts","Components/HomeComponents/PropertyTypeList.tsx","Components/NavComponents/PickRangeDay.tsx","Components/NavComponents/PopDetail.tsx","Components/NavComponents/SearchBar.tsx","Images/HomeBG.webp","ColorModeSwitcher.tsx","logo.svg","Logo.tsx","Contexts/AuthContext.tsx","Components/LoginForm.tsx","Components/NavComponents/Navbar.tsx","Pages/HomePage.tsx","Components/FloatingForm.tsx","Components/SingleRoomComponents/MyRoomBadge.tsx","Components/AlertDialog.tsx","Pages/SingleRoom.tsx","Pages/ErrorPage.tsx","Components/FilterComponents/RoomCard.tsx","Components/FilterComponents/RoomCardList.tsx","Pages/RoomsPage.tsx","Components/NavComponents/Footer.tsx","Pages/ProfilePage.tsx","Pages/PublishRoomPage.tsx","Pages/PreviewRoomPage.tsx","Pages/RegisterHostPage.tsx","Pages/OwnerListProperty.tsx","Pages/VerificationPage.tsx","App.tsx","index.tsx"],"names":["API_URL","axAuth","axios","create","axImageUpload","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","response","error","status","Promise","reject","postReview","data","url","method","postRoom","postReservation","bookInfo","JSON","stringify","roomId","bookFromDate","bookToDate","guest","children","authenticate","req","post","email","password","register","confirmPassword","fetchPropertiesView","typeId","query","a","console","log","get","params","city","from","to","guestNum","childrenNum","fetchCities","fetch","res","json","fetchPropertyTypes","fetchPropertyById","id","fetchOwnerProperty","fetchPropertiesByPropStatusId","statusId","fetchUserReservation","fetchReviewsForProperty","propId","propertyId","fetchServices","deleteReservation","resId","delete","toggleCloseProperty","put","validateProperty","rejectProperty","useQueryParam","URLSearchParams","useLocation","search","toggleLike","settings","dots","infinite","speed","slidesToShow","slidesToScroll","initialSlide","swipeToSlide","responsive","breakpoint","PropertyType","type","history","useHistory","alignItems","p","onClick","push","pathname","state","hasArrow","placement","aria-label","label","description","openDelay","maxW","maxH","minH","width","height","src","thumbnailImg","objectFit","mt","fontWeight","as","lineHeight","isTruncated","propertyType","color","fontSize","count","PropertyTypeList","useQuery","staleTime","isError","isFetching","map","d","key","getDatesBetween","Date","now","fromDate","toDate","datesBtw","start","setDate","getDate","getDateCheckOutOnly","schedules","reservedDates","r","getNextPossibleDate","day","nextDay","undefined","forEach","rFrom","defaultDate","enteredTo","PickRangeDay","props","updateDate","boxProps","toast","useToast","React","useState","setState","disabled","before","disabledDates","i","length","dayOff","getDisabledDates","disabledDays","setDisabledDays","useEffect","isSelectingFirstDay","isBeforeFirstDay","DateUtils","isDayBefore","handleResetClick","selected","modifiers","end","checkoutOnly","useMediaQuery","enoughFor2MonthsDisplay","flexDir","overflow","alignSelf","numberOfMonths","fromMonth","onDayClick","today","duration","s","after","onDayMouseEnter","selectedDays","justifyContent","toLocaleDateString","PopDetail","updatePeople","maxGuest","style","backdropFilter","align","spacing","mr","border","borderColor","variant","borderRadius","mx","isDisabled","SearchBar","cities","isLoading","form","updateSearch","display","lg","pointerEvents","list","placeholder","size","onChange","e","target","value","c","cityName","closeOnBlur","w","_focusVisible","px","flexWrap","bgColor","useColorModeValue","bg","adult","minW","ml","onClickSearch","ColorModeSwitcher","toggleColorMode","useColorMode","text","SwitchIcon","FaMoon","FaSun","marginLeft","icon","spin","keyframes","Logo","forwardRef","ref","animation","usePrefersReducedMotion","img","boxSize","logo","AuthContext","createContext","AuthProvider","setIsLoading","user","setUser","setToken","tokenStorage","validateToken","then","logoutAsync","loginAsync","decodedUser","jwtDecode","name","roles","userId","mutateLogin","useMutation","onSuccess","setItem","onError","message","onSettled","mutateRegister","messages","msg","resolve","setTimeout","removeItem","title","isClosable","mutate","registerAsync","Provider","updateToken","LoginForm","initRef","fromUrl","isRegistering","remember","loginForm","setLoginForm","emailError","setEmailError","passwordError","setPasswordError","confirmPasswordError","setConfirmPasswordError","test","validateEmail","confirmedPassword","authContext","useContext","isInvalid","htmlFor","isRequired","trim","my","minLength","in","checked","rounded","replace","textStyle","Navbar","auth","loginFormModal","useDisclosure","useRef","setIsRegistering","becomehostColor","marginBottom","base","sm","onOpen","isOpen","onClose","motionPreset","isCentered","initialFocusRef","pb","includes","Button","rightIcon","RouterLink","HomePage","setSearch","background","BG","pt","fontFamily","textShadow","mb","ReactLink","FloatingForm","room","feeCollapse","nightCount","setNightCount","checkPricing","fetchPricing","reservMutation","err","handleCheckout","price","toDateString","alignContent","formattedPrice","fontStyle","Array","fill","_","Math","round","totalStar","totalReview","colorRendering","borderTopLeftRadius","borderTopRightRadius","daysOff","borderBottomRadius","colorScheme","ownerInfo","textDecoration","pricePerNight","cleaningFee","serviceFee","discountPercent","discount","totalCost","defaultRoomBadges","MyRoomBadge","setIcon","badge","setBadge","foundBadge","find","b","RiUserStarLine","RiStarLine","m","ActionAlert","action","headerMessage","leastDestructiveRef","alertDialogProps","queryClient","useQueryClient","closePropMutation","rs","removeQueries","ReviewDisplay","fetchReviews","retry","reviews","starCount","gridGap","toPrecision","review","reviewId","ReviewComment","flex","profileImageUrl","timeUpdated","comment","badges","SingleRoom","initRoom","setBookInfo","didLike","setDidLike","slug","useParams","alertDeleteDialog","cancelRef","liked","bi","likeMutation","location","justifyItems","handleLocationOnClick","propertyStatus","leftIcon","gap","h","templateRows","templateColumns","images","slice","image","colSpan","rowSpan","loading","boxShadow","top","float","position","zIndex","borderWidth","services","letterSpacing","textTransform","serviceName","cursor","alert","introduction","ErrorPage","flexDirection","textAlign","maxWidth","RoomCard","isSaved","LinkReact","thumbnailUrl","fit","fallback","alt","thumbnailAlt","transition","_hover","transform","textOverflow","substring","justifySelf","RoomCardList","rooms","sgProps","columns","index","QueryTag","tagProps","RoomsPage","searchBoxColor","setType","queryKeys","refetch","remove","Copyright","getFullYear","openSocio","window","open","focus","SocialMediaLinks","href","Footer","role","py","divider","direction","md","ReviewModal","modalProps","starHover","setStarHover","starReview","setStarReview","setComment","starColor","mutateReview","_focus","onMouseOver","onMouseLeave","reviewComment","reservationId","Reservations","boxprops","reviewModal","propIdReview","setPropIdReview","deleteRsvMutate","errors","gridTemplateColumns","total","createdAt","reservationStatus","paymentStatus","property","toLowerCase","orientation","UserLikesProperties","refetchOnMount","Notifications","ProfilePage","view","FaUserShield","getUniqeCountries","countries","indexes","Set","has","countryId","countryName","add","ServiceDisplay","pr","opacity","isOn","isChecked","toggle","PublishRoomPage","isEditting","queryParams","setQueryParams","ctr","setCountries","resCities","resTypes","serviceQuery","editingProp","editing","setRoom","basePrice","introdution","refetchOnReconnect","refetchOnWindowFocus","toLocaleLowerCase","cityId","deleteHash","propTypeId","refundPercent","number","streetName","serviceIdList","publish","handleImagesInput","files","formData","FormData","append","catch","delHash","required","rt","rows","filter","ct","addressDesc","multiple","accept","backfaceVisibility","left","imgs","handleDeleteImage","minChildWidth","spacingX","spacingY","serviceId","newIdList","min","max","step","percent","parseInt","preventDefault","handlePublish","PreviewRoomPage","parse","SuccessAlert","RegisterHostPage","handleRegisterClick","OwnerListProperty","NotActiveRoom","reload","validateMutation","mutationKey","rejectMutation","isSuccess","VerificationPage","propStatusId","roomQry","myTheme","extendTheme","initialColorMode","components","defaultProps","QueryClient","defaultOptions","queries","App","loadingRef","current","complete","staticStart","reponse","basename","theme","QueryClientProvider","client","exact","path","component","LoginPage","render","AuthRoute","rest","RoleRoute","haystack","needles","n","ifContainsAll","ScrollToTop","scrollTo","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.292afb68.chunk.js","sourcesContent":["import axios, { AxiosResponse } from \"axios\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\n// export const API_URL = \"http://localhost:44344\";\r\nexport const API_URL = process.env.NODE_ENV === \"development\" ? \"http://localhost:44344\" : \"https://nicehostel.herokuapp.com\";\r\nconst API_IMAGE_UPLOADER_URL = \"https://api.imgur.com/3/upload\";\r\nconst API_IMAGE_CLIENT_ID = \"30ca2ca5dd1f71d\";\r\n// const API_IMAGE_CLIENT_SECRET = \"5e497c2ba20ff36c20aa512366ddee25300c56e1\";\r\n\r\nexport const axAuth = axios.create();\r\nexport const axImageUpload = axios.create();\r\n\r\naxAuth.interceptors.request.use((config) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n\r\n    return config;\r\n})\r\n\r\naxAuth.interceptors.response.use((response) => {\r\n    return response;\r\n}, function (error) {\r\n    if(error.response.status === 403){\r\n        \r\n    }\r\n    // if (error.response.status === 401) {\r\n    //     console.log('unauthorized');\r\n    //     localStorage.removeItem(\"token\");\r\n    // }\r\n    // if (error.response.status === 403){\r\n    //     console.log(\"Forbidden\");\r\n    // }\r\n    // else if(error.response.status === 404){\r\n    //     return Promise.reject(\"Connection error\")\r\n    // }\r\n    return Promise.reject(error.response);\r\n});\r\n\r\n// axios.interceptors.request.use((req) => {\r\n//     req.headers.Authorization = `Client-ID : ${API_IMAGE_CLIENT_ID}`\r\n//     return req;\r\n// })\r\n\r\ntype ReviewRequest = {\r\n    comment?: string;\r\n    reviewStar: number;\r\n    \r\n}\r\nexport const postReview = (data: PostReviewRequest) => {\r\n    return axAuth({\r\n        url: API_URL + \"/api/reviews/\",\r\n        method: \"POST\",\r\n        data: data,\r\n    })\r\n}\r\n\r\nexport const postRoom = (data: PublishRoomState) => {\r\n    return axAuth({\r\n        method: \"POST\",\r\n        url: API_URL + \"/api/properties/\",\r\n        data: data,\r\n    })\r\n}\r\n\r\nexport const postImage = (data : any) => axImageUpload({\r\n    method: \"post\",\r\n    url: API_IMAGE_UPLOADER_URL,\r\n    data: data,\r\n    headers: {\r\n        'Content-Type' : 'multipart/form-data',\r\n    },\r\n})\r\n\r\nexport const postReservation = (bookInfo: BookingInfo) => axAuth({\r\n    url: API_URL + \"/api/reservations\",\r\n    method: \"POST\",\r\n    data: JSON.stringify({\r\n        \"propertyId\": bookInfo.roomId,\r\n        \"fromDate\" : bookInfo.bookFromDate,\r\n        \"toDate\" : bookInfo.bookToDate,\r\n        \"adultNum\": bookInfo.guest,\r\n        \"childrenNum\" : bookInfo.children\r\n    }),        \r\n    headers: {\r\n        'Content-Type': \"application/json\"\r\n    }\r\n});\r\n\r\nexport const deleteImage = (delHash: string) => axAuth({\r\n    method: \"DELETE\",\r\n    url: `https://api.imgur.com/3/image/${delHash}`,\r\n})\r\n\r\nexport const authenticate = (req: LoginRequest) => {\r\n    return axAuth.post<UserResponse>(API_URL + \"/api/user/authenticate\", {\r\n            \"email\": req.email,\r\n            \"password\": req.password\r\n        });\r\n}\r\n\r\nexport const registerHost = () => axAuth.post<UserResponse>(API_URL + \"/api/user/register-host\");\r\n\r\nexport const register = (req: RegisterRequest) =>{\r\n    return axios.post<UserResponse>(API_URL + \"/api/user/register-user\", {\r\n        \"email\": req.email,\r\n        \"password\": req.password,\r\n        \"confirmPassword\": req.confirmPassword\r\n    })\r\n}\r\n\r\nexport const fetchPropertiesView = async (typeId: string | undefined, query: SearchQuery) => {\r\n    let URI = `/api/properties`;\r\n    console.log(query);\r\n    return axios.get<RoomCard[]>(API_URL + URI,{\r\n        params: {\r\n            typeId : typeId,\r\n            city: query.city,\r\n            from: query.from,\r\n            to: query.to,\r\n            guestNum : query.guestNum,\r\n            childrenNum: query.childrenNum,\r\n        }\r\n    });\r\n}\r\n\r\nexport const fetchCities = async () => {\r\n    // const res = await ax({\r\n    //     method: \"GET\",\r\n    //     url: URL + \"api/city\",\r\n    //     timeout: 5000\r\n    // });\r\n    // return res;\r\n    const res = await fetch(API_URL + \"/api/cities\");\r\n    const data = res.json();\r\n    return data;\r\n}\r\n\r\nexport const fetchPropertyTypes = async () => {\r\n    const res = await fetch(API_URL + \"/api/propertytypes\");\r\n    const data: PropertyTypeType[] = await res.json();\r\n    return data;\r\n}\r\n\r\nexport const fetchPropertyById = async (id: string) => {\r\n    return axAuth.get<Room>(API_URL + \"/api/properties/\" + id);\r\n}\r\n\r\nexport const fetchPropertiesSaved = () => {\r\n    return axAuth.get<RoomCard[]>(API_URL + \"/api/properties/saved\");\r\n}\r\n\r\nexport const fetchOwnerProperty = async () => axAuth.get<RoomCard[]>(API_URL + \"/api/properties/host\");\r\n\r\nexport const fetchOwnerByPropId = async (propId: string) => axAuth.get<UserInfo>(API_URL + \"/api/user/propId/\" + propId);\r\n\r\nexport const fetchPropertiesByPropStatusId = async (statusId?: string) => {\r\n    return axAuth.get<Room[]>(API_URL + \"/api/properties/not-active\", {\r\n        params: statusId && statusId\r\n    });\r\n} \r\n\r\nexport const fetchUserReservation = async () => {\r\n    return axAuth.get<ReservationResponse[]>(API_URL + \"/api/reservations/user\");\r\n}\r\n\r\nexport const fetchPricing = (bookInfo: BookingInfo) => {\r\n    console.log(bookInfo);\r\n    return axios.get<CheckPricingResponse>(API_URL + \"/api/reservations/check-pricing\",{\r\n        params: {\r\n            fromDate: bookInfo.bookFromDate,\r\n            toDate: bookInfo.bookToDate,\r\n            propertyId: bookInfo.roomId,\r\n            guestNum: bookInfo.guest,\r\n            childrenNum: bookInfo.children\r\n        }\r\n    })\r\n}\r\n\r\nexport const fetchReviewsForProperty = async (propId?: string) => {\r\n    return axAuth.get<Review[]>(API_URL + `/api/reviews`, {\r\n        params: {\r\n            propertyId: propId,\r\n        }\r\n    });\r\n}\r\n\r\nexport const fetchServices = async () => axAuth.get<Service[]>(API_URL + \"/api/properties/services\");\r\n\r\n\r\nexport const deleteReservation = async (resId: string) => {\r\n    return axAuth.delete(API_URL + \"/api/reservations/\" + resId);\r\n}\r\n\r\nexport const toggleCloseProperty = async (propId: string) => {\r\n    return axAuth.put(API_URL + \"/api/properties/toggle-close/\" + propId);\r\n}\r\n\r\nexport const validateProperty = async (propId: string) => {\r\n    return axAuth.put(API_URL + \"/api/properties/validate/\" + propId);\r\n}\r\n\r\nexport const rejectProperty = async (propId: string) => {\r\n    return axAuth.put(API_URL + \"/api/properties/reject/\" + propId);\r\n}\r\n\r\nexport const useQueryParam = () => {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\n\r\ninterface ToggleLikeProps {\r\n    roomId: string,\r\n    token: string,\r\n}\r\n\r\ntype ToggleLikeResponse = {\r\n    liked: boolean\r\n}\r\n\r\nexport const toggleLike = ({roomId, token}: ToggleLikeProps) => {\r\n    return axAuth.post<ToggleLikeResponse>(`${API_URL}/api/likes/${roomId}`,{},{\r\n        headers:{\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    });\r\n}\r\n\r\nexport const validateToken = (token: string) => {\r\n    return fetch(`${API_URL}/api/user/validate-token`, {\r\n        headers: {\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n}","import { Box, Flex, Grid, Link as ChakraLink, Spacer, VStack, Image, Tooltip, Button } from '@chakra-ui/react';\r\nimport React from 'react';\r\nimport { Link, useHistory } from \"react-router-dom\"\r\nimport Slider, { Settings } from 'react-slick';\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport { isError, useQuery } from 'react-query';\r\nimport { fetchPropertyTypes } from '../../API';\r\n\r\nvar settings: Settings = {\r\n    dots: true,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: 4,\r\n    slidesToScroll: 1,\r\n    initialSlide: 0,\r\n    swipeToSlide: true,\r\n    responsive: [\r\n        {\r\n            breakpoint: 1024,\r\n            settings: {\r\n                slidesToShow: 4,\r\n                slidesToScroll: 1,\r\n                infinite: true,\r\n                dots: true\r\n            }\r\n        },\r\n        {\r\n            breakpoint: 600,\r\n            settings: {\r\n                slidesToShow: 3,\r\n                slidesToScroll: 1,\r\n                initialSlide: 2\r\n            }\r\n        },\r\n        {\r\n            breakpoint: 480,\r\n            settings: {\r\n                slidesToShow: 1,\r\n                slidesToScroll: 1\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\nconst PropertyTypeList = () => {\r\n    const { data, isError, isFetching } = useQuery<unknown, unknown, PropertyTypeType[]>(\"propertypeList\", fetchPropertyTypes, {\r\n        staleTime: 1000 * 60 * 10\r\n    });\r\n\r\n    if (isFetching) console.log(\"refetching prop\")\r\n\r\n    if (isError) return <Box>Something's wrong</Box>\r\n    return (\r\n        <div>\r\n            <Slider {...settings}>\r\n                {data?.map((d, key) => <PropertyType type={d} key={key} />)}\r\n            </Slider>\r\n        </div>\r\n    )\r\n}\r\n\r\ntype PropertyTypeProps = {\r\n    type: PropertyTypeType;\r\n}\r\n\r\n\r\n\r\nconst PropertyType: React.FC<PropertyTypeProps> = ({ type, children }) => {\r\n    const history = useHistory();\r\n\r\n    const handlePropTypeClick = () => {\r\n        history.push({\r\n            pathname: \"/rooms\",\r\n            state: {\r\n                type: type\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <VStack alignItems=\"start\" p=\"4\">\r\n            <ChakraLink onClick={handlePropTypeClick}>\r\n                <Tooltip hasArrow placement=\"top\" aria-label={\"tooltips\"} label={type.description} openDelay={500}>\r\n                    <Box>\r\n                        <Box maxW=\"sm\" maxH=\"sm\" minH=\"100px\">\r\n                            <Image width=\"inherit\" height=\"inherit\" src={type.thumbnailImg} objectFit=\"cover\"></Image>\r\n                        </Box>\r\n\r\n                        <Box\r\n                            mt=\"1\"\r\n                            fontWeight=\"semibold\"\r\n                            as=\"h4\"\r\n                            lineHeight=\"tight\"\r\n                            isTruncated\r\n                        >\r\n                            {type.propertyType}\r\n                        </Box>\r\n                    </Box>\r\n                </Tooltip>\r\n            </ChakraLink>\r\n            <Box color=\"gray.500\" fontSize=\"md\">\r\n                {type.count + \" \" + type.propertyType + \"\"}\r\n            </Box>\r\n        </VStack>\r\n    )\r\n}\r\n\r\nexport default PropertyTypeList;","import { Box, BoxProps, Button, Center, Flex, useBreakpointValue, useColorModeValue, useMediaQuery, useToast } from '@chakra-ui/react';\r\nimport React from 'react'\r\nimport DayPicker from 'react-day-picker';\r\nimport { DateUtils } from \"react-day-picker\";\r\nimport 'react-day-picker/lib/style.css';\r\n\r\nconst today = new Date(Date.now());\r\n\r\ntype PropertySchedule = {\r\n    reservedDates?: {\r\n        fromDate: string;\r\n        toDate: string;\r\n    }[],\r\n\r\n    dayOff?: Date[];\r\n}\r\n\r\nconst defaultSchedules: PropertySchedule = {\r\n    reservedDates: [\r\n        {\r\n            fromDate: \"2021-04-19\",\r\n            toDate: \"2021-04-21\"\r\n        },\r\n        {\r\n            fromDate: \"2021-04-21\",\r\n            toDate: \"2021-04-24\"\r\n        },\r\n        {\r\n            fromDate: \"2021-04-30\",\r\n            toDate: \"2021-05-01\"\r\n        }\r\n    ],\r\n}\r\n\r\nexport const getDatesBetween = (fromDate: string, toDate: string) => {\r\n    const from = new Date(fromDate);\r\n    const to = new Date(toDate);\r\n    let datesBtw: Date[] = [];\r\n    let start = from;\r\n    start.setDate(start.getDate() + 1);\r\n\r\n    while (start.getDate() < to.getDate()) {\r\n        datesBtw.push(new Date(start));\r\n        start.setDate(start.getDate() + 1);\r\n    }\r\n    return datesBtw;\r\n}\r\n\r\nconst getDisabledDates = (schedules?: PropertySchedule) => {\r\n    let disabledDates: Date[] = [];\r\n\r\n    if (schedules?.reservedDates) {\r\n        for (let i = 0; i < schedules.reservedDates.length; i++) {\r\n            disabledDates.push(...getDatesBetween(schedules.reservedDates[i].fromDate, schedules.reservedDates[i].toDate))\r\n        }\r\n    }\r\n\r\n    if (schedules?.dayOff) disabledDates.push(...schedules.dayOff);\r\n    return disabledDates;\r\n}\r\n\r\nconst getDateCheckOutOnly = (schedules?: PropertySchedule) => {\r\n    return schedules?.reservedDates?.map(r => new Date(r.fromDate));\r\n}\r\n\r\nconst getNextPossibleDate = (day: Date, schedules?: PropertySchedule) => {\r\n    let nextDay: Date | undefined = undefined;\r\n\r\n    if (schedules?.reservedDates) {\r\n        schedules.reservedDates.forEach(r => {\r\n            const rFrom = new Date(r.fromDate);\r\n\r\n            if (rFrom > day) {\r\n                if (!nextDay) nextDay = rFrom;\r\n                else if (rFrom <= nextDay) nextDay = rFrom;\r\n            }\r\n        })\r\n    }\r\n    if (nextDay !== day) return nextDay;\r\n    return null;\r\n}\r\n\r\ntype PickRangeDayState = {\r\n    from?: Date;\r\n    to?: Date;\r\n    enteredTo?: Date; // keep track of the last day for mouseEnter\r\n}\r\n\r\ntype PickRangeDayProps = {\r\n    from?: Date,\r\n    to?: Date,\r\n    updateDate: (from?: Date, to?: Date) => void,\r\n    schedules?: PropertySchedule\r\n}\r\n\r\nconst defaultDate: PickRangeDayState = {\r\n    from: undefined,\r\n    to: undefined,\r\n    enteredTo: undefined\r\n}\r\n\r\nconst PickRangeDay: React.FC<PickRangeDayProps & BoxProps> = (props) => {\r\n    const { from, to, updateDate, schedules, ...boxProps } = props;\r\n\r\n    const toast = useToast();\r\n    const [state, setState] = React.useState<PickRangeDayState>({ from: from, to: to });\r\n\r\n    const disabled = [\r\n        {\r\n            before: new Date(Date.now())\r\n        },\r\n        ...getDisabledDates(schedules),\r\n    ]\r\n\r\n    const [disabledDays, setDisabledDays] = React.useState(disabled)\r\n\r\n    React.useEffect(() => {\r\n        if ((state.from && state.to) || (!state.from && !state.to)) {\r\n            updateDate(state.from, state.to);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [state.from, state.to]);\r\n\r\n    const isSelectingFirstDay = (day: Date, from?: Date, to?: Date) => {\r\n        const isBeforeFirstDay = from && DateUtils.isDayBefore(day, from);\r\n        const isRangeSelected = from && to;\r\n        return !from || isBeforeFirstDay || isRangeSelected;\r\n    }\r\n\r\n    const handleDayMouseEnter = (day: Date) => {\r\n        const { from, to } = state;\r\n        if (!isSelectingFirstDay(day, from, to)) {\r\n            setState(s => ({\r\n                ...s,\r\n                enteredTo: day,\r\n            }));\r\n        }\r\n    }\r\n\r\n    const handleDayClick = (day: Date, modifiers: any) => {\r\n        if (modifiers.disabled) return;\r\n\r\n        const today = new Date(Date.now());\r\n        if (day < today) return;\r\n        const { from, to } = state;\r\n        if (from && to && day >= from && day <= to) {\r\n            handleResetClick();\r\n            return;\r\n        }\r\n        // if selecting first day, recalculate disabled days to this chosen day\r\n        if (isSelectingFirstDay(day, from, to)) {\r\n            if (modifiers.checkoutOnly) {\r\n                toast({\r\n                    status: \"info\",\r\n                    description: \"Check out only!\",\r\n                    duration: 3000\r\n                })\r\n                return;\r\n            }\r\n            setDisabledDays((s) => ({ ...s, before: day, after: getNextPossibleDate(day, schedules) }))\r\n\r\n            setState({\r\n                from: day,\r\n                to: undefined,\r\n                enteredTo: undefined,\r\n            });\r\n        }\r\n        // else, set every things back to normal\r\n        else {\r\n            setDisabledDays(disabled);\r\n            // prevent from = to\r\n            if (state.from?.getDate() === day.getDate()) {\r\n                setState({\r\n                    from: undefined,\r\n                    to: undefined,\r\n                    enteredTo: undefined,\r\n                });\r\n                return;\r\n            }\r\n            setState(s => ({\r\n                ...s,\r\n                to: day,\r\n                enteredTo: day,\r\n            }));\r\n        }\r\n    }\r\n\r\n    const handleResetClick = () => {\r\n        setState(defaultDate);\r\n    }\r\n\r\n    const selected = [state.from, { from: state.from, to: state.enteredTo }];\r\n\r\n\r\n    const modifiers = {\r\n        start: state.from,\r\n        end: state.enteredTo,\r\n        checkoutOnly: getDateCheckOutOnly(schedules),\r\n    }\r\n\r\n    const [enoughFor2MonthsDisplay] = useMediaQuery(\"(min-width: 600px)\");\r\n\r\n    return (\r\n        <Box d=\"flex\" flexDir=\"column\" {...boxProps} overflow=\"clip\">\r\n            <Box alignSelf=\"center\">\r\n                <DayPicker\r\n                    numberOfMonths={enoughFor2MonthsDisplay ? 2 : 1}\r\n                    fromMonth={state.from}\r\n                    modifiers={modifiers as any}\r\n                    onDayClick={handleDayClick}\r\n                    disabledDays={disabledDays}\r\n                    onDayMouseEnter={handleDayMouseEnter}\r\n                    selectedDays={selected as any}>\r\n                </DayPicker>\r\n            </Box>\r\n            <Flex justifyContent=\"center\" alignItems=\"center\">\r\n                {!state.from && !state.to && 'Please select the first day.'}\r\n                {state.from && !state.to && 'Please select the last day.'}\r\n                {state.from &&\r\n                    state.to &&\r\n                    `Selected from ${state.from.toLocaleDateString()} to\r\n                ${state.to.toLocaleDateString()}`}{' '}\r\n                {state.from && state.to && (\r\n                    <Button onClick={handleResetClick}>\r\n                        Reset\r\n                    </Button>\r\n                )}\r\n            </Flex>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default PickRangeDay;","import { Box, Flex, VStack, Text, Spacer, Square, Button, StackDivider } from '@chakra-ui/react';\r\nimport React from 'react';\r\n\r\ntype PopDetailState = {\r\n    guest: number;\r\n    children: number;\r\n}\r\n\r\ninterface PopDetailProps extends PopDetailState {\r\n    updatePeople: (guest: number, children: number) => void;\r\n    maxGuest?: number;\r\n}\r\n\r\nconst PopDetail: React.FC<PopDetailProps> = ({ guest, children, updatePeople, maxGuest }) => {\r\n    return (\r\n        <Box p=\"4\" style={{ backdropFilter: \"blur(5px)\" }}>\r\n            <VStack align=\"stretch\" spacing={4}>\r\n                <Flex alignItems=\"center\">\r\n                    <Text mr=\"auto\" fontSize=\"md\">Guests</Text>\r\n                    <Square border=\"1px\" borderColor=\"yellow.400\">\r\n                        <Button variant=\"ghost\" borderRadius=\"0\" disabled={guest <= 0}\r\n                            onClick={() => updatePeople(--guest, children)}>-</Button>\r\n                    </Square>\r\n                    <Text mx=\"4\" fontSize=\"md\">{guest}</Text>\r\n                    <Square border=\"1px\" borderColor=\"yellow.400\">\r\n                        <Button variant=\"ghost\" borderRadius=\"0\"\r\n                            disabled={maxGuest !== undefined && guest >= maxGuest}\r\n                            onClick={() => updatePeople(++guest, children)}>+</Button>\r\n                    </Square>\r\n                </Flex>\r\n                <Flex alignItems=\"center\">\r\n                    <Text mr=\"auto\" fontSize=\"md\">Children</Text>\r\n                    <Square border=\"1px\" borderColor=\"yellow.400\">\r\n                        <Button variant=\"ghost\" borderRadius=\"0\" disabled={children <= 0 ? true : false}\r\n                            onClick={() => updatePeople(guest, --children)}>-</Button>\r\n                    </Square>\r\n                    <Text mx=\"4\" fontSize=\"md\">{children}</Text>\r\n                    <Square border=\"1px\" borderColor=\"yellow.400\">\r\n                        <Button variant=\"ghost\" borderRadius=\"0\"\r\n                            isDisabled={children >= 5}\r\n                            onClick={() => updatePeople(guest, ++children)}>+</Button>\r\n                    </Square>\r\n                </Flex>\r\n            </VStack>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default PopDetail;","import { Box, Button, Center, Flex, Input, InputGroup, InputLeftElement, InputRightElement, Popover, PopoverContent, PopoverTrigger, Portal, Spinner, useColorModeValue } from '@chakra-ui/react';\r\nimport axios from 'axios';\r\nimport React from 'react';\r\nimport { BsSearch } from 'react-icons/bs';\r\nimport { useQuery } from 'react-query';\r\nimport { Redirect, useHistory } from 'react-router';\r\nimport { fetchCities } from '../../API';\r\n// import 'react-day-picker/lib/style.css';\r\nimport PickRangeDay from './PickRangeDay';\r\nimport PopDetail from './PopDetail';\r\n\r\nexport type CityResponse = {\r\n    cityName: string;\r\n    id: string;\r\n    countryName: string;\r\n    countryId: string;\r\n}\r\n\r\ntype SearchBarProps = {\r\n    search: SearchQuery;\r\n    isLoading?: boolean;\r\n    updateSearch?: (search: SearchQuery) => void;\r\n    onClickSearch?: () => void;\r\n}\r\n\r\nconst defaultValue: SearchQuery = {\r\n    guestNum: 0,\r\n    childrenNum: 0,\r\n}\r\n\r\n\r\nconst SearchBar = (props: SearchBarProps) => {\r\n    const { data: cities, isLoading, status } = useQuery<unknown, unknown, CityResponse[]>(\"cities\", fetchCities, {\r\n        staleTime: 1000 * 60 * 10\r\n    });\r\n    const history = useHistory();\r\n\r\n    const { search: form } = props;\r\n\r\n    React.useEffect(() => {\r\n        if (props.updateSearch) {\r\n            console.log(\"update form\")\r\n            props.updateSearch(form);\r\n        }\r\n    }, [form])\r\n\r\n    // if (isLoading) return <>loading...</>;\r\n\r\n    const UpdateDate = (from?: Date, to?: Date) => {\r\n        if (props.updateSearch) {\r\n            props?.updateSearch({\r\n                ...props.search,\r\n                from: from,\r\n                to: to\r\n            });\r\n        }\r\n    }\r\n\r\n    const UpdatePeople = (adult: number, children: number) => {\r\n        if (props.updateSearch) {\r\n            props?.updateSearch({\r\n                ...props.search,\r\n                guestNum: adult,\r\n                childrenNum: children\r\n            });\r\n        }\r\n    }\r\n\r\n    const UpdateCity = (city: string) => {\r\n        if (props.updateSearch) {\r\n            props?.updateSearch({\r\n                ...props.search,\r\n                city: city\r\n            });\r\n        }\r\n    }\r\n\r\n    const handleSearchClick = () => {\r\n        history.push({\r\n            pathname: \"/rooms\",\r\n            state: {\r\n                search: props.search\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Box p=\"2\" border=\"1px\" borderColor=\"yellow.400\" style={{ backdropFilter: \"blur(5px)\" }}>\r\n            <Flex display={{ lg: \"flex\" }} alignItems=\"center\">\r\n                <InputGroup>\r\n                    <InputLeftElement pointerEvents=\"none\" children={<BsSearch />} />\r\n                    <Input list=\"datalist-cities\" placeholder=\"City\" size=\"lg\" borderRadius=\"0\"\r\n                        onChange={(e) => UpdateCity(e.target.value)}\r\n                        value={props.search.city}\r\n                    />\r\n                    {isLoading ? <InputRightElement children={<Spinner alignSelf=\"center\" />}></InputRightElement> :\r\n                        <datalist id=\"datalist-cities\">\r\n                            {cities?.map(c => {\r\n                                return <option key={c.id} value={c.cityName} />\r\n                            })}\r\n                        </datalist>\r\n                    }\r\n                </InputGroup>\r\n                <Popover closeOnBlur={true}>\r\n                    <PopoverTrigger>\r\n                        <Button variant=\"outline\" w={[\"100%\", \"100%\", \"100%\", \"150%\"]}\r\n                            size=\"lg\" _focusVisible={{ border: \"0\" }} borderRadius=\"0\" px=\"2\">\r\n                            {form?.from?.toLocaleDateString() || \"From\"} - {form?.to?.toLocaleDateString() || \"To\"}\r\n                        </Button>\r\n                    </PopoverTrigger>\r\n                    <Portal>\r\n                        <PopoverContent\r\n                            flexWrap=\"nowrap\" alignItems=\"center\" style={{ backdropFilter: \"blur(5px)\" }}\r\n                            w=\"100%\" borderRadius=\"0\"\r\n                            bgColor={useColorModeValue(\"gray.100\", \"gray.800\")}\r\n                        >\r\n                            <PickRangeDay updateDate={UpdateDate} />\r\n                        </PopoverContent>\r\n                    </Portal>\r\n                </Popover>\r\n                <Popover>\r\n                    <PopoverTrigger>\r\n                        <Button variant=\"outline\" w={[\"100%\", \"100%\", \"100%\", \"150%\"]} size=\"lg\"\r\n                            borderRadius=\"0\" px=\"2\"\r\n                        >\r\n                            {form.guestNum + ' guests - ' + form.childrenNum + ' children'}\r\n                        </Button>\r\n                    </PopoverTrigger>\r\n                    <Portal>\r\n                        <PopoverContent flexWrap=\"nowrap\" borderRadius=\"0\" bg=\"inherit\"\r\n                            bgColor={useColorModeValue(\"gray.100\", \"gray.800\")}\r\n                        >\r\n                            <PopDetail updatePeople={UpdatePeople} guest={form.guestNum!} children={form.childrenNum!}></PopDetail>\r\n                        </PopoverContent>\r\n                    </Portal>\r\n                </Popover>\r\n                <Button alignSelf=\"center\" size=\"lg\" minW=\"100px\" ml={[0, 0, 0, 2]}\r\n                    onClick={props.onClickSearch ? props.onClickSearch : handleSearchClick}\r\n                    isLoading={props.isLoading}\r\n                    mt={[2, 2, 2, 0]} w={[\"100%\", \"100%\", \"100%\", \"30%\"]} borderRadius=\"0\">\r\n                    Search\r\n                </Button>\r\n            </Flex>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default SearchBar;","export default __webpack_public_path__ + \"static/media/HomeBG.c3c3859c.webp\";","import * as React from \"react\"\r\nimport {\r\n  useColorMode,\r\n  useColorModeValue,\r\n  IconButton,\r\n  IconButtonProps,\r\n} from \"@chakra-ui/react\"\r\nimport { FaMoon, FaSun } from \"react-icons/fa\"\r\n\r\ntype ColorModeSwitcherProps = Omit<IconButtonProps, \"aria-label\">\r\n\r\nexport const ColorModeSwitcher: React.FC<ColorModeSwitcherProps> = (props) => {\r\n  const { toggleColorMode } = useColorMode()\r\n  const text = useColorModeValue(\"dark\", \"light\")\r\n  const SwitchIcon = useColorModeValue(FaMoon, FaSun)\r\n\r\n  return (\r\n    <IconButton\r\n      size=\"md\"\r\n      fontSize=\"lg\"\r\n      variant=\"ghost\"\r\n      color=\"current\"\r\n      marginLeft=\"2\"\r\n      onClick={toggleColorMode}\r\n      icon={<SwitchIcon />}\r\n      aria-label={`Switch to ${text} mode`}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.314a949b.svg\";","import * as React from \"react\"\r\nimport {\r\n  chakra,\r\n  keyframes,\r\n  ImageProps,\r\n  forwardRef,\r\n  usePrefersReducedMotion,\r\n} from \"@chakra-ui/react\"\r\nimport logo from \"./logo.svg\"\r\n\r\nconst spin = keyframes`\r\n  from { transform: rotate(0deg); }\r\n  to { transform: rotate(360deg); }\r\n`\r\n\r\nexport const Logo = forwardRef<ImageProps, \"img\">((props, ref) => {\r\n  const prefersReducedMotion = usePrefersReducedMotion()\r\n\r\n  const animation = prefersReducedMotion\r\n    ? undefined\r\n    : `${spin} infinite 20s linear`\r\n\r\n  return <chakra.img animation={animation} boxSize=\"30px\" src={logo} ref={ref} {...props} />\r\n})\r\n","import { useToast } from '@chakra-ui/toast';\r\nimport { AxiosResponse } from 'axios';\r\nimport jwtDecode, { JwtPayload } from 'jwt-decode';\r\nimport React from 'react';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { authenticate, axAuth, register, validateToken } from '../API';\r\n\r\ninterface UserTokenPayload extends JwtPayload {\r\n    roles: string[] | string;\r\n    email: string;\r\n    name: string;\r\n    userId: string;\r\n}\r\n\r\ntype AuthContextStates = {\r\n    loginAsync: (request: LoginRequest) => any\r\n    registerAsync: (request: RegisterRequest) => any\r\n    logoutAsync: () => Promise<void>;\r\n    updateToken: (token: string) => void;\r\n    user?: UserResponse;\r\n    isLoading: boolean;\r\n}\r\n\r\nexport const AuthContext = React.createContext<AuthContextStates>({} as AuthContextStates);\r\n\r\n// TODO: Refactoring: Get user from localStorage\r\nexport const AuthProvider: React.FC = ({ children }) => {\r\n    const [isLoading, setIsLoading] = React.useState<boolean>(false);\r\n    const [user, setUser] = React.useState<UserResponse>();\r\n    const [token, setToken] = React.useState(localStorage.getItem(\"token\"));\r\n\r\n    const history = useHistory();\r\n\r\n    const toast = useToast();\r\n\r\n    React.useEffect(() => {\r\n        axAuth.interceptors.response.use(config => config, (error) => {\r\n            console.log(error);\r\n            if (error.status === 404) {\r\n                // history.push(\"/notfound\");\r\n            }\r\n            return Promise.reject(error);\r\n        });\r\n    }, [])\r\n\r\n    /**\r\n     * Check for token in localStorage\r\n     */\r\n    React.useEffect(() => {\r\n        const tokenStorage = localStorage.getItem(\"token\");\r\n        if (tokenStorage) {\r\n            validateToken(tokenStorage).then(res => {\r\n                console.log(\"validating...\")\r\n                if (res.status !== 200) return logoutAsync(\"Token expired\");\r\n            })\r\n            setToken(tokenStorage);\r\n        }\r\n        else {\r\n            loginAsync({ email: \"test@mail.com\", password: \"password\" });\r\n        }\r\n    }, [])\r\n\r\n    React.useEffect(() => {\r\n        if (token) {\r\n            const decodedUser = jwtDecode<UserTokenPayload>(token);\r\n            setUser({\r\n                email: decodedUser.email,\r\n                name: decodedUser.name,\r\n                roles: decodedUser.roles,\r\n                token: token,\r\n                userId: decodedUser.userId,\r\n            })\r\n        }\r\n    }, [token]);\r\n\r\n    const updateToken = (token: string) => {\r\n        setToken(token);\r\n    }\r\n\r\n    const mutateLogin = useMutation<AxiosResponse<UserResponse>, any, LoginRequest>(authenticate, {\r\n        onSuccess: (res) => {\r\n            setToken(res.data.token);\r\n            localStorage.setItem(\"token\", res.data.token);\r\n            toast({ description: \"Logged in successfully\", status: \"success\", duration: 3000 });\r\n        },\r\n        onError: (res) => { toast({ description: res.data.message, status: \"error\", duration: 3000 }) },\r\n        onSettled: () => setIsLoading(false)\r\n    })\r\n\r\n    const mutateRegister = useMutation<AxiosResponse<UserResponse>, any, RegisterRequest>(register, {\r\n        onSuccess: (res) => {\r\n            // setUser(res.data);\r\n            setToken(res.data.token);\r\n            localStorage.setItem(\"token\", res.data.token);\r\n            toast({ description: \"Logged in successfully\", status: \"success\", duration: 3000 });\r\n        },\r\n        onError: (res) => {\r\n            console.log(res.data);\r\n            for (let i = 0; i < res.data.messages.length; i++) {\r\n                toast({ description: res.data.messages[i], status: \"error\", duration: 3000 })\r\n            }\r\n        },\r\n        onSettled: () => setIsLoading(false)\r\n    })\r\n\r\n    const logoutAsync = async (msg?: string) => {\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        setUser(undefined);\r\n        setToken(null);\r\n        localStorage.removeItem(\"token\");\r\n        toast({\r\n            title: msg ? msg : \"Logged out successfully!\",\r\n            isClosable: true,\r\n            duration: 3000,\r\n            status: \"success\"\r\n        })\r\n        await new Promise(resolve => setTimeout(resolve, 500));\r\n    }\r\n\r\n    const loginAsync = async (request: LoginRequest) => {\r\n        setIsLoading(true);\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        try {\r\n            mutateLogin.mutate(request);\r\n        }\r\n        catch (e) {\r\n            console.log(e);\r\n        }\r\n        finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    const registerAsync = async (request: RegisterRequest) => {\r\n        setIsLoading(true);\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        try {\r\n            mutateRegister.mutate(request);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={{\r\n            loginAsync: loginAsync,\r\n            logoutAsync: logoutAsync,\r\n            updateToken: updateToken,\r\n            isLoading: isLoading,\r\n            user: user,\r\n            registerAsync: registerAsync\r\n        }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    )\r\n}","import { Box, FormControl, FormLabel, Input, Button, Checkbox, FormErrorMessage, chakra, useDisclosure, Collapse } from '@chakra-ui/react';\r\nimport React from 'react'\r\nimport { FaArrowRight } from 'react-icons/fa';\r\nimport { useHistory } from 'react-router';\r\nimport { AuthContext } from '../Contexts/AuthContext';\r\n\r\ntype LoginFormProps = {\r\n    initRef?: React.RefObject<HTMLInputElement>;\r\n    fromUrl?: string;\r\n    isRegistering: boolean;\r\n}\r\n\r\ntype FormState = {\r\n    email?: string;\r\n    password?: string;\r\n    confirmedPassword?: string;\r\n    remember: boolean;\r\n    isRegistering: boolean;\r\n}\r\n\r\nfunction validateEmail(email: string | undefined) {\r\n    if (!email) return false;\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(email);\r\n}\r\n\r\n\r\nconst LoginForm: React.FC<LoginFormProps> = ({ initRef, fromUrl, isRegistering }) => {\r\n    const history = useHistory();\r\n\r\n    const [loginForm, setLoginForm] = React.useState<FormState>({\r\n        remember: false,\r\n        isRegistering: isRegistering\r\n    });\r\n\r\n    const [emailError, setEmailError] = React.useState(false);\r\n    const [passwordError, setPasswordError] = React.useState(false);\r\n    const [confirmPasswordError, setConfirmPasswordError] = React.useState(false);\r\n\r\n    const validateForm = (email: string | undefined, password: string | undefined) => {\r\n        if (validateEmail(email)) {\r\n            setEmailError(false);\r\n        } else setEmailError(true);\r\n        if (password === \"\") {\r\n            setPasswordError(true)\r\n        } else setPasswordError(false);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        validateForm(loginForm.email, loginForm.password);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [loginForm.email, loginForm.password])\r\n\r\n    React.useEffect(() => {\r\n        if (loginForm.isRegistering && loginForm.confirmedPassword === loginForm.password) {\r\n            console.log(loginForm.password);\r\n            console.log(loginForm.confirmedPassword);\r\n\r\n            setConfirmPasswordError(false);\r\n            console.log(confirmPasswordError);\r\n        } else setConfirmPasswordError(true);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [loginForm.confirmedPassword, loginForm.isRegistering, loginForm.password])\r\n\r\n    const authContext = React.useContext(AuthContext);\r\n\r\n    const handleLogin = () => {\r\n        authContext.loginAsync(loginForm);\r\n        if (fromUrl) history.replace(fromUrl);\r\n    }\r\n\r\n    const handleRegister = () => {\r\n        authContext.registerAsync({ email: loginForm.email, password: loginForm.password, confirmPassword: loginForm.confirmedPassword });\r\n        if (fromUrl) history.replace(fromUrl);\r\n    }\r\n\r\n    const toggleMode = () => {\r\n        setLoginForm((s) => ({\r\n            ...s,\r\n            isRegistering: !s.isRegistering\r\n        }))\r\n    }\r\n\r\n    return (\r\n        <chakra.form d=\"flex\" flexDir=\"column\">\r\n            <FormControl isInvalid={emailError}>\r\n                <FormLabel htmlFor=\"email\">Email</FormLabel>\r\n                <Input placeholder=\"Enter your email\" id=\"email\" isInvalid={emailError} ref={initRef} variant=\"filled\" size=\"lg\" type=\"email\"\r\n                    value={loginForm.email} isRequired\r\n                    onChange={(e) => setLoginForm(s => ({\r\n                        ...s,\r\n                        email: e.target.value.trim()\r\n                    }))}></Input>\r\n                <FormErrorMessage>{\"Email not correct\"}</FormErrorMessage>\r\n            </FormControl>\r\n\r\n            <FormControl isInvalid={passwordError}>\r\n                <FormLabel htmlFor=\"password\" my=\"2\">Password</FormLabel>\r\n                <Input placeholder=\"Enter your password\" id=\"password\" isInvalid={passwordError} variant=\"filled\" size=\"lg\" type=\"password\"\r\n                    value={loginForm.password} minLength={1} isRequired\r\n                    onChange={(e) => setLoginForm(s => ({\r\n                        ...s,\r\n                        password: e.target.value\r\n                    }))}></Input>\r\n            </FormControl>\r\n\r\n            <Collapse in={loginForm.isRegistering}>\r\n                <FormControl isInvalid={confirmPasswordError}>\r\n                    <FormLabel htmlFor=\"confirm-password\" my=\"2\">Confirm Password</FormLabel>\r\n                    <Input placeholder=\"Confirm your password\" id=\"confirm-password\" isInvalid={confirmPasswordError} variant=\"filled\" size=\"lg\" type=\"password\"\r\n                        value={loginForm.confirmedPassword} minLength={1} isRequired\r\n                        onChange={(e) => setLoginForm(s => ({\r\n                            ...s,\r\n                            confirmedPassword: e.target.value\r\n                        }))}></Input>\r\n                </FormControl>\r\n                <FormErrorMessage>{\"Password does not match\"}</FormErrorMessage>\r\n            </Collapse>\r\n\r\n            <Checkbox size=\"lg\" checked={loginForm.remember} mt=\"2\"\r\n                onChange={(e) => setLoginForm(s => ({ ...s, remember: e.target.checked }))}>\r\n                Remember me\r\n                </Checkbox>\r\n\r\n            <Button my=\"3\" w=\"30%\" rounded=\"full\" type=\"submit\" alignSelf=\"center\" title=\"Login\"\r\n                isLoading={authContext.isLoading}\r\n                isDisabled={loginForm.isRegistering ? emailError || passwordError || confirmPasswordError : emailError || passwordError}\r\n                onClick={!loginForm.isRegistering ? handleLogin : handleRegister}>\r\n                <FaArrowRight />\r\n            </Button>\r\n\r\n            <Button variant=\"link\" alignSelf=\"center\" textStyle=\"\" onClick={() => toggleMode()}>{!loginForm.isRegistering ? \"Register your account!\" : \"Or login instead!\"}</Button >\r\n        </chakra.form>\r\n    );\r\n}\r\n\r\nexport default LoginForm;","import React, { FC } from 'react';\r\nimport { Box, BoxProps, Button, Center, DarkMode, Flex, Heading, HStack, Menu, MenuButton, MenuDivider, MenuItem, MenuList, Modal, ModalBody, ModalCloseButton, ModalContent, ModalHeader, ModalOverlay, Spacer, useColorModeValue, useDisclosure } from '@chakra-ui/react';\r\nimport { ColorModeSwitcher } from '../../ColorModeSwitcher';\r\nimport { Logo } from \"../../Logo\";\r\nimport { Link, Link as RouterLink, useLocation } from 'react-router-dom';\r\nimport { AuthContext } from '../../Contexts/AuthContext';\r\nimport { BsBell, BsBookmark, BsBoxArrowDown, BsCalendar, BsChevronDown, BsHouse, BsLock, BsPerson } from 'react-icons/bs';\r\nimport LoginForm from '../LoginForm';\r\n\r\nconst Navbar: FC<BoxProps> = ({ ...props }) => {\r\n    const auth = React.useContext(AuthContext);\r\n    const loginFormModal = useDisclosure();\r\n    const initRef = React.useRef<HTMLInputElement>(null);\r\n    const [isRegistering, setIsRegistering] = React.useState(false);\r\n\r\n    // check if we are at homepage, then do a bit of theme modification\r\n    const { pathname } = useLocation();\r\n    const bgColorMenuWhenHome = useColorModeValue(\"gray.800\", \"gray.800\");\r\n    const colorMenuWhenHome = useColorModeValue(\"white\", \"white\");\r\n\r\n    const becomehostColor = useColorModeValue(\"cyan.200\", \"blue.400\");\r\n\r\n    return (\r\n        <Box marginBottom={[\"5%\"]} {...props}>\r\n            <Flex justifyContent=\"center\" alignItems=\"center\">\r\n                <RouterLink to=\"/\">\r\n                    <HStack spacing={4}>\r\n                        <Center>\r\n                            <Logo />\r\n                        </Center>\r\n                        <Heading size=\"md\" display={{ base: \"none\", sm: \"block\" }}>Nice homestays</Heading>\r\n                    </HStack>\r\n                </RouterLink>\r\n                <Spacer />\r\n                <HStack spacing={4}>\r\n                    <ColorModeSwitcher />\r\n                    {auth.user === undefined ?\r\n                        <>\r\n                            <Button variant=\"ghost\" onClick={() => { loginFormModal.onOpen(); setIsRegistering(false); }}>Login</Button>\r\n                            <Modal isOpen={loginFormModal.isOpen} onClose={loginFormModal.onClose} size=\"xl\" motionPreset=\"slideInBottom\" isCentered initialFocusRef={initRef}>\r\n                                <ModalOverlay />\r\n\r\n                                <ModalContent>\r\n                                    <ModalHeader>{isRegistering ? \"Sign up new account\" : \"Login\"}</ModalHeader>\r\n                                    <ModalCloseButton />\r\n                                    <ModalBody pb=\"2\">\r\n                                        <LoginForm initRef={initRef} isRegistering={isRegistering}></LoginForm>\r\n                                    </ModalBody>\r\n                                </ModalContent>\r\n                            </Modal>\r\n                            <Button variant=\"ghost\" onClick={() => { loginFormModal.onOpen(); setIsRegistering(true); }}>Register</Button>\r\n                        </> :\r\n                        <>\r\n                            {auth.user.roles.includes(\"Admin\") &&\r\n                                <Button>\r\n                                    <Link to=\"/verify\">\r\n                                        Verify new properties\r\n                                    </Link>\r\n                                </Button>\r\n                            }\r\n                            <Menu>\r\n                                <MenuButton as={Button} variant=\"ghost\" rightIcon={<BsChevronDown />}>\r\n                                    {auth.user.name}\r\n                                </MenuButton>\r\n                                <MenuList>\r\n                                    <MenuItem as={RouterLink} to=\"/profile?view=likes\">\r\n                                        <Box mr={\"3\"}><BsBookmark /></Box>\r\n                                        Saved rooms\r\n                                    </MenuItem>\r\n                                    <MenuItem as={RouterLink} to=\"/profile?view=reservations\">\r\n                                        <Box mr={\"3\"}><BsCalendar /></Box>\r\n                                        Your Reservations\r\n                                    </MenuItem>\r\n                                    <MenuItem as={RouterLink} to=\"/profile?view=notifications\">\r\n                                        <Box mr=\"3\"><BsBell /></Box>\r\n                                        Notifications\r\n                                    </MenuItem>\r\n                                    <MenuDivider />\r\n                                    {auth.user.roles?.includes(\"Owner\") ?\r\n                                        <>\r\n                                            <MenuItem as={RouterLink} to=\"/host/publish\">\r\n                                                <Box mr=\"3\"><BsLock /></Box>\r\n                                                Host your property\r\n                                            </MenuItem>\r\n                                            <MenuItem as={RouterLink} to=\"/host/properties\">\r\n                                                <Box mr=\"3\"><BsHouse /></Box>\r\n                                                Your properties\r\n                                            </MenuItem>\r\n                                        </>\r\n                                        : !auth.user.roles.includes(\"Admin\") &&\r\n                                        <MenuItem bg={becomehostColor} as={RouterLink} to=\"/user/register-host\">\r\n                                            <Box mr=\"3\"><BsLock /></Box>\r\n                                            Become a host\r\n                                        </MenuItem>\r\n                                    }\r\n                                    <MenuItem as={RouterLink} to=\"/\">\r\n                                        <Box mr=\"3\"><BsPerson /></Box>\r\n                                        Account\r\n                                    </MenuItem>\r\n                                    <MenuDivider />\r\n                                    <MenuItem onClick={() => auth.logoutAsync()}>\r\n                                        <Box mr=\"3\"><BsBoxArrowDown /></Box>\r\n                                        Log Out\r\n                                    </MenuItem>\r\n                                </MenuList>\r\n                            </Menu>\r\n                        </>\r\n                    }\r\n                </HStack>\r\n            </Flex>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default Navbar;","import React from 'react'\r\nimport PropertyTypeList from '../Components/HomeComponents/PropertyTypeList'\r\nimport SearchBar from '../Components/NavComponents/SearchBar';\r\nimport { Box, DarkMode, HStack, Spacer, Link } from \"@chakra-ui/react\"\r\nimport BG from \"../Images/HomeBG.webp\";\r\nimport Navbar from '../Components/NavComponents/Navbar';\r\nimport { Link as ReactLink } from 'react-router-dom';\r\nimport { BsArrowRight } from 'react-icons/bs';\r\n\r\n\r\nconst HomePage = () => {\r\n    const px = \"10%\";\r\n    const [search, setSearch] = React.useState<SearchQuery>({ childrenNum: 0, guestNum: 0 });\r\n    const updateSearch = (search: SearchQuery) => {\r\n        setSearch(search)\r\n    }\r\n\r\n    return (\r\n        <Box>\r\n            <Box minH={[\"50vh\", \"75vh\", \"85vh\"]} style={{ background: \"url('\" + BG + \"') center/cover\", }} color=\"white\">\r\n                <Box px={px} pt=\"5\">\r\n                    <Navbar></Navbar>\r\n                    <DarkMode>\r\n                        <SearchBar search={search} updateSearch={updateSearch} />\r\n                    </DarkMode>\r\n                    <Box as=\"h1\" fontFamily=\"mono\" textShadow=\"gray 2px 2px 2px\" color=\"whiteAlpha.600\" fontWeight=\"bold\" fontSize={[\"3xl\", \"4xl\", \"6xl\", \"8xl\"]}\r\n                        mt={[\"5vh\", \"10vh\", \"20vh\", \"30vh\"]}>EXPLORE AROUND</Box>\r\n                </Box>\r\n            </Box>\r\n            <Box px={px} mt=\"10\">\r\n                <HStack>\r\n                    <Box as=\"h2\" fontWeight=\"bold\" fontSize=\"4xl\" mb=\"5\">\r\n                        LIVE ANYWHERE\r\n                    </Box>\r\n                    <Spacer />\r\n                    <Link as={ReactLink} to={\"/rooms\"} d={\"flex\"} flexDir=\"row\" alignItems=\"center\">All properties <Box ml=\"2\"><BsArrowRight /></Box></Link>\r\n                </HStack>\r\n                <PropertyTypeList></PropertyTypeList>\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\nexport default HomePage;","import { useDisclosure, useToast, Box, Flex, Spacer, Popover, PopoverTrigger, HStack, Button, PopoverContent, Collapse, Tooltip, Spinner, Divider } from '@chakra-ui/react';\r\nimport React from 'react'\r\nimport { BsStarFill, BsStar } from 'react-icons/bs';\r\nimport { useQuery, useMutation } from 'react-query';\r\nimport { useHistory } from 'react-router';\r\nimport { fetchPricing, postReservation } from '../API';\r\nimport { AuthContext } from '../Contexts/AuthContext';\r\nimport PickRangeDay, { getDatesBetween } from './NavComponents/PickRangeDay';\r\nimport PopDetail from './NavComponents/PopDetail';\r\n\r\ntype FloatingFormProps = {\r\n    room: Room;\r\n    bookInfo: BookingInfo;\r\n    updatePeople: (adult: number, children: number) => void;\r\n    updateDate: (from?: Date | undefined, to?: Date | undefined) => void;\r\n}\r\n\r\nconst FloatingForm: React.FC<FloatingFormProps> = ({ room, bookInfo, updateDate, updatePeople }) => {\r\n    const auth = React.useContext(AuthContext);\r\n    const history = useHistory();\r\n    const feeCollapse = useDisclosure();\r\n    const [nightCount, setNightCount] = React.useState<number>(0);\r\n    const toast = useToast();\r\n\r\n    const checkPricing = useQuery([\"pricing\", bookInfo], () => {\r\n        if (bookInfo.roomId && bookInfo.bookFromDate && bookInfo.bookToDate) {\r\n            return fetchPricing(bookInfo)\r\n        }\r\n    }, {\r\n        onSuccess: (data) => console.log(data?.data),\r\n        staleTime: 1000 * 60\r\n    })\r\n\r\n    const reservMutation = useMutation(postReservation, {\r\n        onSuccess: (data) => {\r\n            toast({ description: \"Success\", status: \"success\", isClosable: true });\r\n            history.push(\"/profile?view=reservations\");\r\n        },\r\n        onError: (err) => {\r\n            toast({ description: \"Something's wrong\", status: \"error\", isClosable: true });\r\n        }\r\n    });\r\n\r\n    const handleCheckout = async () => {\r\n        if (!auth.user) return toast({\r\n            description: \"Login is required\",\r\n            status: \"info\",\r\n            isClosable: true\r\n        })\r\n        reservMutation.mutate(bookInfo);\r\n    }\r\n\r\n    let price = checkPricing.data?.data;\r\n\r\n    React.useEffect(() => {\r\n        if (bookInfo.bookFromDate && bookInfo.bookToDate) {\r\n            setNightCount(getDatesBetween(bookInfo.bookFromDate.toDateString(), bookInfo.bookToDate.toDateString()).length + 1)\r\n            return feeCollapse.onOpen();\r\n        }\r\n        return feeCollapse.onClose();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [bookInfo.bookFromDate, bookInfo.bookToDate])\r\n\r\n    return (\r\n        <Box display=\"inline-flex\" flexDir=\"column\" alignContent=\"center\" justifyContent=\"center\">\r\n            <Flex alignItems=\"baseline\">\r\n                <Box as=\"h2\" fontFamily=\"mono\" fontSize=\"3xl\" fontWeight=\"semibold\">{room.formattedPrice + \"$ \"}\r\n                </Box>\r\n                <Box as=\"span\" color=\"gray.500\" fontStyle=\"italic\">\r\n                    / per night\r\n                </Box>\r\n                <Spacer />\r\n                <Box d=\"flex\" alignItems=\"center\">\r\n                    {Array(5).fill(\"\").map((_, i) => {\r\n                        return (i < Math.round(room.totalStar / room.totalReview) ? <BsStarFill key={i} colorRendering=\"teal.400\" /> : <BsStar key={i} />)\r\n                    })}\r\n                </Box>\r\n            </Flex>\r\n\r\n            {/* Pop over */}\r\n            <Box mt=\"4\">\r\n                <Popover closeOnBlur={true}>\r\n                    <PopoverTrigger>\r\n                        <HStack spacing=\"0\">\r\n                            <Button variant=\"outline\" borderTopLeftRadius=\"lg\"\r\n                                size=\"lg\" w=\"100%\"\r\n                                _focusVisible={{ border: \"0\" }}\r\n                                borderRadius=\"0\">\r\n                                {bookInfo?.bookFromDate?.toLocaleDateString() || \"From\"}\r\n                            </Button>\r\n                            <Button variant=\"outline\" borderTopRightRadius=\"lg\"\r\n                                size=\"lg\" w=\"100%\"\r\n                                _focusVisible={{ border: \"0\" }}\r\n                                borderRadius=\"0\">\r\n                                {bookInfo?.bookToDate?.toLocaleDateString() || \"To\"}\r\n                            </Button>\r\n                        </HStack>\r\n                    </PopoverTrigger>\r\n                    <PopoverContent flexWrap=\"nowrap\" alignItems=\"center\" w={{ base: \"100%\", lg: \"550px\" }}\r\n                        style={{ backdropFilter: \"blur(5px)\" }}\r\n                        borderRadius=\"0\" bg=\"inherit\"\r\n                        bgColor=\"rgba(66, 153, 225, 0.5)\"\r\n                    >\r\n                        <PickRangeDay schedules={{ reservedDates: room.reservedDates, dayOff: room.daysOff }} updateDate={updateDate} />\r\n                    </PopoverContent>\r\n                </Popover>\r\n                <Popover>\r\n                    <PopoverTrigger>\r\n                        <Button variant=\"outline\" w=\"100%\" size=\"lg\" borderRadius=\"0\" borderBottomRadius=\"lg\" px=\"2\">{bookInfo.guest + ' guests - ' + bookInfo.children + ' children'}</Button>\r\n                    </PopoverTrigger>\r\n                    <PopoverContent flexWrap=\"nowrap\" borderRadius=\"0\" bg=\"inherit\"\r\n                        bgColor=\"rgba(66, 153, 225, 0.5)\"\r\n                    >\r\n                        <PopDetail updatePeople={updatePeople} guest={bookInfo.guest} children={bookInfo.children} maxGuest={room.maxGuest}></PopDetail>\r\n                    </PopoverContent>\r\n                </Popover>\r\n            </Box>\r\n\r\n            <Button variant=\"solid\" colorScheme=\"green\" alignSelf=\"stretch\" mt=\"4\"\r\n                isDisabled={!feeCollapse.isOpen || room.ownerInfo.userId === auth.user?.userId}\r\n                onClick={handleCheckout}\r\n            >\r\n                {room.ownerInfo.userId === auth.user?.userId ? \"You can't book your own property\" :\r\n                    !feeCollapse.isOpen ? \"Choose dates to see detail\" : \"Proceed checkout\"\r\n                }\r\n            </Button>\r\n            <Box alignSelf=\"center\" my=\"2\" fontWeight=\"thin\" fontStyle=\"oblique\">You won't be charged yet</Box>\r\n\r\n            {/* Fee details */}\r\n            <Collapse in={feeCollapse.isOpen}>\r\n                <Box fontSize=\"lg\">\r\n                    <Flex alignItems=\"baseline\">\r\n                        <Tooltip label={nightCount && `You are currently booking ${price?.nightCount} night(s)`}\r\n                            placement=\"left\" hasArrow>\r\n                            <Box fontWeight=\"light\" textDecoration=\"underline\">{room.formattedPrice}$ x {price?.nightCount} nights</Box>\r\n                        </Tooltip>\r\n                        <Spacer />\r\n                        {checkPricing.isLoading ? <Spinner /> :\r\n                            <Box fontFamily=\"mono\" >{price && `${price?.pricePerNight * price?.nightCount} $`}</Box>\r\n                        }\r\n                    </Flex>\r\n                    <Flex alignItems=\"baseline\">\r\n                        <Tooltip label=\"The owner keeps your place in highest cleanliness\" placement=\"left\" hasArrow>\r\n                            <Box fontWeight=\"light\" textDecoration=\"underline\">Cleaning fee</Box>\r\n                        </Tooltip>\r\n                        <Spacer />\r\n                        {checkPricing.isLoading ? <Spinner /> :\r\n                            <Box fontFamily=\"mono\">{price?.cleaningFee} $</Box>\r\n                        }\r\n                    </Flex>\r\n                    <Flex alignItems=\"baseline\">\r\n                        <Tooltip label=\"This helps us run our platform and offer services like 24/7 support on your trip. It includes VAT.\" placement=\"left\" hasArrow>\r\n                            <Box fontWeight=\"light\" textDecoration=\"underline\">Service fee</Box>\r\n                        </Tooltip>\r\n                        <Spacer />\r\n                        {checkPricing.isLoading ? <Spinner /> :\r\n                            <Box fontFamily=\"mono\">{price?.serviceFee} $</Box>\r\n                        }\r\n                    </Flex>\r\n                    <Flex alignItems=\"baseline\">\r\n                        <Tooltip label=\"We offer you discount based on your reservation!\" placement=\"left\" hasArrow>\r\n                            <Box fontWeight=\"light\" textDecoration=\"underline\">\r\n                                Discount\r\n                                <Box as=\"span\" textDecoration=\"none\" mx=\"2\">\r\n                                    {price ? price.discountPercent + \"%\" : \"0%\"}\r\n                                </Box>\r\n                            </Box>\r\n                        </Tooltip>\r\n                        <Spacer />\r\n                        {checkPricing.isLoading ? <Spinner /> :\r\n                            <Box fontFamily=\"mono\">{price?.discount} $</Box>\r\n                        }\r\n                    </Flex>\r\n                    <Divider my=\"2\" colorScheme=\"green\" variant=\"dashed\" />\r\n                    <Flex fontWeight=\"black\" fontSize=\"3xl\">\r\n                        <Box fontFamily=\"mono\">Total</Box>\r\n                        <Spacer />\r\n                        {checkPricing.isLoading ? <Spinner /> :\r\n                            <Box fontFamily=\"mono\">{price?.totalCost} $</Box>\r\n                        }\r\n                    </Flex>\r\n                </Box>\r\n            </Collapse>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default FloatingForm;","import { Box, Icon, HStack, VStack, Center } from '@chakra-ui/react'\r\nimport React from 'react'\r\nimport { IconType } from 'react-icons'\r\nimport { RiStarLine, RiUserStarLine } from \"react-icons/ri\";\r\n\r\ntype MyRoomBadgeProps = {\r\n    id: string;\r\n}\r\n\r\nconst MyRoomBadge: React.FC<MyRoomBadgeProps> = ({ id }) => {\r\n    const [icon, setIcon] = React.useState<IconType>();\r\n    const [badge, setBadge] = React.useState<RoomBadge>();\r\n\r\n    React.useEffect(() => {\r\n        let foundBadge = defaultRoomBadges.find(b => b.id === id);\r\n        setBadge(foundBadge);\r\n        switch (id) {\r\n            case \"1\":\r\n                setIcon(RiUserStarLine);\r\n                break;\r\n\r\n            default:\r\n                setIcon(RiStarLine);\r\n                break;\r\n        }\r\n    }, [id])\r\n\r\n    return (\r\n        <HStack alignContent=\"center\" spacing=\"0\" mb=\"2\">\r\n            <Icon d=\"flex\" boxSize=\"10\" alignItems=\"center\" justifyContent=\"center\" mt=\"2\" ml=\"2\">{icon}</Icon>\r\n            <VStack alignItems=\"start\" spacing=\"0\">\r\n                <Box as=\"h4\" fontSize=\"md\" fontWeight=\"semibold\">{badge?.title}</Box>\r\n                <Box as=\"h5\" fontSize=\"sm\" m=\"0\">{badge?.description}</Box>\r\n            </VStack>\r\n        </HStack>\r\n    )\r\n}\r\n\r\nexport const defaultRoomBadges: RoomBadge[] = [\r\n    {\r\n        id: \"1\",\r\n        title: \"Helpful owner\",\r\n        description: \"Owner provides best services\"\r\n    },\r\n    {\r\n        id: \"2\",\r\n        title: \"Extra clean\",\r\n        description: \"Owner follows our strict policies of enhanced clealiness\"\r\n    },\r\n    {\r\n        id: \"3\",\r\n        title: \"Not smoking\",\r\n        description: \"Owner does not allow smoking inside\"\r\n    },\r\n    {\r\n        id: \"4\",\r\n        title: \"Free cancelation\",\r\n        description: \"You can cancel with full refund in 24 hours\"\r\n    }\r\n]\r\n\r\nexport default MyRoomBadge;","import { AlertDialog, AlertDialogOverlay, AlertDialogContent, AlertDialogHeader, AlertDialogCloseButton, AlertDialogBody, AlertDialogFooter, Button, AlertDialogProps, useToast } from '@chakra-ui/react'\r\nimport React from 'react'\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { toggleCloseProperty } from '../API';\r\n\r\ninterface ActionAlertProps {\r\n    message?: string;\r\n    headerMessage?: string;\r\n    propertyId: string;\r\n    action?: () => void;\r\n}\r\n\r\ninterface PureActionAlertProps {\r\n    isLoading?: boolean;\r\n    message?: string;\r\n    headerMessage?: string;\r\n    propertyId: string;\r\n    action?: () => void;\r\n}\r\n\r\nexport const PureActionAlert = (props: PureActionAlertProps & AlertDialogProps) => {\r\n    const { propertyId, isOpen, onClose, action, message, headerMessage, leastDestructiveRef, isLoading, ...alertDialogProps } = props;\r\n\r\n    const handleYes = () => {\r\n        if (action) return action;\r\n    }\r\n\r\n    return (\r\n        <AlertDialog\r\n            motionPreset=\"slideInBottom\"\r\n            leastDestructiveRef={leastDestructiveRef}\r\n            onClose={onClose}\r\n            isOpen={isOpen}\r\n            isCentered\r\n            {...alertDialogProps}\r\n        >\r\n            <AlertDialogOverlay />\r\n\r\n            <AlertDialogContent>\r\n                <AlertDialogHeader>{headerMessage ? headerMessage : \"Confirm your action\"}</AlertDialogHeader>\r\n                <AlertDialogCloseButton />\r\n                <AlertDialogBody>\r\n                    {message ? message :\r\n                        \"Are you sure you want to proceed the action?\"}\r\n                </AlertDialogBody>\r\n                <AlertDialogFooter>\r\n                    <Button ref={leastDestructiveRef as any} onClick={onClose}>\r\n                        No\r\n                    </Button>\r\n                    <Button colorScheme=\"red\" ml={3} onClick={handleYes} isLoading={isLoading}>\r\n                        Yes\r\n                    </Button>\r\n                </AlertDialogFooter>\r\n            </AlertDialogContent>\r\n        </AlertDialog>\r\n    )\r\n}\r\n\r\nexport const ActionAlert = (props: ActionAlertProps & AlertDialogProps) => {\r\n    const { propertyId, isOpen, onClose, action, message, headerMessage, leastDestructiveRef, ...alertDialogProps } = props;\r\n    const toast = useToast();\r\n\r\n    const queryClient = useQueryClient();\r\n\r\n    const closePropMutation = useMutation([\"property\", propertyId], () => {\r\n        return toggleCloseProperty(propertyId)\r\n    }, {\r\n        onSuccess: (rs) => {\r\n            toast({ description: \"Successful!\", status: \"success\" });\r\n            queryClient.removeQueries([\"property\", propertyId]);\r\n        },\r\n        onError: (error) => {\r\n            toast({ description: \"Error\" + JSON.stringify(error), status: \"error\" })\r\n        },\r\n        onSettled: () => onClose()\r\n    })\r\n\r\n    const handleDelete = () => {\r\n        if (action) return action();\r\n        closePropMutation.mutate();\r\n    }\r\n\r\n    return (\r\n        <AlertDialog\r\n            motionPreset=\"slideInBottom\"\r\n            leastDestructiveRef={leastDestructiveRef}\r\n            onClose={onClose}\r\n            isOpen={isOpen}\r\n            isCentered\r\n            {...alertDialogProps}\r\n        >\r\n            <AlertDialogOverlay />\r\n\r\n            <AlertDialogContent>\r\n                <AlertDialogHeader>{headerMessage ? headerMessage : \"Confirm your action\"}</AlertDialogHeader>\r\n                <AlertDialogCloseButton />\r\n                <AlertDialogBody>\r\n                    {message ? message :\r\n                        \"Are you sure you want to proceed the action?\"}\r\n                </AlertDialogBody>\r\n                <AlertDialogFooter>\r\n                    <Button ref={leastDestructiveRef as any} onClick={onClose}>\r\n                        No\r\n                    </Button>\r\n                    <Button colorScheme=\"red\" ml={3} onClick={handleDelete} isLoading={closePropMutation.isLoading}>\r\n                        Yes\r\n                    </Button>\r\n                </AlertDialogFooter>\r\n            </AlertDialogContent>\r\n        </AlertDialog>\r\n    )\r\n}","import { Box, Button, Divider, Grid, GridItem, Spacer, Image, HStack, Flex, VStack, Avatar, useToast, BoxProps, Center, Spinner, useDisclosure } from '@chakra-ui/react';\r\nimport React from 'react'\r\nimport { BsStarFill, BsStar, BsHeart, BsHeartFill } from 'react-icons/bs';\r\nimport { useMutation, useQuery } from 'react-query';\r\nimport { Link, Redirect, useHistory, useLocation, useParams } from 'react-router-dom';\r\nimport { toggleCloseProperty, fetchPropertyById, fetchReviewsForProperty, toggleLike } from '../API';\r\nimport PickRangeDay from '../Components/NavComponents/PickRangeDay';\r\nimport FloatingForm from '../Components/FloatingForm';\r\nimport MyRoomBadge, { defaultRoomBadges } from '../Components/SingleRoomComponents/MyRoomBadge';\r\nimport { AuthContext } from '../Contexts/AuthContext';\r\nimport { ActionAlert } from '../Components/AlertDialog';\r\n\r\ntype SlugProps = {\r\n    slug: string;\r\n}\r\n\r\ntype SingleRoomProps = {\r\n    initRoom: Room;\r\n}\r\n\r\nconst SingleRoom: React.FC<SingleRoomProps> = ({ initRoom, children }) => {\r\n    const auth = React.useContext(AuthContext);\r\n\r\n    // const [room, setRoom] = React.useState<Room>();\r\n    const [bookInfo, setBookInfo] = React.useState<BookingInfo>({ guest: 0, children: 0 });\r\n    const [didLike, setDidLike] = React.useState(false);\r\n\r\n    const { slug } = useParams<SlugProps>();\r\n    const toast = useToast();\r\n    const history = useHistory();\r\n\r\n    const alertDeleteDialog = useDisclosure();\r\n    const cancelRef = React.useRef(null);\r\n\r\n    const { data, isError, error, isLoading } = useQuery([\"property\", slug],\r\n        () => {\r\n            return fetchPropertyById(slug);\r\n        },\r\n        {\r\n            staleTime: 1000 * 60 * 3,\r\n            retry: 2,\r\n            onError: (error) => {\r\n                console.log(error);\r\n            },\r\n            onSuccess: (rs) => {\r\n                if (rs.data.liked) setDidLike(rs.data.liked);\r\n                console.log(rs.data);\r\n                // setRoom({ ...rs.data, roomBadges: badges });\r\n                setBookInfo(bi => ({ ...bi, roomId: rs.data.id }))\r\n            },\r\n            onSettled: () => {\r\n            }\r\n        });\r\n\r\n    const room = data?.data;\r\n\r\n    const likeMutation = useMutation(toggleLike, {\r\n        onSuccess: (res) => {\r\n            setDidLike(res.data.liked);\r\n            toast({\r\n                description: res.data.liked ? \"Saved room\" : \"Removed from wishlist\",\r\n                status: \"info\",\r\n                duration: 1000\r\n            });\r\n        },\r\n        onError: (error) => console.log(error)\r\n    })\r\n\r\n    const updateDate = (from?: Date, to?: Date) => {\r\n        setBookInfo(s => ({\r\n            ...s,\r\n            bookFromDate: from,\r\n            bookToDate: to\r\n        }));\r\n    }\r\n\r\n    const updatePeople = (adult: number, children: number) => {\r\n        setBookInfo((s) => ({\r\n            ...s,\r\n            guest: adult,\r\n            children: children,\r\n        }));\r\n    }\r\n\r\n    const handleLike = () => {\r\n        if (!room) return;\r\n        if (!auth.user) {\r\n            toast({\r\n                description: \"Login is required\",\r\n                status: \"info\",\r\n                duration: 1000\r\n            });\r\n            return;\r\n        }\r\n        likeMutation.mutate({ roomId: room.id, token: auth.user.token })\r\n    }\r\n\r\n    let location = useLocation();\r\n\r\n    const handleEditProp = () => {\r\n        history.push({ ...location, pathname: `/host/publish`, search: `?id=${room?.id}` });\r\n    }\r\n\r\n    const handleLocationOnClick = (location: string) => {\r\n        history.push({\r\n            pathname: \"/rooms\",\r\n            state: {\r\n                search: {\r\n                    city: location,\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    if (isLoading) return (\r\n        <Center><Spinner /></Center>\r\n    )\r\n\r\n    if (room) return (\r\n        <Box>\r\n            <Divider my=\"5\" />\r\n            {/* title */}\r\n            <Box as=\"h2\" fontSize=\"3xl\" fontWeight=\"semibold\">{room.name}</Box>\r\n\r\n            {/* rating, location, like button */}\r\n            <Box d=\"flex\" mt=\"1\" flexDir={{ base: \"column\", sm: \"row\" }} justifyItems=\"baseline\">\r\n                <Box d=\"flex\" alignItems=\"start\">\r\n                    <Box d=\"flex\" flexDir={{ base: \"column\", sm: \"row\" }}>\r\n                        <Box d=\"flex\" flexDir={{ base: \"row\" }}>\r\n                            {Array(5).fill(\"\").map((_, i) => {\r\n                                return (i < Math.round(room.totalStar / room.totalReview) ? <BsStarFill key={i} colorRendering=\"teal.400\" /> : <BsStar key={i} />)\r\n                            })}\r\n                        </Box>\r\n                        <Box as=\"span\" ml=\"2\" color=\"gray.500\">{room.totalReview} reviews</Box>\r\n                    </Box>\r\n                    <Box mx=\"4\">&bull;</Box>\r\n                    <Button variant=\"link\" onClick={() => handleLocationOnClick(room.location)}>\r\n                        {room.location}\r\n                    </Button>\r\n                </Box>\r\n\r\n                <Spacer />\r\n                {(room.ownerInfo.userId === auth.user?.userId || auth.user?.roles.includes(\"Admin\")) &&\r\n                    <>\r\n                        {room.propertyStatus == \"IsActive\" ?\r\n                            <Button colorScheme=\"red\" mr=\"2\" onClick={alertDeleteDialog.onOpen}>\r\n                                Close this property\r\n                            </Button> :\r\n                            <Button colorScheme=\"green\" mr='2' onClick={alertDeleteDialog.onOpen}>\r\n                                Reopen this property\r\n                            </Button>\r\n                        }\r\n                        <Button onClick={() => { handleEditProp() }}>\r\n                            Edit\r\n                        </Button>\r\n                        <ActionAlert\r\n                            isOpen={alertDeleteDialog.isOpen}\r\n                            onClose={alertDeleteDialog.onClose}\r\n                            propertyId={room.id}\r\n                            leastDestructiveRef={cancelRef}\r\n                            headerMessage={room.propertyStatus == \"IsActive\" ? \"Close your property\" : \"Reopen this property\"}\r\n                            message={room.propertyStatus == \"IsActive\" ?\r\n                                \"Closing this property will prevent further reservations. Please confirm your action!\" :\r\n                                \"Reopen this property will allow guest to find your property and make reservations\"}\r\n                        > </ActionAlert>\r\n                    </>\r\n                }\r\n                <Button alignSelf=\"start\" variant=\"ghost\"\r\n                    onClick={() => handleLike()}\r\n                    leftIcon={(!didLike || !auth.user) ? <BsHeart /> : <BsHeartFill color=\"red\" />}>Like</Button>\r\n            </Box>\r\n\r\n            {/* image display */}\r\n            <Box borderRadius=\"lg\" overflow=\"hidden\" mt=\"4\">\r\n                <Grid gap=\"2\" h=\"40%\" maxH=\"450px\" objectFit=\"cover\"\r\n                    templateRows=\"repeat(2, 1fr)\"\r\n                    templateColumns=\"repeat(4, 1fr)\">\r\n                    {room.images.slice(0, 5).map((image, i) => {\r\n                        return (\r\n                            <GridItem key={i} colSpan={i === 0 ? 2 : 1} rowSpan={i === 0 ? 2 : 1} overflow=\"hidden\" >\r\n                                <Image src={image.url} h=\"auto\" height=\"100%\" w=\"100%\" objectFit=\"cover\" loading=\"lazy\"></Image>\r\n                            </GridItem>\r\n                        )\r\n                    })}\r\n                </Grid>\r\n            </Box>\r\n\r\n            {/* info  */}\r\n            <Box mt=\"4\" d={[\"flex\", \"flex\", \"flex\", \"block\"]} flexDir=\"column-reverse\">\r\n                {/* floating form */}\r\n                <Box w={[\"100%\", \"100%\", \"100%\", \"35%\"]} boxShadow=\"2xl\" mt={{ base: \"4\", lg: \"0\" }} top=\"30%\" float={{ lg: \"right\" }} position={{ lg: \"sticky\" }}\r\n                    borderRadius=\"lg\"\r\n                    display=\"inline-flex\" flexDir=\"column\" zIndex={1} borderWidth=\"thin\"\r\n                    p=\"4\" alignContent=\"center\" justifyContent=\"center\">\r\n                    <FloatingForm room={room} bookInfo={bookInfo} updateDate={updateDate} updatePeople={updatePeople} />\r\n                </Box>\r\n                {/* Detail information about this room */}\r\n                <Box w={[\"100%\", \"100%\", \"100%\", \"60%\"]}>\r\n                    {/* name, avatar */}\r\n                    <Flex alignItems=\"center\">\r\n                        <VStack alignItems=\"start\">\r\n                            <Box as=\"h1\" fontSize=\"2xl\" fontWeight=\"semibold\" >{\"Owner: \" + room.ownerInfo.name}</Box>\r\n                            <HStack>\r\n                                {room.services && room.services.map((s, i) => {\r\n                                    return (\r\n                                        <Box\r\n                                            key={i}\r\n                                            color=\"gray.500\"\r\n                                            fontWeight=\"semibold\"\r\n                                            letterSpacing=\"wide\"\r\n                                            fontSize=\"xs\"\r\n                                            textTransform=\"uppercase\"\r\n                                            ml=\"2\"\r\n                                            isTruncated\r\n                                        >{s.serviceName} {room.services[room.services.length - 1] !== s && <>&bull;</>} </Box>\r\n                                    )\r\n                                })}\r\n                            </HStack>\r\n                        </VStack>\r\n\r\n                        <Spacer />\r\n                        <Avatar name={room.ownerInfo.name} src={room.ownerInfo.profileImageUrl}\r\n                            cursor=\"pointer\"\r\n                            onClick={() => alert(\"go to user's page\")}\r\n                        />\r\n                    </Flex>\r\n                    <Divider my=\"3\" />\r\n\r\n                    {/* room badges */}\r\n                    {badges?.map((b, i) => {\r\n                        return <MyRoomBadge id={b.id} key={i}></MyRoomBadge>\r\n                    })}\r\n                    <Divider my=\"3\" />\r\n\r\n                    {/* room introduction */}\r\n                    <Box as=\"h5\" fontWeight=\"semibold\" fontSize=\"2xl\">More about room</Box>\r\n                    <Box as=\"p\">{room.introduction}</Box>\r\n                    <Divider my=\"3\" />\r\n\r\n                    {/* another datepicker here */}\r\n                    <Box w=\"100%\" display={{ base: \"none\", sm: \"block\" }}>\r\n                        <PickRangeDay schedules={{ reservedDates: room.reservedDates, dayOff: room.daysOff }} updateDate={updateDate} />\r\n                    </Box>\r\n                </Box>\r\n\r\n            </Box>\r\n            <Divider my=\"5\" />\r\n            <ReviewDisplay propId={room.id} />\r\n        </Box>\r\n    )\r\n    return <></>\r\n}\r\n\r\ntype ReviewDisplayProps = {\r\n    propId: string;\r\n}\r\n\r\nconst ReviewDisplay = (props: ReviewDisplayProps & BoxProps) => {\r\n    const { propId, ...boxProps } = props;\r\n\r\n    const fetchReviews = useQuery([\"reviews\", propId], () => fetchReviewsForProperty(propId), {\r\n        retry: 2,\r\n        onSuccess: (data) => {\r\n        },\r\n    });\r\n\r\n    const reviews: Review[] = fetchReviews.data?.data ? fetchReviews.data.data : [];\r\n    let totalStar = 0;\r\n    reviews.forEach(r => totalStar += r.starCount);\r\n\r\n    return (\r\n        <Box>\r\n            <Box d=\"flex\" gridGap=\"2\" alignItems=\"baseline\" fontWeight=\"semibold\" fontSize=\"2xl\" mb=\"5\">\r\n                <BsStarFill />\r\n                <Box as=\"h2\"> {reviews.length != 0 ? (totalStar / reviews.length).toPrecision(2) : 0} ({reviews.length} reviews)</Box>\r\n            </Box>\r\n\r\n            {fetchReviews.data?.data.length === 0\r\n                ? <Box fontWeight=\"light\">Looks like this property does not have any reviews</Box>\r\n                :\r\n                <Box d='flex' flexWrap=\"wrap\" gridGap=\"5\">\r\n                    {fetchReviews.data?.data.map(r => <ReviewComment review={r} key={r.reviewId} />)}\r\n                </Box>\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst testReview: Review = {\r\n    user: {\r\n        name: \"Test user name\",\r\n        userId: \"123\",\r\n        profileImageUrl: \"\",\r\n        email: \"email@mail.com\",\r\n        phoneNumber: \"0-9\"\r\n    },\r\n    comment: \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Id, repellat. Harum, facilis corrupti eligendi laborum minus nihil et a mollitia!\",\r\n    propertyId: \"1\",\r\n    reviewId: \"123123\",\r\n    starCount: 4,\r\n    timeCreated: \"20202020\",\r\n    timeUpdated: \"20202020\"\r\n}\r\n\r\ntype ReviewCommentProps = {\r\n    review: Review;\r\n}\r\n\r\nconst ReviewComment = (props: ReviewCommentProps & BoxProps) => {\r\n    const { review, ...boxProps } = props;\r\n    return (\r\n        <Box {...boxProps} flex=\"1 1 25em\">\r\n            <Box d=\"flex\" flexDir=\"row\" gridGap=\"2\">\r\n                <Avatar name={review.user?.name} src={review.user.profileImageUrl}></Avatar>\r\n                <Box d=\"flex\" flexDir=\"column\">\r\n                    <Box as=\"h4\" fontWeight=\"bold\">{review.user.name}</Box>\r\n                    <Box as=\"h4\" fontWeight=\"light\">{review.timeUpdated}</Box>\r\n                </Box>\r\n            </Box>\r\n            <Box as=\"h4\" >{review.comment}</Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst badges: RoomBadge[] = defaultRoomBadges;\r\n\r\nexport default SingleRoom;","import { Alert, AlertDescription, AlertIcon, AlertTitle, Box } from '@chakra-ui/react'\r\nimport React from 'react'\r\nimport { useLocation } from 'react-router'\r\n\r\ntype ErrorLocationState = {\r\n    message: string;\r\n}\r\n\r\nconst ErrorPage = () => {\r\n    const location = useLocation<ErrorLocationState>();\r\n    if (location.state) {\r\n        const { message } = location.state;\r\n        return <Alert\r\n            status=\"error\"\r\n            variant=\"subtle\"\r\n            flexDirection=\"column\"\r\n            alignItems=\"center\"\r\n            justifyContent=\"center\"\r\n            textAlign=\"center\"\r\n            height=\"200px\"\r\n        >\r\n            <AlertIcon boxSize=\"40px\" mr={0} />\r\n            <AlertTitle mt={4} mb={1} fontSize=\"lg\">\r\n                {message}\r\n            </AlertTitle>\r\n            <AlertDescription maxWidth=\"md\">\r\n                Look like you have some problems! Contact us for more info!\r\n                </AlertDescription>\r\n        </Alert>\r\n    }\r\n    return (\r\n        <Alert\r\n            status=\"info\"\r\n            variant=\"subtle\"\r\n            flexDirection=\"column\"\r\n            alignItems=\"center\"\r\n            justifyContent=\"center\"\r\n            textAlign=\"center\"\r\n            height=\"200px\"\r\n        >\r\n            <AlertIcon boxSize=\"40px\" mr={0} />\r\n            <AlertTitle mt={4} mb={1} fontSize=\"lg\">\r\n                Not Found!\r\n            </AlertTitle>\r\n            <AlertDescription maxWidth=\"md\">\r\n                The page you are looking does not exist or was deleted\r\n                </AlertDescription>\r\n        </Alert>\r\n    )\r\n}\r\n\r\nexport default ErrorPage;","import { Badge, Box, Image, LinkOverlay, Text, Link, BoxProps, useColorModeValue, Spacer, Center } from '@chakra-ui/react';\r\nimport React from 'react';\r\nimport { BsStar, BsStarFill } from 'react-icons/bs';\r\nimport { Link as LinkReact } from 'react-router-dom';\r\n\r\ntype RoomCardProps = {\r\n    room: RoomCard;\r\n    isSaved: boolean;\r\n}\r\n\r\nconst RoomCard = ({ room, isSaved, ...props }: RoomCardProps & BoxProps) => {\r\n    console.log(room);\r\n    return (\r\n        <Box borderWidth=\"1px\" borderRadius=\"lg\" {...props} bg={useColorModeValue(\"gray.100\", \"gray.900\")} d=\"flex\" flexDir=\"column\">\r\n            <Link as={LinkReact} to={\"/rooms/\" + room.id} >\r\n                <Box minH=\"200px\" maxH=\"300px\" overflow=\"hidden\">\r\n                    <Image src={room.thumbnailUrl}\r\n                        height=\"100%\"\r\n                        objectFit=\"cover\" fit=\"cover\"\r\n                        fallback={<Box bgColor=\"gray\" color=\"gray\" />}\r\n                        alt={room.thumbnailAlt} overflow=\"hidden\"\r\n                        style={{ transition: \"ease 0.5s\" }}\r\n                        _hover={{ transform: \"scale(1.1)\" }} />\r\n                </Box>\r\n            </Link>\r\n\r\n            <Spacer />\r\n\r\n            <Box p=\"4\" d=\"flex\" flexDir=\"column\">\r\n                {!isSaved &&\r\n                    <Box d=\"flex\" alignItems=\"baseline\">\r\n                        <Badge borderRadius=\"full\" px=\"2\" colorScheme=\"teal\">\r\n                            New\r\n                        </Badge>\r\n                        {room.services && room.services.map((s, key) => {\r\n                            return (\r\n                                <Box\r\n                                    key={key}\r\n                                    color=\"gray.500\"\r\n                                    fontWeight=\"semibold\"\r\n                                    letterSpacing=\"wide\"\r\n                                    fontSize=\"xs\"\r\n                                    textTransform=\"uppercase\"\r\n                                    ml=\"2\"\r\n                                    isTruncated\r\n                                >{s.serviceName} {room.services[room.services.length - 1] !== s && <>&bull;</>} </Box>\r\n                            )\r\n                        })}\r\n                    </Box>\r\n                }\r\n                <Box\r\n                    mt=\"1\"\r\n                    fontWeight=\"semibold\"\r\n                    as=\"h4\"\r\n                    lineHeight=\"tight\"\r\n                >\r\n                    {room.name}\r\n                </Box>\r\n\r\n                {!isSaved &&\r\n                    <Box\r\n                        as={\"p\"}\r\n                        lineHeight=\"tight\"\r\n                        textOverflow=\"ellipsis\"\r\n                        overflow=\"hidden\"\r\n                    >\r\n                        {room.description.length > 100 ? room.description.substring(0, 100) + \"...\" : room.description}\r\n                    </Box>\r\n                }\r\n\r\n                <Box d='flex' flexWrap=\"wrap\" justifySelf=\"end\" alignItems=\"baseline\" flexDir=\"row\">\r\n                    <Box as=\"h4\" fontSize=\"3xl\">\r\n                        {room.formattedPrice + \"$\"}\r\n                    </Box>\r\n                    <Box as=\"span\" color=\"gray.500\" fontStyle=\"italic\">\r\n                        / per night\r\n                    </Box>\r\n\r\n                    <Box d=\"flex\" alignItems=\"center\" alignSelf=\"center\" ml=\"auto\">\r\n                        {Array(5).fill(\"\").map((_, i) => {\r\n                            return (i < Math.round(room.totalStar / room.totalReview) ? <BsStarFill key={i} colorRendering=\"teal.400\" /> : <BsStar key={i} />)\r\n                        })}\r\n                    </Box>\r\n                </Box>\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default RoomCard;","import { SimpleGrid, Box, SimpleGridProps } from '@chakra-ui/react'\r\nimport React from 'react'\r\nimport RoomCard from './RoomCard'\r\n\r\ntype RoomCardListProps = {\r\n    rooms?: RoomCard[];\r\n}\r\n\r\nconst RoomCardList: React.FC<RoomCardListProps & SimpleGridProps> = (props) => {\r\n    // rooms = defaultRooms;\r\n    const { rooms, ...sgProps } = props;\r\n\r\n    if (!rooms || rooms.length === 0) return <Box>\r\n        Not found any room\r\n    </Box>\r\n\r\n    return (\r\n        <SimpleGrid spacing=\"8\" columns={[1, 1, 1, 2, 3]} {...sgProps}>\r\n            {rooms && rooms.map((r, index) => {\r\n                return (\r\n                    <RoomCard key={r.id} room={r} isSaved={false}></RoomCard>\r\n                )\r\n            })}\r\n        </SimpleGrid>\r\n    )\r\n}\r\n\r\nconst defaultRoom: RoomCard = {\r\n    id: \"random-id-12321\",\r\n    name: \"Crystal palace\",\r\n    thumbnailUrl: \"https://picsum.photos/1100/1000?random=1\",\r\n    thumbnailAlt: \"rear view house with pool\",\r\n    description: \"Best place in townBest place in townBest place in townBest \",\r\n    location: \"Dark side, the moon\",\r\n    totalReview: 4,\r\n    totalStar: 23,\r\n    formattedPrice: 2021.00,\r\n    services: [],\r\n    propertyStatus: 'IsActive',\r\n}\r\n\r\nexport default RoomCardList;","import { Box, CircularProgress, Divider, HStack, InputLeftAddon, NumberDecrementStepper, NumberIncrementStepper, NumberInput, NumberInputField, NumberInputStepper, Portal, Slider, SliderFilledTrack, SliderThumb, SliderTrack, Spinner, Tag, TagCloseButton, TagLabel, TagProps, useColorModeValue } from '@chakra-ui/react';\r\nimport React from 'react'\r\nimport { useQuery } from 'react-query';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { fetchPropertiesView } from '../API';\r\nimport RoomCardList from '../Components/FilterComponents/RoomCardList';\r\nimport SearchBar from '../Components/NavComponents/SearchBar';\r\nimport { MdGraphicEq } from \"react-icons/md\";\r\n\r\ntype RoomsPageLocationState = {\r\n    type?: PropertyTypeType;\r\n    search?: SearchQuery;\r\n}\r\n\r\n\r\nconst RoomsPage = () => {\r\n    const queryStr = new URLSearchParams(useLocation().search);\r\n    const searchBoxColor = useColorModeValue(\"gray.100\", \"gray.900\");\r\n\r\n    const location = useLocation<RoomsPageLocationState>();\r\n\r\n    const [search, setSearch] = React.useState<SearchQuery>({ childrenNum: 0, guestNum: 0 });\r\n    const [type, setType] = React.useState<PropertyTypeType>();\r\n\r\n    const updateSearch = (search: SearchQuery) => {\r\n        setSearch(search);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (location.state !== undefined && location.state.search) {\r\n            setSearch(location.state.search)\r\n        }\r\n        if (location.state !== undefined && location.state.type) {\r\n            setType(location.state.type);\r\n        }\r\n    }, [])\r\n\r\n    let queryKeys = [type?.id, search];\r\n\r\n    const { data, isLoading, error, refetch, remove } = useQuery([\"propertyView\", queryKeys], () => fetchPropertiesView(type?.id, search),\r\n        {\r\n            staleTime: 1000 * 60\r\n        });\r\n\r\n    if (error) {\r\n        return <>Error</>\r\n    }\r\n\r\n    return (\r\n        <Box d=\"flex\" flexDir=\"column\" gridGap=\"5\">\r\n            <Box position={{ lg: \"sticky\" }} top={0}\r\n                bgColor={searchBoxColor} d=\"flex\" flexDir=\"column\"\r\n                boxShadow=\"2xl\"\r\n                gridGap=\"5\" pb=\"5\"\r\n            >\r\n                <SearchBar search={search}\r\n                    updateSearch={updateSearch}\r\n                    isLoading={isLoading}\r\n                    onClickSearch={() => { remove(); refetch(); }}\r\n                />\r\n                <HStack>\r\n                    {/* type tag */}\r\n                    {type && <QueryTag label={\"Property type: \" + type.propertyType}\r\n                        onClose={() => { setType(undefined) }}\r\n                    />}\r\n\r\n                    {/* city tag */}\r\n                    {search.city && <QueryTag label={search.city}\r\n                        onClose={() => { setSearch(s => ({ ...s, city: \"\" })) }}\r\n                    />}\r\n\r\n                    {/* from date tag */}\r\n                    {search.from && <QueryTag label={\"From: \" + search.from.toLocaleDateString()}\r\n                        onClose={() => { setSearch(s => ({ ...s, from: undefined })) }}\r\n                    />}\r\n\r\n                    {/* to date tag */}\r\n                    {search.to && <QueryTag label={\"To: \" + search.to.toLocaleDateString()}\r\n                        onClose={() => { setSearch(s => ({ ...s, to: undefined })) }}\r\n                    />}\r\n\r\n                    {/* guest num tag */}\r\n                    {search.guestNum > 0 && <QueryTag label={search.guestNum + \" guests\"}\r\n                        onClose={() => { setSearch(s => ({ ...s, guestNum: 0 })) }}\r\n                    />}\r\n\r\n                    {/* children num tag */}\r\n                    {search.childrenNum > 0 && <QueryTag label={search.childrenNum + \" children\"}\r\n                        onClose={() => { setSearch(s => ({ ...s, childrenNum: 0 })) }}\r\n                    />}\r\n                </HStack>\r\n            </Box>\r\n            <Box as=\"h3\" mb=\"5\" fontSize=\"4xl\" fontWeight=\"bold\" >Find place that fits you most...</Box>\r\n            {isLoading ?\r\n                <Spinner color=\"green\" size=\"lg\" alignSelf=\"center\" />\r\n                :\r\n                <RoomCardList rooms={data?.data}></RoomCardList>\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\ntype QueryTagProps = {\r\n    label: string;\r\n    onClose: () => void;\r\n}\r\nconst QueryTag = (props: QueryTagProps & TagProps) => {\r\n    const { label, onClose, ...tagProps } = props;\r\n\r\n    return (\r\n        <Tag size=\"lg\" colorScheme=\"green\" {...tagProps}>\r\n            <TagLabel>\r\n                {props.label}\r\n            </TagLabel>\r\n            <TagCloseButton onClick={() => props.onClose()} />\r\n        </Tag>\r\n    );\r\n}\r\n\r\nexport default RoomsPage;","import { Box, BoxProps, Center, chakra, Divider, Heading, HeadingProps, Text, HTMLChakraProps, Link, SimpleGrid, SimpleGridProps, Stack, StackDivider, TextProps, useColorModeValue, useToken, ButtonGroup, IconButton, ButtonGroupProps } from '@chakra-ui/react'\r\nimport React from 'react'\r\nimport { BsHeartFill } from 'react-icons/bs';\r\nimport { FaGithub, FaFacebook, FaReddit } from 'react-icons/fa';\r\n// import { Logo } from '../../Logo';\r\n\r\nconst Footer: React.FC<BoxProps> = ({ children, ...props }) => {\r\n    return (\r\n        <Box as=\"footer\" role=\"contentinfo\" py=\"12\" {...props}>\r\n            <Stack spacing=\"10\" divider={<StackDivider />}>\r\n                {/* <Stack direction={{ base: 'column', lg: 'row' }} spacing={{ base: '10', lg: '28' }}>\r\n                    <Box flex=\"1\">\r\n                        <Logo />\r\n                    </Box>\r\n                    <Stack direction={{ base: 'column', md: 'row' }} spacing={{ base: '10', md: '20' }}>\r\n                        <LinkGrid spacing={{ base: '10', md: '20', lg: '28' }} flex=\"1\" />\r\n                    </Stack>\r\n                </Stack> */}\r\n                <Stack\r\n                    direction={{ base: 'column-reverse', md: 'row' }}\r\n                    justifyContent=\"space-between\"\r\n                    alignItems=\"center\"\r\n                >\r\n                    <Copyright />\r\n                    <SocialMediaLinks />\r\n                </Stack>\r\n            </Stack>\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst Copyright = (props: TextProps) => (\r\n    <Text fontSize=\"sm\" {...props}>\r\n        &copy; {new Date().getFullYear()} Hai, Inc. All rights reserved.\r\n    </Text>\r\n)\r\n\r\nconst openSocio = (to: \"fb\" | \"github\" | \"reddit\") => {\r\n    let url = \"\";\r\n    if (to === \"fb\") url = \"https://facebook.com\";\r\n    else if (to === \"github\") url = \"https://github.com/haihaibeo\";\r\n    else if (to === \"reddit\") url = \"https://reddit.com/user/haihaibeo\";\r\n\r\n    window.open(url, '_blank')!.focus();\r\n}\r\n\r\nconst SocialMediaLinks = (props: ButtonGroupProps) => (\r\n    <ButtonGroup variant=\"ghost\" color=\"gray.600\" {...props}>\r\n        <IconButton as=\"a\" href=\"#\" aria-label=\"Facebook\" onClick={() => openSocio('fb')} icon={<FaFacebook fontSize=\"20px\" />} />\r\n        <IconButton as=\"a\" href=\"#\" aria-label=\"GitHub\" onClick={() => openSocio('github')} icon={<FaGithub fontSize=\"20px\" />} />\r\n        <IconButton as=\"a\" href=\"#\" aria-label=\"Reddit\" onClick={() => openSocio('reddit')} icon={<FaReddit fontSize=\"20px\" />} />\r\n    </ButtonGroup>\r\n)\r\n\r\nexport default Footer;","import { Avatar, Box, BoxProps, Button, Divider, Flex, Grid, HStack, Icon, IconButton, ListItem, Modal, ModalBody, ModalContent, ModalHeader, ModalOverlay, ModalProps, SimpleGrid, Spacer, Stack, Textarea, UnorderedList, useColorModeValue, useDisclosure, useToast, VStack } from '@chakra-ui/react';\r\nimport React from 'react'\r\nimport { BsStar, BsStarFill } from 'react-icons/bs';\r\nimport { FaCheck, FaStar, FaUserShield } from 'react-icons/fa';\r\nimport { useMutation, useQuery } from 'react-query';\r\nimport { useLocation } from 'react-router';\r\nimport { deleteReservation, fetchPropertiesSaved, fetchUserReservation, postReview, toggleLike, useQueryParam } from '../API';\r\nimport RoomCard from '../Components/FilterComponents/RoomCard';\r\nimport { AuthContext } from '../Contexts/AuthContext';\r\n\r\n\r\nconst ProfilePage = () => {\r\n    const { user } = React.useContext(AuthContext);\r\n\r\n    let query = useQueryParam();\r\n    let view = query.get(\"view\")?.toLowerCase();\r\n\r\n    return (\r\n        <Box d=\"flex\" flexDir={{ base: \"column\", md: \"row\" }}>\r\n            {/* LEFT */}\r\n            <Box w={{ base: \"100%\", md: \"25%\" }} minW=\"300px\">\r\n                <Box d=\"flex\" overflow=\"hidden\" borderWidth=\"1px\" borderRadius=\"lg\" p=\"4\" flexDir={{ base: \"row-reverse\", md: \"column\" }} spacing=\"2\">\r\n                    <VStack alignSelf=\"center\" justifySelf=\"start\">\r\n                        <Avatar name={user?.name} boxSize={{ base: \"20\", md: \"40\" }}></Avatar>\r\n                        <Button variant=\"link\" my=\"2\" fontSize=\"sm\">Update photo</Button>\r\n                    </VStack>\r\n\r\n                    <VStack alignItems=\"start\" spacing=\"2\">\r\n                        <Icon as={FaUserShield} boxSize=\"8\" />\r\n                        <Box as=\"h4\" fontWeight=\"bold\" fontSize=\"lg\" fontFamily=\"mono\">Identity verification</Box>\r\n                        <Box as=\"h4\">Show others you’re really you with the identity verification badge.</Box>\r\n\r\n                        <Divider />\r\n\r\n                        <Box as=\"h4\" fontWeight=\"bold\" fontSize=\"lg\" fontFamily=\"mono\">{user?.name + \" confirmed\"}</Box>\r\n                        <Box d=\"flex\" flexDir=\"row\" alignItems=\"baseline\">\r\n                            <FaCheck />\r\n                            <Box as=\"h4\" ml=\"4\">Email confirmed</Box>\r\n                        </Box>\r\n                        <Box d=\"flex\" flexDir=\"row\" alignItems=\"baseline\">\r\n                            <FaCheck />\r\n                            <Box as=\"h4\" ml=\"4\">Phone confirmed</Box>\r\n                        </Box>\r\n                    </VStack>\r\n                </Box>\r\n            </Box>\r\n\r\n            <Spacer minW=\"2\" />\r\n\r\n            {/* RIGHT */}\r\n            <Box w={{ base: \"100%\", md: \"65%\" }}>\r\n                {(view === \"likes\" || view == null) && <UserLikesProperties></UserLikesProperties>}\r\n                {view === \"notifications\" && <Notifications></Notifications>}\r\n                {view === \"reservations\" && <Reservations></Reservations>}\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\n\r\ntype ReviewModalProps = {\r\n    reservationId: string;\r\n    propId: string;\r\n}\r\nconst ReviewModal = (modalProps: ModalProps & ReviewModalProps) => {\r\n    const [starHover, setStarHover] = React.useState(0);\r\n    const [starReview, setStarReview] = React.useState(0);\r\n    const [comment, setComment] = React.useState<string>();\r\n    const starColor = useColorModeValue(\"red\", \"yellow\");\r\n\r\n    const toast = useToast();\r\n\r\n    const { onClose } = modalProps;\r\n\r\n    const mutateReview = useMutation(postReview, {\r\n        onSuccess: (res) => {\r\n            console.log(res.data);\r\n            toast({\r\n                description: \"Successfully sent review\",\r\n                status: \"success\"\r\n            })\r\n        },\r\n        onError: (e) => {\r\n            console.log(e);\r\n        }\r\n    });\r\n    const sendReview = () => {\r\n        mutateReview.mutate({\r\n            propertyId: modalProps.propId,\r\n            starCount: starReview,\r\n            reviewComment: comment,\r\n            reservationId: modalProps.reservationId\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Modal {...modalProps} onClose={() => { setStarReview(0); onClose(); }}>\r\n            <ModalOverlay />\r\n            <ModalContent>\r\n                <ModalHeader>Write a review</ModalHeader>\r\n                <ModalBody>\r\n                    <Flex flexDir=\"column\" gridGap=\"2\">\r\n                        <Box>\r\n                            {Array(5).fill(5).map((_, index) => {\r\n                                return (\r\n                                    <IconButton variant=\"ghost\" aria-label=\"star\" key={index}\r\n                                        onClick={() => { setStarReview(index + 1) }}\r\n                                        _focus={{ borderWidth: \"1px\" }}\r\n                                        borderRadius=\"full\" onMouseOver={() => setStarHover(index + 1)} onMouseLeave={() => setStarHover(0)}\r\n                                        icon={starHover > index || starReview > index ? <BsStarFill color={starColor} /> : <BsStar />} />)\r\n                            })}\r\n                        </Box>\r\n                        <Textarea size=\"md\" placeholder=\"Please describe some of your thoughts\"\r\n                            value={comment}\r\n                            onChange={(e) => setComment(e.target.value)}\r\n                        />\r\n                        <Button ml=\"auto\" isDisabled={starReview <= 0} onClick={sendReview}>Send</Button>\r\n                    </Flex>\r\n                </ModalBody>\r\n            </ModalContent>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nconst Reservations = (boxprops: BoxProps) => {\r\n    const reviewModal = useDisclosure();\r\n    const auth = React.useContext(AuthContext)\r\n    const toast = useToast();\r\n    const [propIdReview, setPropIdReview] = React.useState(\"\");\r\n\r\n    const { data, error, isError } = useQuery([\"reservations\", auth.user?.token], fetchUserReservation, {\r\n        onSuccess: (res) => {\r\n\r\n        },\r\n        retry: 2,\r\n    })\r\n\r\n    const deleteRsvMutate = useMutation<any, MessageResponse, any, any>(deleteReservation, {\r\n        onSuccess: () => { toast({ description: \"Reservation is canceled\", status: \"success\" }) },\r\n        onError: (error) => {\r\n            toast({ description: error.errors, status: \"success\" })\r\n        }\r\n    })\r\n\r\n    const handleDelete = (resId: string) => {\r\n        deleteRsvMutate.mutate(resId);\r\n    }\r\n\r\n    if (data?.data.length === 0) {\r\n        return <Box>\r\n            You don't have any reservations\r\n        </Box>\r\n    }\r\n\r\n    if (isError) return <Box>Something's wrong</Box>\r\n\r\n    return <Box {...boxprops}>\r\n        <Flex gridGap=\"2\" flexDir=\"column\">\r\n            <Box as={\"h1\"} fontFamily={\"heading\"} fontWeight=\"bold\" fontSize=\"4xl\" mb=\"3\">Your reservations</Box>\r\n            {data?.data.map(d =>\r\n                <Box borderWidth=\"1px\" p=\"2\"\r\n                    style={{ transition: \"ease 0.3s\" }}\r\n                    _hover={{ transform: \"scale(1.02)\" }}\r\n                    // eslint-disable-next-line react-hooks/rules-of-hooks\r\n                    bg={useColorModeValue('gray.100', 'gray.800')}\r\n                    borderRadius=\"10px\"\r\n                >\r\n                    <Flex key={d.id} w=\"100%\" flexDir=\"row\" gridGap=\"2\">\r\n                        <Stack w=\"100%\" gridGap=\"2\">\r\n                            <UnorderedList h=\"100%\">\r\n                                <Grid h=\"100%\" fontWeight=\"bold\" gridTemplateColumns={{ base: \"1fr\", md: \"1fr 1fr\" }} templateRows=\"auto\" gridGap=\"2\">\r\n                                    <ListItem><Box as=\"h3\">From Date: </Box></ListItem>\r\n                                    <Box fontWeight=\"light\">{d.fromDate}</Box>\r\n                                    <ListItem><Box as=\"h3\">To Date: </Box></ListItem>\r\n                                    <Box fontWeight=\"light\">{d.toDate}</Box>\r\n                                    <ListItem><Box as=\"h3\">Total Cost: </Box></ListItem>\r\n                                    <Box fontWeight=\"light\">{d.total}</Box>\r\n                                    <ListItem><Box as=\"h3\">Reserved from: </Box></ListItem>\r\n                                    <Box fontWeight=\"light\">{d.createdAt}</Box>\r\n                                    <ListItem><Box as=\"h3\">Reservations Status: </Box></ListItem>\r\n                                    <Box fontWeight=\"light\">{d.reservationStatus}</Box>\r\n                                    <ListItem><Box as=\"h3\">Payment Status: </Box></ListItem>\r\n                                    <Box fontWeight=\"light\">{d.paymentStatus}</Box>\r\n                                    <Button colorScheme=\"green\"\r\n                                        onClick={() => { setPropIdReview(d.property.id); reviewModal.onOpen(); }}>Write a review</Button>\r\n                                    <Button colorScheme=\"red\"\r\n                                        isDisabled={d.reservationStatus.toLowerCase() !== \"on reserved\"}\r\n                                        onClick={() => { handleDelete(d.id) }}>Cancel reservation</Button>\r\n                                </Grid>\r\n                            </UnorderedList>\r\n                        </Stack>\r\n                        <Box ml=\"auto\" >\r\n                            <Divider orientation=\"vertical\" borderColor=\"currentcolor\" />\r\n                        </Box>\r\n                        <RoomCard room={d.property} isSaved={true} flex='0 0 15em' borderWidth=\"0px\" />\r\n                    </Flex>\r\n                </Box>\r\n            )}\r\n            <ReviewModal isOpen={reviewModal.isOpen} isCentered onClose={reviewModal.onClose} reservationId=\"\" propId={propIdReview}>\r\n            </ReviewModal>\r\n        </Flex>\r\n    </Box>\r\n}\r\n\r\nconst UserLikesProperties = () => {\r\n    const { data } = useQuery(\"propertiesLiked\", () => fetchPropertiesSaved(), {\r\n        onSuccess: (res) => {\r\n        },\r\n        refetchOnMount: \"always\",\r\n    })\r\n\r\n    if (data?.data.length === 0) return <Box>Looks like you didn't save any room</Box>\r\n\r\n    return (\r\n        <Box>\r\n            <Box as={\"h1\"} fontFamily={\"heading\"} fontWeight=\"bold\" fontSize=\"4xl\" mb=\"3\">Rooms that you saved</Box>\r\n            <SimpleGrid spacing=\"4\" columns={{ base: 1, lg: 2 }}>\r\n                {data?.data.map(r => <RoomCard room={r} key={r.id} isSaved={true} />)}\r\n            </SimpleGrid>\r\n        </Box>\r\n    );\r\n}\r\n\r\nconst Notifications: React.FC = () => {\r\n    return (\r\n        <Box>Notification</Box>\r\n    )\r\n}\r\n\r\nexport default ProfilePage;","import { FormControl, FormLabel } from '@chakra-ui/form-control';\r\nimport { Input } from '@chakra-ui/input';\r\nimport { Box, BoxProps, Divider, SimpleGrid, VStack, Link, Flex, Spacer, Center } from '@chakra-ui/layout';\r\nimport { Button, chakra, CloseButton, IconButton, Image, NumberInput, NumberInputField, Slider, SliderFilledTrack, SliderThumb, SliderTrack, Spinner, Switch, useToast } from '@chakra-ui/react';\r\nimport { Select } from '@chakra-ui/select';\r\nimport { Textarea } from '@chakra-ui/textarea';\r\nimport React, { FC } from 'react'\r\nimport { FaMinus, FaPlus } from 'react-icons/fa';\r\nimport { useMutation, useQuery } from 'react-query';\r\nimport { Link as RouterLink, Redirect, RouteProps, SwitchProps, useLocation, useParams } from 'react-router-dom';\r\nimport { deleteImage, fetchCities, fetchPropertyById, fetchPropertyTypes, fetchServices, postImage, postRoom, useQueryParam } from '../API';\r\nimport { CityResponse } from '../Components/NavComponents/SearchBar';\r\n\r\n\r\ntype Country = {\r\n    id: string;\r\n    countryName: string;\r\n}\r\n\r\ntype QueryParams = {\r\n    isEditting?: boolean;\r\n    propId?: string;\r\n}\r\n\r\nconst getUniqeCountries = (res: CityResponse[]) => {\r\n    let countries: Country[] = [];\r\n    let indexes = new Set<string>();\r\n    for (let i of res) {\r\n        if (!indexes.has(i.countryId)) {\r\n            countries.push({ id: i.countryId, countryName: i.countryName });\r\n        }\r\n        indexes.add(i.countryId);\r\n    }\r\n    return countries;\r\n}\r\n\r\nconst PublishRoomPage: FC<BoxProps> = (props) => {\r\n    const toast = useToast();\r\n    const [queryParams, setQueryParams] = React.useState<QueryParams>({ isEditting: false });\r\n\r\n    const { data: resCities, isLoading, status } = useQuery<unknown, unknown, CityResponse[]>(\"cities\", fetchCities, {\r\n        staleTime: 1000 * 60 * 10,\r\n        onSuccess: (res) => {\r\n            console.log(res);\r\n            let ctr = getUniqeCountries(res)\r\n            setCountries(ctr);\r\n        }\r\n    });\r\n    const { data: resTypes, isError } = useQuery<unknown, unknown, PropertyTypeType[]>(\"propertypeList\", fetchPropertyTypes, {\r\n        staleTime: 1000 * 60 * 10,\r\n        onSuccess: () => { console.log(\"got types\") }\r\n    });\r\n    const serviceQuery = useQuery(\"services\", fetchServices, {\r\n        onSuccess: (rs) => {\r\n            console.log(rs.data);\r\n        },\r\n        onError: (e) => console.log(e),\r\n    });\r\n\r\n    const editingProp = useQuery([\"property\", queryParams.propId], () => {\r\n        if (queryParams.propId) return fetchPropertyById(queryParams.propId)\r\n    }, {\r\n        onSuccess: (rs) => {\r\n            console.log(rs?.data);\r\n            if (rs?.data) {\r\n                const editing = rs.data;\r\n                setRoom(r => ({\r\n                    ...r,\r\n                    name: editing.name,\r\n                    basePrice: editing.formattedPrice,\r\n                    cleaningFee: editing.cleaningFee,\r\n                    description: editing.description,\r\n                    introdution: editing.introduction,\r\n                    serviceFee: editing.serviceFee,\r\n                    maxGuest: editing.maxGuest,\r\n                    images: editing.images,\r\n                }));\r\n            }\r\n        },\r\n        refetchOnMount: false,\r\n        refetchOnReconnect: false,\r\n        refetchOnWindowFocus: false\r\n    })\r\n\r\n    const [countries, setCountries] = React.useState<Country[] | undefined>(resCities && getUniqeCountries(resCities));\r\n\r\n    const query = useQueryParam();\r\n    let location = useLocation();\r\n\r\n    // check editting property if location changes\r\n    React.useEffect(() => {\r\n        const id = query.get(\"id\")?.toLocaleLowerCase();\r\n        if (id) {\r\n            console.log(id);\r\n            setQueryParams({ propId: id, isEditting: true });\r\n        }\r\n        return function cleanup() {\r\n            setQueryParams({ propId: undefined, isEditting: false });\r\n        }\r\n    }, [location])\r\n\r\n    const [room, setRoom] = React.useState<PublishRoomState>({\r\n        cityId: \"1\",\r\n        countryId: \"\",\r\n        description: \"Test description\",\r\n        images: [\r\n            {\r\n                url: \"https://picsum.photos/1100/1000?random=1\",\r\n                alt: \"alt\",\r\n                deleteHash: \"delHash\"\r\n            },\r\n            {\r\n                url: \"https://picsum.photos/1100/1000?random=2\",\r\n                alt: \"alt\",\r\n                deleteHash: \"delHash\"\r\n            },\r\n            {\r\n                url: \"https://picsum.photos/1100/1000?random=3\",\r\n                alt: \"alt\",\r\n                deleteHash: \"delHash\"\r\n            },\r\n            {\r\n                url: \"https://picsum.photos/1100/1000?random=10\",\r\n                alt: \"alt\",\r\n                deleteHash: \"delHash\"\r\n            },\r\n            {\r\n                url: \"https://picsum.photos/1100/1000?random=15\",\r\n                alt: \"alt\",\r\n                deleteHash: \"delHash\"\r\n            }\r\n        ],\r\n        maxGuest: 0,\r\n        propTypeId: \"\",\r\n        introdution: \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto minus ad assumenda dignissimos. Perferendis optio est nam accusamus aliquid voluptas?\",\r\n        name: \"Lorem ipsum\",\r\n        refundPercent: 100,\r\n        number: \"12\",\r\n        streetName: \"Street asdfgg\",\r\n        serviceIdList: [\"1\", \"2\"],\r\n        basePrice: 250,\r\n        cleaningFee: 10,\r\n        serviceFee: 0\r\n    });\r\n\r\n    const publish = useMutation(postRoom, {\r\n        onSuccess: (res) => {\r\n            toast({ description: res.data, status: \"success\" })\r\n        },\r\n        onError: (err) => {\r\n            console.log(err);\r\n            toast({ description: \"Something's wrong\", status: \"error\" })\r\n        },\r\n    })\r\n\r\n    const handlePublish = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n        e.preventDefault();\r\n        if (queryParams.isEditting) {\r\n\r\n        }\r\n        else {\r\n            publish.mutate(room);\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        return function cleanup() { localStorage.removeItem(\"previewRoom\"); }\r\n    }, [])\r\n\r\n    const handleImagesInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files != null) {\r\n            const files = Array.from(e.target.files);\r\n            const formData = new FormData();\r\n\r\n            formData.append(\"image\", files[0]);\r\n            postImage(formData).then((msg) => msg.data).catch(e => console.log(e));\r\n            deleteImage(\"\").then(msg => console.log(msg.data));\r\n        }\r\n    }\r\n\r\n    const handleDeleteImage = (image: Image) => {\r\n        const imgs = room.images;\r\n        imgs.find((value, index) => {\r\n            if (value === image) delete imgs[index];\r\n        });\r\n        setRoom(r => ({ ...r, images: imgs }));\r\n    }\r\n\r\n    if (editingProp.isLoading) {\r\n        return (<Spinner />)\r\n    }\r\n\r\n    if (editingProp.isError) {\r\n        return <Redirect to=\"/error\" />\r\n    }\r\n\r\n    return (\r\n        <chakra.form>\r\n            <Box d='flex' flexDir=\"column\" mt=\"10\" {...props}>\r\n                <VStack spacing=\"8\" w=\"75%\" alignSelf=\"center\">\r\n                    <Box as=\"h1\" fontSize=\"3xl\" fontWeight=\"bold\" alignSelf=\"start\">{queryParams.propId ? \"Edit your property\" : \"Publish your new property\"}</Box>\r\n                    <Divider borderColor=\"currentcolor\" />\r\n\r\n                    {/* Property info */}\r\n                    <Box d={{ base: \"inline-block\", lg: \"flex\" }} flexDir=\"row\" w=\"100%\" fontWeight=\"medium\">\r\n                        <Box as=\"h2\" fontSize=\"lg\" w={{ base: \"100%\", lg: \"30%\" }} mb=\"5\">Property info</Box>\r\n\r\n                        <VStack alignItems=\"start\" w=\"100%\">\r\n                            <FormControl isRequired id=\"prop-name\">\r\n                                <FormLabel as=\"h2\" fontSize=\"md\">Property Name</FormLabel>\r\n                                <Input variant=\"filled\" required\r\n                                    value={room.name}\r\n                                    onChange={(e) =>\r\n                                        setRoom(r => ({\r\n                                            ...r,\r\n                                            name: e.target.value\r\n                                        }))\r\n                                    }\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl isRequired id=\"prop-type\">\r\n                                <FormLabel as=\"h2\" fontSize=\"md\">Property's Type</FormLabel>\r\n                                <Select variant=\"filled\" placeholder=\"--Choose your property type--\"\r\n                                    onChange={(e) => setRoom((r) => ({ ...r, propTypeId: e.target.value, cityId: \"\" }))}\r\n                                >\r\n                                    {resTypes?.map(rt => {\r\n                                        return <option value={rt.id} key={rt.id}>{rt.propertyType}</option>\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                            <FormControl isRequired id=\"prop-description\">\r\n                                <FormLabel as=\"h2\" fontSize=\"md\">Description</FormLabel>\r\n                                <Input variant=\"filled\" required\r\n                                    value={room.description}\r\n                                    onChange={(e) => setRoom((r) => ({ ...r, description: e.target.value }))}\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl isRequired id=\"prop-introduction\">\r\n                                <FormLabel as=\"h2\" fontSize=\"md\">Introduction</FormLabel>\r\n                                <Textarea rows={4} required variant=\"filled\"\r\n                                    value={room.introdution}\r\n                                    onChange={(e) => setRoom((r) => ({ ...r, introdution: e.target.value }))}\r\n                                />\r\n                            </FormControl>\r\n                        </VStack>\r\n                    </Box>\r\n                    <Divider borderColor=\"currentcolor\" />\r\n\r\n                    {/* Location info */}\r\n                    <Box d={{ base: \"inline-block\", lg: \"flex\" }} flexDir=\"row\" w=\"100%\" fontWeight=\"medium\">\r\n                        <Box as=\"h2\" fontSize=\"lg\" w={{ base: \"100%\", lg: \"30%\" }} mb=\"5\">Location info</Box>\r\n                        <VStack alignItems=\"start\" w=\"100%\">\r\n                            <FormControl isRequired id=\"prop-country\">\r\n                                <FormLabel as=\"h2\" fontSize=\"md\">Country</FormLabel>\r\n                                <Select variant=\"filled\" placeholder=\"--Choose your country--\"\r\n                                    onChange={(e) => setRoom((r) => ({ ...r, countryId: e.target.value, cityId: \"\" }))}\r\n                                >\r\n                                    {countries?.map(c => {\r\n                                        return <option value={c.id} key={c.countryName}>{c.countryName}</option>\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                            <FormControl isRequired id=\"prop-city\">\r\n                                <FormLabel as=\"h2\" fontSize=\"md\">City</FormLabel>\r\n                                <Select variant=\"filled\" placeholder=\"--Choose your city--\"\r\n                                    onChange={(e) => {\r\n                                        setRoom((r) => ({ ...r, cityId: e.target.value }))\r\n                                    }}\r\n                                >\r\n                                    {resCities?.filter(ct => ct.countryId === room.countryId).map(c => {\r\n                                        return <option value={c.id} key={c.id}>{c.cityName}</option>\r\n                                    })}\r\n                                </Select>\r\n                            </FormControl>\r\n                            <Flex gridGap=\"2\" w=\"100%\" flexDir={{ base: 'column', lg: \"row\" }}>\r\n                                <FormControl isRequired id=\"prop-street\" flex=\"0 1 60%\">\r\n                                    <FormLabel as=\"h2\" fontSize=\"md\">Street Name</FormLabel>\r\n                                    <Input required variant=\"filled\" value={room.streetName}\r\n                                        onChange={(e) => { setRoom((r) => ({ ...r, streetName: e.target.value })) }}\r\n                                    />\r\n                                </FormControl>\r\n                                <FormControl isRequired id=\"prop-number\" flex=\"0 1 40%\">\r\n                                    <FormLabel as=\"h2\" fontSize=\"md\">Property's number</FormLabel>\r\n                                    <Input required variant=\"filled\" value={room.number}\r\n                                        onChange={(e) => { setRoom((r) => ({ ...r, number: e.target.value })) }}\r\n                                    />\r\n                                </FormControl>\r\n                            </Flex>\r\n                            <FormControl id=\"prop-add-note\">\r\n                                <FormLabel as=\"h2\" fontSize=\"md\">Notes to client<Box as=\"span\" fontStyle=\"oblique\" fontWeight=\"light\">(optional)</Box></FormLabel>\r\n                                <Input variant=\"filled\" value={room.addressDesc}\r\n                                    onChange={(e) => { setRoom((r) => ({ ...r, addressDesc: e.target.value })) }}\r\n                                />\r\n                            </FormControl>\r\n                        </VStack>\r\n                    </Box>\r\n                    <Divider borderColor=\"currentcolor\" />\r\n\r\n                    {/* Images */}\r\n                    <Box d={{ base: \"inline-block\", lg: \"flex\" }} flexDir=\"row\" w=\"100%\" fontWeight=\"medium\" justifyContent=\"space-between\">\r\n                        <Box as=\"h2\" fontSize=\"lg\" w={{ base: \"100%\", lg: \"30%\" }} mb=\"5\" flexWrap=\"wrap\">\r\n                            Images\r\n                            <Box as=\"span\" fontStyle=\"oblique\" fontWeight=\"light\">{\" (At least 5 images)\"}</Box>\r\n                        </Box>\r\n                        <VStack alignItems=\"start\" w=\"100%\">\r\n                            <Input required variant=\"ghost\" type=\"file\" justifySelf=\"flex-end\" multiple accept=\"image/*\" onChange={(e) => handleImagesInput(e)} />\r\n                            <SimpleGrid columns={{ base: 2, md: 3, lg: 4 }} gridGap=\"2\">\r\n                                {room.images.map((i, index) =>\r\n                                    <Box key={index} position=\"relative\" transition=\"all ease 0.5s\">\r\n                                        <Image src={i.url}\r\n                                            display=\"block\"\r\n                                            _hover={{ opacity: \"0.5\" }}\r\n                                            style={{ backfaceVisibility: \"hidden\" }} />\r\n                                        <Center opacity=\"0\"\r\n                                            w=\"100%\"\r\n                                            h=\"100%\"\r\n                                            position=\"absolute\"\r\n                                            top=\"50%\" left=\"50%\"\r\n                                            transform=\"translate(-50%, -50%)\"\r\n                                            transition=\"all ease 0.5s\"\r\n                                            _hover={{ opacity: \"1\" }}>\r\n                                            <CloseButton size=\"lg\" colorScheme=\"red\" color=\"red\" onClick={() => { handleDeleteImage(i) }} />\r\n                                        </Center>\r\n                                    </Box>\r\n                                )}\r\n                            </SimpleGrid>\r\n                        </VStack>\r\n                    </Box>\r\n                    <Divider borderColor=\"currentcolor\" />\r\n\r\n                    {/* Services */}\r\n                    <Box d={{ base: \"inline-block\", lg: \"flex\" }} flexDir=\"row\" w=\"100%\" fontWeight=\"medium\">\r\n                        <Box as=\"h2\" fontSize=\"lg\" w={{ base: \"100%\", lg: \"30%\" }} mb=\"5\">Services</Box>\r\n                        <Box w=\"100%\" >\r\n                            <SimpleGrid minChildWidth=\"12em\" spacingX=\"5rem\" spacingY=\"2\">\r\n                                <Flex gridGap=\"2\" alignItems=\"center\">\r\n                                    <Box as=\"h2\" fontSize=\"md\">\r\n                                        Max Guests\r\n                                </Box>\r\n                                    <Spacer />\r\n                                    <IconButton aria-label=\"Minus\" size=\"sm\" icon={<FaMinus />}\r\n                                        isDisabled={room.maxGuest <= 0}\r\n                                        onClick={() => setRoom((r) => ({ ...r, maxGuest: r.maxGuest-- }))}\r\n                                    />\r\n                                    <Box as=\"h3\" fontSize=\"md\" w=\"3ch\" textAlign=\"center\">\r\n                                        {room.maxGuest}\r\n                                    </Box>\r\n                                    <IconButton aria-label=\"Plus\" size=\"sm\" icon={<FaPlus />}\r\n                                        isDisabled={room.maxGuest >= 10}\r\n                                        onClick={() => setRoom((r) => ({ ...r, maxGuest: r.maxGuest++ }))}\r\n                                    />\r\n                                </Flex>\r\n                                {\r\n                                    serviceQuery.data?.data.map(d =>\r\n                                        <ServiceDisplay name={d.serviceName} key={d.serviceId}\r\n                                            isOn={room.serviceIdList.includes(d.serviceId)}\r\n                                            toggle={() => {\r\n                                                if (room.serviceIdList.includes(d.serviceId)) {\r\n                                                    const newIdList = room.serviceIdList.filter(s => s != d.serviceId)\r\n                                                    setRoom(r => ({ ...r, serviceIdList: newIdList }));\r\n                                                }\r\n                                                else {\r\n                                                    setRoom(r => ({ ...r, serviceIdList: [...r.serviceIdList, d.serviceId] }));\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                    )\r\n                                }\r\n                            </SimpleGrid>\r\n                        </Box>\r\n                    </Box>\r\n                    <Divider borderColor=\"currentcolor\" />\r\n\r\n                    {/* Pricing */}\r\n                    <Box d={{ base: \"inline-block\", lg: \"flex\" }} flexDir=\"row\" w=\"100%\" fontWeight=\"medium\">\r\n                        <Box as=\"h2\" fontSize=\"lg\" w={{ base: \"100%\", lg: \"30%\" }} mb=\"5\">Pricing ($)</Box>\r\n                        <VStack alignItems=\"start\" w=\"100%\">\r\n                            <ServiceDisplay isOn={room.refundPercent === 100 ? true : false}\r\n                                name=\"Allow full refund\" size=\"lg\"\r\n                                toggle={(checked) => { setRoom((r) => ({ ...r, refundPercent: checked ? 100 : 80 })) }}\r\n                            />\r\n                            {room.refundPercent !== 100 &&\r\n                                <Box>\r\n                                    Amount refund: {room.refundPercent}%\r\n                                </Box>\r\n                            }\r\n                            <Slider value={room.refundPercent} min={0} max={100} step={5} colorScheme=\"blue\"\r\n                                onChange={(percent) => { setRoom((r) => ({ ...r, refundPercent: percent })) }}>\r\n                                <SliderTrack>\r\n                                    <SliderFilledTrack />\r\n                                </SliderTrack>\r\n                                <SliderThumb boxSize={6} />\r\n                            </Slider>\r\n                            <FormControl isRequired id=\"prop-price-base\" isInvalid={room.basePrice === 0 ? true : false}>\r\n                                <FormLabel opacity={room.basePrice === 0 ? 0.4 : 1} as=\"h2\" fontSize=\"md\">Base price</FormLabel>\r\n                                <NumberInput value={room.basePrice}\r\n                                    onChange={(price) => { setRoom((r) => ({ ...r, basePrice: parseInt(price) | 0 })) }}\r\n                                >\r\n                                    <NumberInputField variant=\"filled\" required />\r\n                                </NumberInput>\r\n                            </FormControl>\r\n                            <FormControl isRequired id=\"prop-price-cleaning\">\r\n                                <FormLabel opacity={room.cleaningFee === 0 ? 0.4 : 1} as=\"h2\" fontSize=\"md\">Cleaning fee</FormLabel>\r\n                                <NumberInput value={room.cleaningFee}\r\n                                    onChange={(price) => { setRoom((r) => ({ ...r, cleaningFee: parseInt(price) | 0 })) }}\r\n                                >\r\n                                    <NumberInputField variant=\"filled\" required />\r\n                                </NumberInput>\r\n                            </FormControl>\r\n                            <FormControl isRequired id=\"prop-price-service\">\r\n                                <FormLabel opacity={room.serviceFee === 0 ? 0.4 : 1} as=\"h2\" fontSize=\"md\">Service fee</FormLabel>\r\n                                <NumberInput value={room.serviceFee}\r\n                                    onChange={(price) => { setRoom((r) => ({ ...r, serviceFee: parseInt(price) | 0 })) }}\r\n                                >\r\n                                    <NumberInputField variant=\"filled\" required />\r\n                                </NumberInput>\r\n                            </FormControl>\r\n                        </VStack>\r\n                    </Box>\r\n\r\n                    <Flex justifyContent=\"space-between\" w=\"100%\" px=\"10%\">\r\n                        <Link as={RouterLink} to=\"/room/preview\" _hover={{ textStyle: \"none\" }} target=\"_blank\" onClick={() => localStorage.setItem(\"previewRoom\", JSON.stringify(room))}>\r\n                            <Button variant=\"solid\" colorScheme=\"green\">\r\n                                See a preview\r\n                            </Button>\r\n                        </Link>\r\n\r\n                        <Button variant=\"solid\" type=\"submit\" colorScheme=\"blue\" onClick={(e) => handlePublish(e)}>\r\n                            {queryParams.isEditting ? \"Update property\" : \"Publish\"}\r\n                        </Button>\r\n\r\n                        {queryParams?.propId &&\r\n                            <Button variant=\"solid\" colorScheme=\"red\">\r\n                                Close this property\r\n                        </Button>}\r\n                    </Flex>\r\n                </VStack>\r\n            </Box>\r\n        </chakra.form>\r\n    );\r\n}\r\n\r\ninterface ServiceDisplayProps {\r\n    name: string;\r\n    id?: string;\r\n    isOn: boolean;\r\n    toggle: (checked: boolean) => void;\r\n}\r\n\r\nconst ServiceDisplay: React.FC<ServiceDisplayProps & SwitchProps> = (props) =>\r\n    <FormControl display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" pr=\"2\">\r\n        <FormLabel htmlFor={\"service_\" + props.name} mb=\"0\" opacity={props.isOn ? 1 : 0.4}>\r\n            {props.name}\r\n        </FormLabel>\r\n        <Switch id={\"service_\" + props.name} isChecked={props.isOn}\r\n            {...props}\r\n            onChange={(e) => { props.toggle(e.target.checked) }} />\r\n    </FormControl>\r\n\r\nexport default PublishRoomPage;","import React from 'react'\r\n\r\nconst PreviewRoomPage = () => {\r\n    const [room, setRoom] = React.useState<any>();\r\n    console.log(room);\r\n\r\n    React.useEffect(() => {\r\n        const room = localStorage.getItem(\"previewRoom\");\r\n        console.log(room)\r\n        if (room) setRoom(JSON.parse(room));\r\n\r\n        return function cleanup() {\r\n            localStorage.removeItem(\"previewRoom\");\r\n        }\r\n    }, []);\r\n\r\n    React.useEffect(() => {\r\n        console.log(room);\r\n    }, [room])\r\n\r\n    return <>Hello</>\r\n}\r\n\r\nexport default PreviewRoomPage;","import { Alert, AlertDescription, AlertIcon, AlertTitle, Box, Button, Collapse, useDisclosure, useToast } from '@chakra-ui/react'\r\nimport React, { useContext } from 'react'\r\nimport { registerHost } from '../API'\r\nimport { AuthContext } from '../Contexts/AuthContext'\r\n\r\nconst RegisterHostPage = () => {\r\n    const auth = useContext(AuthContext);\r\n    const toast = useToast();\r\n    const alert = useDisclosure();\r\n\r\n    const handleRegisterClick = () => {\r\n        alert.onOpen();\r\n        registerHost().then(res => {\r\n            console.log(res);\r\n            if (res.status === 200) {\r\n                localStorage.setItem(\"token\", res.data.token);\r\n                auth.updateToken(res.data.token);\r\n                toast({\r\n                    description: \"Congrat! You are eligible as a new host!\",\r\n                    status: \"success\"\r\n                })\r\n            }\r\n        }).catch(err => {\r\n            toast({\r\n                description: err,\r\n                status: \"error\"\r\n            })\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Box d=\"flex\" flexDir=\"column\" gridGap=\"2\" justifyItems=\"center\" justifyContent=\"center\">\r\n            <Button onClick={() => handleRegisterClick()}\r\n                colorScheme=\"green\" w=\"30ch\"\r\n                isDisabled={auth.user?.roles.includes(\"Owner\")}\r\n                alignSelf=\"center\"\r\n            >\r\n                {auth.user?.roles.includes(\"Owner\") ? \"You are already a host!\" : \"Register to become a host!\"}\r\n            </Button>\r\n            <Collapse in={alert.isOpen}>\r\n                <SuccessAlert></SuccessAlert>\r\n            </Collapse>\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst SuccessAlert = () => <Alert\r\n    status=\"success\"\r\n    variant=\"subtle\"\r\n    flexDirection=\"column\"\r\n    alignItems=\"center\"\r\n    justifyContent=\"center\"\r\n    textAlign=\"center\"\r\n    height=\"200px\"\r\n>\r\n    <AlertIcon boxSize=\"40px\" mr={0} />\r\n    <AlertTitle mt={4} mb={1} fontSize=\"lg\">\r\n        Application submitted!\r\n                </AlertTitle>\r\n    <AlertDescription maxWidth=\"sm\">\r\n        Thanks for submitting your application. Our team will get back to you soon.\r\n                </AlertDescription>\r\n</Alert>\r\n\r\nexport default RegisterHostPage;","import { Box, BoxProps } from '@chakra-ui/react';\r\nimport React from 'react'\r\nimport { useQuery } from 'react-query';\r\nimport { fetchOwnerProperty } from '../API';\r\nimport RoomCardList from '../Components/FilterComponents/RoomCardList';\r\n\r\nconst OwnerListProperty = (props: BoxProps) => {\r\n    const { data } = useQuery(\"host\", () => fetchOwnerProperty(), {\r\n        onSuccess: (data) => {\r\n            console.log(data);\r\n        }\r\n    })\r\n\r\n    return (\r\n        <Box {...props}>\r\n            <Box as=\"h1\" fontSize=\"4xl\" fontWeight=\"bold\" mb='10' my=\"4\">Your hosted properties</Box>\r\n            <RoomCardList rooms={data?.data} columns={{ base: 1, md: 2, lg: 3 }}></RoomCardList>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default OwnerListProperty;","import { Avatar, Box, BoxProps, Button, ButtonGroup, Divider, Flex, useToast } from '@chakra-ui/react';\r\nimport React from 'react'\r\nimport { BsCheck } from 'react-icons/bs';\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\r\nimport { fetchPropertiesByPropStatusId, rejectProperty, toggleCloseProperty, validateProperty } from '../API';\r\nimport { PureActionAlert } from '../Components/AlertDialog';\r\nimport RoomCard from '../Components/FilterComponents/RoomCard';\r\n\r\ntype VerificationPageProps = {\r\n\r\n}\r\n\r\nconst VerificationPage = (props: BoxProps) => {\r\n    const [propStatusId, setPropStatusId] = React.useState<string>()\r\n\r\n    const roomQry = useQuery([\"notActive\", propStatusId], () => {\r\n        return fetchPropertiesByPropStatusId(propStatusId);\r\n    }, {\r\n        onSuccess: (rs) => {\r\n\r\n        }\r\n    })\r\n\r\n\r\n    return (\r\n        <Box {...props}>\r\n            <Flex flexDir=\"column\" gridGap=\"10\" alignItems=\"center\">\r\n                {roomQry.data?.data.map(r => {\r\n                    return (\r\n                        <Box>\r\n                            <Divider my=\"2\" />\r\n                            <NotActiveRoom room={r} key={r.id}></NotActiveRoom>\r\n                        </Box>\r\n                    )\r\n                })}\r\n            </Flex>\r\n        </Box >\r\n    )\r\n}\r\n\r\ntype NotActiveRoom = {\r\n    room: Room;\r\n}\r\n\r\nconst NotActiveRoom = (props: NotActiveRoom) => {\r\n    const toast = useToast();\r\n    const { room } = props;\r\n\r\n    const queryClient = useQueryClient();\r\n\r\n    const closePropMutation = useMutation([\"property\", room.id], toggleCloseProperty, {\r\n        onSuccess: (rs) => {\r\n            toast({ description: \"Successful!\", status: \"success\" });\r\n            queryClient.removeQueries([\"property\", room.id]);\r\n            window.location.reload();\r\n        },\r\n        onError: (error) => {\r\n            toast({ description: \"Error\" + JSON.stringify(error), status: \"error\" })\r\n        },\r\n    })\r\n\r\n    const validateMutation = useMutation(validateProperty, {\r\n        mutationKey: [\"property\", room.id],\r\n        onSuccess: () => {\r\n            toast({\r\n                description: \"Room is accepted\",\r\n                status: \"info\",\r\n            });\r\n            queryClient.removeQueries([\"property\", room.id]);\r\n            window.location.reload();\r\n        },\r\n        onSettled: () => {\r\n        }\r\n    }\r\n    )\r\n\r\n    const rejectMutation = useMutation(rejectProperty, {\r\n        mutationKey: [\"property\", room.id],\r\n        onSuccess: () => {\r\n            toast({\r\n                description: \"Room is rejected\",\r\n                status: \"info\",\r\n            });\r\n            queryClient.removeQueries([\"property\", room.id]);\r\n            window.location.reload();\r\n        }\r\n    })\r\n\r\n    const reopenProp = (id: string) => {\r\n        closePropMutation.mutate(id);\r\n    }\r\n\r\n    const validate = (id: string) => {\r\n        validateMutation.mutate(id);\r\n    }\r\n\r\n    const reject = (id: string) => {\r\n        rejectMutation.mutate(id);\r\n    }\r\n\r\n    return (<Box>\r\n        <Flex flexDir=\"column\" maxW='500'>\r\n            <RoomCard key={room.id} room={room} isSaved={true}></RoomCard>\r\n            {room.propertyStatus == 'IsClosed' && <Button colorScheme=\"green\" onClick={() => reopenProp(room.id)}>Reopen this property</Button>}\r\n            {\r\n                room.propertyStatus == 'OnValidation' &&\r\n                <ButtonGroup variant=\"solid\">\r\n                    <Button colorScheme=\"blue\"\r\n                        onClick={() => validate(room.id)}\r\n                        isLoading={validateMutation.isLoading}\r\n                        isDisabled={validateMutation.isSuccess}\r\n                        rightIcon={validateMutation.isSuccess ? <BsCheck /> : <></>}\r\n                    >{\"Validate\"}</Button>\r\n\r\n                    <Button\r\n                        colorScheme=\"red\"\r\n                        onClick={() => reject(room.id)}\r\n                        isLoading={rejectMutation.isLoading}\r\n                    >Reject</Button>\r\n                </ButtonGroup>\r\n            }\r\n            {\r\n                room.propertyStatus == 'IsRejected' &&\r\n                <Button isDisabled={true}>This property has been rejected</Button>\r\n            }\r\n        </Flex>\r\n    </Box>)\r\n}\r\n\r\nexport default VerificationPage;","import * as React from \"react\"\r\nimport {\r\n  ChakraProvider,\r\n  Box,\r\n  extendTheme,\r\n  Divider,\r\n  useBreakpointValue,\r\n} from \"@chakra-ui/react\"\r\nimport { HashRouter, Route, Switch, BrowserRouter, Redirect, RouteProps, useLocation, useHistory } from 'react-router-dom'\r\nimport HomePage from \"./Pages/HomePage\";\r\nimport SingleRoom from \"./Pages/SingleRoom\";\r\nimport ErrorPage from \"./Pages/ErrorPage\";\r\nimport RoomsPage from \"./Pages/RoomsPage\";\r\nimport \"./App.css\";\r\nimport { mode } from \"@chakra-ui/theme-tools\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport Footer from \"./Components/NavComponents/Footer\";\r\nimport { QueryClient, QueryClientProvider } from \"react-query\";\r\nimport { AuthContext, AuthProvider } from \"./Contexts/AuthContext\";\r\nimport ProfilePage from \"./Pages/ProfilePage\";\r\nimport Navbar from \"./Components/NavComponents/Navbar\";\r\nimport PublishRoomPage from \"./Pages/PublishRoomPage\";\r\nimport LoginForm from \"./Components/LoginForm\";\r\nimport LoadingBar from \"react-top-loading-bar\";\r\nimport PreviewRoomPage from \"./Pages/PreviewRoomPage\";\r\nimport RegisterHostPage from \"./Pages/RegisterHostPage\";\r\nimport { axAuth } from \"./API\";\r\nimport OwnerListProperty from \"./Pages/OwnerListProperty\";\r\nimport VerificationPage from \"./Pages/VerificationPage\";\r\n// theme.components.Button.baseStyle.borderRadius = \"0\";\r\n\r\nconst myTheme = extendTheme({\r\n  config: {\r\n    initialColorMode: \"dark\"\r\n  },\r\n  components: {\r\n    Button: {\r\n      defaultProps: {\r\n      }\r\n    },\r\n  }\r\n})\r\n\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n\r\n    }\r\n  }\r\n});\r\n\r\n\r\nexport const App = () => {\r\n  const loadingRef = React.useRef<any>(null);\r\n  // loading bar will appear when a request is sended\r\n  // and disappear when get a response\r\n  // REMINDER: this is a fastest way to indicate top loading bar,\r\n  // but not in a very elegant way, should put it in a context and update manually in component\r\n  React.useEffect(() => {\r\n    loadingRef.current.complete();\r\n\r\n    axAuth.interceptors.request.use((config) => {\r\n      loadingRef.current.staticStart();\r\n      return config;\r\n    }, (e) => {\r\n      loadingRef.current.complete();\r\n      return Promise.reject(e);\r\n    })\r\n\r\n    axAuth.interceptors.response.use((config) => {\r\n      loadingRef.current.complete();\r\n      return config;\r\n    }, (e) => {\r\n      loadingRef.current.complete();\r\n      if (e.reponse.status === 404) {\r\n      }\r\n      return Promise.reject(e);\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <HashRouter basename=\"/\">\r\n      <ChakraProvider theme={myTheme}>\r\n        <QueryClientProvider client={queryClient}>\r\n          <Box d=\"flex\" flexDir=\"column\" minH=\"100vh\">\r\n            <AuthProvider>\r\n              <ScrollToTop />\r\n              <Box flex=\"1\">\r\n                <LoadingBar color=\"#f11946\" ref={loadingRef}></LoadingBar>\r\n                <Switch>\r\n                  <Route exact path=\"/\" >\r\n                    <HomePage />\r\n                  </Route>\r\n\r\n                  <Route component={LoginPage} exact path=\"/login\"\r\n                    render={({ location }) =>\r\n                      <Redirect to={{ pathname: \"/login\", state: { from: location } }} />\r\n                    }\r\n                  />\r\n                  <Box mx={{ base: \"10px\", md: \"50px\", lg: \"100px\" }} mt=\"5\">\r\n                    <Navbar></Navbar>\r\n                    <Switch>\r\n                      <Route exact path=\"/rooms/:slug\" component={SingleRoom} />\r\n                      <Route exact path=\"/rooms\" component={RoomsPage} />\r\n                      <Route exact path=\"/room/preview\" component={PreviewRoomPage} />\r\n                      <AuthRoute exact path=\"/profile\" component={ProfilePage}></AuthRoute>\r\n                      <RoleRoute roles={[\"Owner\"]} path=\"/host/publish\" component={PublishRoomPage}></RoleRoute>\r\n                      <AuthRoute exact path=\"/user/register-host\" component={RegisterHostPage}></AuthRoute>\r\n                      <RoleRoute roles={[\"Admin\"]} exact path=\"/verify\"><VerificationPage /></RoleRoute>\r\n                      <RoleRoute roles={[\"Owner\"]} path=\"/host/properties\">\r\n                        <OwnerListProperty />\r\n                      </RoleRoute>\r\n                      <Route component={ErrorPage} />\r\n                    </Switch>\r\n                  </Box>\r\n                </Switch>\r\n              </Box>\r\n            </AuthProvider>\r\n            <Divider mt=\"10\" />\r\n            <Footer mx={{ base: \"10px\", md: \"50px\", lg: \"100px\" }} />\r\n          </Box>\r\n\r\n        </QueryClientProvider>\r\n      </ChakraProvider>\r\n    </HashRouter>\r\n  )\r\n};\r\n\r\ninterface LocationState {\r\n  from: {\r\n    pathname: string;\r\n  };\r\n}\r\n\r\nconst LoginPage = () => {\r\n  const location = useLocation<LocationState>();\r\n  const auth = React.useContext(AuthContext);\r\n\r\n  let { from } = location.state || { from: { pathname: \"/\" } };\r\n  if (auth.user) return <Redirect to={from}></Redirect>\r\n\r\n  return (\r\n    <Box mx=\"20%\" mt=\"10\" flex=\"0\">\r\n      <Navbar />\r\n      <LoginForm isRegistering={false}></LoginForm>\r\n    </Box>\r\n  );\r\n}\r\n\r\nconst AuthRoute: React.FC<RouteProps> = ({ children, ...rest }) => {\r\n  let auth = React.useContext(AuthContext);\r\n  if (auth.user) return (<Route {...rest}>{children}</Route>)\r\n\r\n  else return (<Route {...rest}>\r\n    <Redirect to={{\r\n      pathname: \"/login\",\r\n      state: {\r\n        from: rest.path\r\n      },\r\n      ...rest.location\r\n    }} />\r\n  </Route>)\r\n}\r\n\r\ntype RoleRouteProps = {\r\n  roles: AppRole[];\r\n}\r\n\r\nconst RoleRoute = (props: RoleRouteProps & RouteProps) => {\r\n  const { roles, children, ...rest } = props;\r\n  const auth = React.useContext(AuthContext);\r\n\r\n  if (!auth.user) return (<Route {...rest}>\r\n    <Redirect to={{\r\n      pathname: \"/login\",\r\n      state: {\r\n        from: rest.path\r\n      },\r\n      ...rest.location,\r\n    }} />\r\n  </Route>)\r\n\r\n  const ifContainsAll = (haystack?: string[] | string, needles?: string[]) => {\r\n    if (!haystack) return false;\r\n    if (!needles) return true;\r\n\r\n    for (const n of needles) {\r\n      if (!haystack.includes(n)) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  if (ifContainsAll(auth.user?.roles, roles)) return (<Route {...rest}>{children}</Route>)\r\n  else return (\r\n    <Route {...rest}>\r\n      <Redirect to={{\r\n        pathname: \"/error\",\r\n        state: {\r\n          message: \"You are not authorized\"\r\n        }\r\n      }}></Redirect>\r\n    </Route>\r\n  )\r\n}\r\n\r\nconst ScrollToTop = () => {\r\n  const { pathname } = useLocation();\r\n  React.useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname])\r\n\r\n  return null;\r\n}\r\n","import { ColorModeScript, theme } from \"@chakra-ui/react\"\r\nimport * as React from \"react\";\r\nimport ReactDOM from \"react-dom\"\r\nimport { App } from \"./App\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ColorModeScript initialColorMode={theme.config.initialColorMode} />\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\"),\r\n)"],"sourceRoot":""}