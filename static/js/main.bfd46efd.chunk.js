(this["webpackJsonphotel-chakra"]=this["webpackJsonphotel-chakra"]||[]).push([[0],{222:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(277),a=n(74),c=n(1),o=n.n(c),s=n(63),l=n.n(s),d=n(66),u=n(6),j=n(32),b=n(276),h=n(288),f=n(244),O=n(265),p=n(26),x=n(19),m=n(5),g=n(289),v=n(245),y=n(287),w=n(248),S=n(151),C=n.n(S),k=(n(134),n(135),n(286)),I=n(16),D=n.n(I),R=n(33),z=n(77),P=n.n(z),T="https://nicehostel.herokuapp.com",F=P.a.create(),W=P.a.create();F.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.Authorization="Bearer ".concat(t),e})),F.interceptors.response.use((function(e){return e}),(function(e){return e.response.status,Promise.reject(e.response)}));var L=function(e){return F({url:T+"/api/reviews/",method:"POST",data:e})},E=function(e){return F({method:"POST",url:T+"/api/properties/",data:e})},N=function(e){return F({url:T+"/api/reservations",method:"POST",data:JSON.stringify({propertyId:e.roomId,fromDate:e.bookFromDate,toDate:e.bookToDate,adultNum:e.guest,childrenNum:e.children}),headers:{"Content-Type":"application/json"}})},A=function(e){return F.post(T+"/api/user/authenticate",{email:e.email,password:e.password})},q=function(e){return P.a.post(T+"/api/user/register-user",{email:e.email,password:e.password,confirmPassword:e.confirmPassword})},G=function(){var e=Object(R.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/properties",console.log(n),e.abrupt("return",P.a.get(T+"/api/properties",{params:{typeId:t,city:n.city,from:n.from,to:n.to,guestNum:n.guestNum,childrenNum:n.childrenNum}}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(R.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(T+"/api/cities");case 2:return t=e.sent,n=t.json(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(R.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(T+"/api/propertytypes");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.get(T+"/api/properties/"+t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.get(T+"/api/properties/host"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.get(T+"/api/properties/not-active",{params:t&&t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.get(T+"/api/reservations/user"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.get(T+"/api/reviews",{params:{propertyId:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.get(T+"/api/properties/services"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.delete(T+"/api/reservations/"+t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.put(T+"/api/properties/toggle-close/"+t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){return new URLSearchParams(Object(x.h)().search)},Q=function(e){var t=e.roomId,n=e.token;return F.post("".concat(T,"/api/likes/").concat(t),{},{headers:{Authorization:"Bearer ".concat(n)}})},K={dots:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,initialSlide:0,swipeToSlide:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:1,infinite:!0,dots:!0}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:1,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},ee=function(e){var t=e.type,n=(e.children,Object(x.g)());return Object(r.jsxs)(g.d,{alignItems:"start",p:"4",children:[Object(r.jsx)(v.a,{onClick:function(){n.push({pathname:"/rooms",state:{type:t}})},children:Object(r.jsx)(y.a,{hasArrow:!0,placement:"top","aria-label":"tooltips",label:t.description,openDelay:500,children:Object(r.jsxs)(f.a,{children:[Object(r.jsx)(f.a,{maxW:"sm",maxH:"sm",minH:"100px",children:Object(r.jsx)(w.a,{width:"inherit",height:"inherit",src:t.thumbnailImg,objectFit:"cover"})}),Object(r.jsx)(f.a,{mt:"1",fontWeight:"semibold",as:"h4",lineHeight:"tight",isTruncated:!0,children:t.propertyType})]})})}),Object(r.jsx)(f.a,{color:"gray.500",fontSize:"md",children:t.count+" "+t.propertyType})]})},te=function(){var e=Object(k.a)("propertypeList",B,{staleTime:6e5}),t=e.data,n=e.isError;return e.isFetching&&console.log("refetching prop"),n?Object(r.jsx)(f.a,{children:"Something's wrong"}):Object(r.jsx)("div",{children:Object(r.jsx)(C.a,Object(u.a)(Object(u.a)({},K),{},{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(r.jsx)(ee,{type:e},t)}))}))})},ne=n(250),re=n(252),ie=n(253),ae=n(254),ce=n(225),oe=n(280),se=n(156),le=n(247),de=n(169),ue=n(20),je=n(21),be=n(279),he=n(124),fe=n(102),Oe=n.n(fe),pe=(n(221),new Date(Date.now()),function(e,t){var n=new Date(e),r=new Date(t),i=[],a=n;for(a.setDate(a.getDate()+1);a.getDate()<r.getDate();)i.push(new Date(a)),a.setDate(a.getDate()+1);return i}),xe=function(e){var t;return null===e||void 0===e||null===(t=e.reservedDates)||void 0===t?void 0:t.map((function(e){return new Date(e.fromDate)}))},me=function(e,t){var n=void 0;return(null===t||void 0===t?void 0:t.reservedDates)&&t.reservedDates.forEach((function(t){var r=new Date(t.fromDate);r>e&&(n?r<=n&&(n=r):n=r)})),n!==e?n:null},ge={from:void 0,to:void 0,enteredTo:void 0},ve=function(e){var t=e.from,n=e.to,i=e.updateDate,a=e.schedules,c=Object(j.a)(e,["from","to","updateDate","schedules"]),s=Object(be.a)(),l=o.a.useState({from:t,to:n}),d=Object(m.a)(l,2),b=d[0],h=d[1],O=[{before:new Date(Date.now())}].concat(Object(je.a)(function(e){var t=[];if(null===e||void 0===e?void 0:e.reservedDates)for(var n=0;n<e.reservedDates.length;n++)t.push.apply(t,Object(je.a)(pe(e.reservedDates[n].fromDate,e.reservedDates[n].toDate)));return(null===e||void 0===e?void 0:e.dayOff)&&t.push.apply(t,Object(je.a)(e.dayOff)),t}(a))),p=o.a.useState(O),x=Object(m.a)(p,2),g=x[0],v=x[1];o.a.useEffect((function(){(b.from&&b.to||!b.from&&!b.to)&&i(b.from,b.to)}),[b.from,b.to]);var y=function(e,t,n){var r=t&&fe.DateUtils.isDayBefore(e,t);return!t||r||t&&n},w=function(){h(ge)},S=[b.from,{from:b.from,to:b.enteredTo}],C={start:b.from,end:b.enteredTo,checkoutOnly:xe(a)},k=Object(he.a)("(min-width: 600px)"),I=Object(m.a)(k,1)[0];return Object(r.jsxs)(f.a,Object(u.a)(Object(u.a)({d:"flex",flexDir:"column"},c),{},{overflow:"clip",children:[Object(r.jsx)(f.a,{alignSelf:"center",children:Object(r.jsx)(Oe.a,{numberOfMonths:I?2:1,fromMonth:b.from,modifiers:C,onDayClick:function(e,t){if(!t.disabled){var n=new Date(Date.now());if(!(e<n)){var r=b.from,i=b.to;if(r&&i&&e>=r&&e<=i)w();else if(y(e,r,i)){if(t.checkoutOnly)return void s({status:"info",description:"Check out only!",duration:3e3});v((function(t){return Object(u.a)(Object(u.a)({},t),{},{before:e,after:me(e,a)})})),h({from:e,to:void 0,enteredTo:void 0})}else{var c;if(v(O),(null===(c=b.from)||void 0===c?void 0:c.getDate())===e.getDate())return void h({from:void 0,to:void 0,enteredTo:void 0});h((function(t){return Object(u.a)(Object(u.a)({},t),{},{to:e,enteredTo:e})}))}}}},disabledDays:g,onDayMouseEnter:function(e){var t=b.from,n=b.to;y(e,t,n)||h((function(t){return Object(u.a)(Object(u.a)({},t),{},{enteredTo:e})}))},selectedDays:S})}),Object(r.jsxs)(ne.a,{justifyContent:"center",alignItems:"center",children:[!b.from&&!b.to&&"Please select the first day.",b.from&&!b.to&&"Please select the last day.",b.from&&b.to&&"Selected from ".concat(b.from.toLocaleDateString()," to\n                ").concat(b.to.toLocaleDateString())," ",b.from&&b.to&&Object(r.jsx)(se.a,{onClick:w,children:"Reset"})]})]}))},ye=n(251),we=function(e){var t=e.guest,n=e.children,i=e.updatePeople,a=e.maxGuest;return Object(r.jsx)(f.a,{p:"4",style:{backdropFilter:"blur(5px)"},children:Object(r.jsxs)(g.d,{align:"stretch",spacing:4,children:[Object(r.jsxs)(ne.a,{alignItems:"center",children:[Object(r.jsx)(ye.a,{mr:"auto",fontSize:"md",children:"Guests"}),Object(r.jsx)(f.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(se.a,{variant:"ghost",borderRadius:"0",disabled:t<=0,onClick:function(){return i(--t,n)},children:"-"})}),Object(r.jsx)(ye.a,{mx:"4",fontSize:"md",children:t}),Object(r.jsx)(f.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(se.a,{variant:"ghost",borderRadius:"0",disabled:void 0!==a&&t>=a,onClick:function(){return i(++t,n)},children:"+"})})]}),Object(r.jsxs)(ne.a,{alignItems:"center",children:[Object(r.jsx)(ye.a,{mr:"auto",fontSize:"md",children:"Children"}),Object(r.jsx)(f.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(se.a,{variant:"ghost",borderRadius:"0",disabled:n<=0,onClick:function(){return i(t,--n)},children:"-"})}),Object(r.jsx)(ye.a,{mx:"4",fontSize:"md",children:n}),Object(r.jsx)(f.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(se.a,{variant:"ghost",borderRadius:"0",isDisabled:n>=5,onClick:function(){return i(t,++n)},children:"+"})})]})]})})},Se=function(e){var t,n,i=Object(k.a)("cities",H,{staleTime:6e5}),a=i.data,c=i.isLoading,s=(i.status,Object(x.g)()),l=e.search;o.a.useEffect((function(){e.updateSearch&&(console.log("update form"),e.updateSearch(l))}),[l]);return Object(r.jsx)(f.a,{p:"2",border:"1px",borderColor:"yellow.400",style:{backdropFilter:"blur(5px)"},children:Object(r.jsxs)(ne.a,{display:{lg:"flex"},alignItems:"center",children:[Object(r.jsxs)(re.a,{children:[Object(r.jsx)(ie.a,{pointerEvents:"none",children:Object(r.jsx)(ue.l,{})}),Object(r.jsx)(ae.a,{list:"datalist-cities",placeholder:"City",size:"lg",borderRadius:"0",onChange:function(t){return n=t.target.value,void(e.updateSearch&&(null===e||void 0===e||e.updateSearch(Object(u.a)(Object(u.a)({},e.search),{},{city:n}))));var n},value:e.search.city}),c?Object(r.jsx)(ie.b,{children:Object(r.jsx)(ce.a,{alignSelf:"center"})}):Object(r.jsx)("datalist",{id:"datalist-cities",children:null===a||void 0===a?void 0:a.map((function(e){return Object(r.jsx)("option",{value:e.cityName},e.id)}))})]}),Object(r.jsxs)(oe.a,{closeOnBlur:!0,children:[Object(r.jsx)(oe.c,{children:Object(r.jsxs)(se.a,{variant:"outline",w:["100%","100%","100%","150%"],size:"lg",_focusVisible:{border:"0"},borderRadius:"0",px:"2",children:[(null===l||void 0===l||null===(t=l.from)||void 0===t?void 0:t.toLocaleDateString())||"From"," - ",(null===l||void 0===l||null===(n=l.to)||void 0===n?void 0:n.toLocaleDateString())||"To"]})}),Object(r.jsx)(le.a,{children:Object(r.jsx)(oe.b,{flexWrap:"nowrap",alignItems:"center",style:{backdropFilter:"blur(5px)"},w:"100%",borderRadius:"0",bgColor:Object(de.e)("gray.100","gray.800"),children:Object(r.jsx)(ve,{updateDate:function(t,n){e.updateSearch&&(null===e||void 0===e||e.updateSearch(Object(u.a)(Object(u.a)({},e.search),{},{from:t,to:n})))}})})})]}),Object(r.jsxs)(oe.a,{children:[Object(r.jsx)(oe.c,{children:Object(r.jsx)(se.a,{variant:"outline",w:["100%","100%","100%","150%"],size:"lg",borderRadius:"0",px:"2",children:l.guestNum+" guests - "+l.childrenNum+" children"})}),Object(r.jsx)(le.a,{children:Object(r.jsx)(oe.b,{flexWrap:"nowrap",borderRadius:"0",bg:"inherit",bgColor:Object(de.e)("gray.100","gray.800"),children:Object(r.jsx)(we,{updatePeople:function(t,n){e.updateSearch&&(null===e||void 0===e||e.updateSearch(Object(u.a)(Object(u.a)({},e.search),{},{guestNum:t,childrenNum:n})))},guest:l.guestNum,children:l.childrenNum})})})]}),Object(r.jsx)(se.a,{alignSelf:"center",size:"lg",minW:"100px",ml:[0,0,0,2],onClick:e.onClickSearch?e.onClickSearch:function(){s.push({pathname:"/rooms",state:{search:e.search}})},isLoading:e.isLoading,mt:[2,2,2,0],w:["100%","100%","100%","30%"],borderRadius:"0",children:"Search"})]})})},Ce=n(264),ke=n.p+"static/media/HomeBG.c3c3859c.webp",Ie=n(246),De=n(262),Re=n(263),ze=n(62),Pe=n(281),Te=n(257),Fe=n(37),We=function(e){var t=Object(de.d)().toggleColorMode,n=Object(de.e)("dark","light"),i=Object(de.e)(Fe.f,Fe.i);return Object(r.jsx)(Te.a,Object(u.a)({size:"md",fontSize:"lg",variant:"ghost",color:"current",marginLeft:"2",onClick:t,icon:Object(r.jsx)(i,{}),"aria-label":"Switch to ".concat(n," mode")},e))},Le=n(158),Ee=n(58),Ne=n(14),Ae=n(258),qe=n(13),Ge=n.p+"static/media/logo.314a949b.svg";function He(){var e=Object(Le.a)(["\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n"]);return He=function(){return e},e}var Be=Object(Ee.b)(He()),Me=Object(Ne.a)((function(e,t){var n=Object(Ae.a)()?void 0:"".concat(Be," infinite 20s linear");return Object(r.jsx)(qe.a.img,Object(u.a)({animation:n,boxSize:"30px",src:Ge,ref:t},e))})),Ue=n(159),Ye=n(291),_e=o.a.createContext({}),$e=function(e){var t=e.children,n=o.a.useState(!1),i=Object(m.a)(n,2),a=i[0],c=i[1],s=o.a.useState(),l=Object(m.a)(s,2),d=l[0],u=l[1],j=o.a.useState(localStorage.getItem("token")),b=Object(m.a)(j,2),h=b[0],f=b[1],O=Object(x.g)(),p=Object(be.a)();o.a.useEffect((function(){F.interceptors.response.use((function(e){return e}),(function(e){return console.log(e),404===e.status&&O.push("/notfound"),Promise.reject(e)}))}),[]),o.a.useEffect((function(){var e=localStorage.getItem("token");e?(function(e){return fetch("".concat(T,"/api/user/validate-token"),{headers:{Authorization:"Bearer ".concat(e)}})}(e).then((function(e){if(console.log("validating..."),200!==e.status)return y("Token expired")})),f(e)):w({email:"test@mail.com",password:"password"})}),[]),o.a.useEffect((function(){if(h){var e=Object(Ue.a)(h);u({email:e.email,name:e.name,roles:e.roles,token:h,userId:e.userId})}}),[h]);var g=Object(Ye.a)(A,{onSuccess:function(e){f(e.data.token),localStorage.setItem("token",e.data.token),p({description:"Logged in successfully",status:"success",duration:3e3})},onError:function(e){p({description:e.data.message,status:"error",duration:3e3})},onSettled:function(){return c(!1)}}),v=Object(Ye.a)(q,{onSuccess:function(e){f(e.data.token),localStorage.setItem("token",e.data.token),p({description:"Logged in successfully",status:"success",duration:3e3})},onError:function(e){console.log(e.data);for(var t=0;t<e.data.messages.length;t++)p({description:e.data.messages[t],status:"error",duration:3e3})},onSettled:function(){return c(!1)}}),y=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1e3)}));case 2:return u(void 0),f(null),localStorage.removeItem("token"),p({title:t||"Logged out successfully!",isClosable:!0,duration:3e3,status:"success"}),e.next=8,new Promise((function(e){return setTimeout(e,500)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,new Promise((function(e){return setTimeout(e,1e3)}));case 3:try{g.mutate(t)}catch(n){console.log(n)}finally{c(!1)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,new Promise((function(e){return setTimeout(e,1e3)}));case 3:try{v.mutate(t)}catch(n){console.log(n)}finally{c(!1)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(_e.Provider,{value:{loginAsync:w,logoutAsync:y,updateToken:function(e){f(e)},isLoading:a,user:d,registerAsync:S},children:t})},Ve=n(69),Je=n(259),Xe=n(260),Ze=n(261),Qe=n(284);var Ke=function(e){var t=e.initRef,n=e.fromUrl,i=e.isRegistering,a=Object(x.g)(),c=o.a.useState({remember:!1,isRegistering:i}),s=Object(m.a)(c,2),l=s[0],d=s[1],j=o.a.useState(!1),b=Object(m.a)(j,2),h=b[0],f=b[1],O=o.a.useState(!1),p=Object(m.a)(O,2),g=p[0],v=p[1],y=o.a.useState(!1),w=Object(m.a)(y,2),S=w[0],C=w[1];o.a.useEffect((function(){var e,t;e=l.email,t=l.password,function(e){return!!e&&/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}(e)?f(!1):f(!0),v(""===t)}),[l.email,l.password]),o.a.useEffect((function(){l.isRegistering&&l.confirmedPassword===l.password?(console.log(l.password),console.log(l.confirmedPassword),C(!1),console.log(S)):C(!0)}),[l.confirmedPassword,l.isRegistering,l.password]);var k=o.a.useContext(_e);return Object(r.jsxs)(qe.a.form,{d:"flex",flexDir:"column",children:[Object(r.jsxs)(Ve.a,{isInvalid:h,children:[Object(r.jsx)(Je.a,{htmlFor:"email",children:"Email"}),Object(r.jsx)(ae.a,{placeholder:"Enter your email",id:"email",isInvalid:h,ref:t,variant:"filled",size:"lg",type:"email",value:l.email,isRequired:!0,onChange:function(e){return d((function(t){return Object(u.a)(Object(u.a)({},t),{},{email:e.target.value.trim()})}))}}),Object(r.jsx)(Xe.a,{children:"Email not correct"})]}),Object(r.jsxs)(Ve.a,{isInvalid:g,children:[Object(r.jsx)(Je.a,{htmlFor:"password",my:"2",children:"Password"}),Object(r.jsx)(ae.a,{placeholder:"Enter your password",id:"password",isInvalid:g,variant:"filled",size:"lg",type:"password",value:l.password,minLength:1,isRequired:!0,onChange:function(e){return d((function(t){return Object(u.a)(Object(u.a)({},t),{},{password:e.target.value})}))}})]}),Object(r.jsxs)(Ze.a,{in:l.isRegistering,children:[Object(r.jsxs)(Ve.a,{isInvalid:S,children:[Object(r.jsx)(Je.a,{htmlFor:"confirm-password",my:"2",children:"Confirm Password"}),Object(r.jsx)(ae.a,{placeholder:"Confirm your password",id:"confirm-password",isInvalid:S,variant:"filled",size:"lg",type:"password",value:l.confirmedPassword,minLength:1,isRequired:!0,onChange:function(e){return d((function(t){return Object(u.a)(Object(u.a)({},t),{},{confirmedPassword:e.target.value})}))}})]}),Object(r.jsx)(Xe.a,{children:"Password does not match"})]}),Object(r.jsx)(Qe.a,{size:"lg",checked:l.remember,mt:"2",onChange:function(e){return d((function(t){return Object(u.a)(Object(u.a)({},t),{},{remember:e.target.checked})}))},children:"Remember me"}),Object(r.jsx)(se.a,{my:"3",w:"30%",rounded:"full",type:"submit",alignSelf:"center",title:"Login",isLoading:k.isLoading,isDisabled:l.isRegistering?h||g||S:h||g,onClick:l.isRegistering?function(){k.registerAsync({email:l.email,password:l.password,confirmPassword:l.confirmedPassword}),n&&a.replace(n)}:function(){k.loginAsync(l),n&&a.replace(n)},children:Object(r.jsx)(Fe.a,{})}),Object(r.jsx)(se.a,{variant:"link",alignSelf:"center",textStyle:"",onClick:function(){d((function(e){return Object(u.a)(Object(u.a)({},e),{},{isRegistering:!e.isRegistering})}))},children:l.isRegistering?"Or login instead!":"Register your account!"})]})},et=function(e){var t,n=Object.assign({},e),i=o.a.useContext(_e),a=Object(Ie.a)(),c=o.a.useRef(null),s=o.a.useState(!1),l=Object(m.a)(s,2),d=l[0],j=l[1],b=(Object(x.h)().pathname,Object(de.e)("gray.800","gray.800"),Object(de.e)("white","white"),Object(de.e)("cyan.200","blue.400"));return Object(r.jsx)(f.a,Object(u.a)(Object(u.a)({marginBottom:["5%"]},n),{},{children:Object(r.jsxs)(ne.a,{justifyContent:"center",alignItems:"center",children:[Object(r.jsx)(p.b,{to:"/",children:Object(r.jsxs)(g.a,{spacing:4,children:[Object(r.jsx)(De.a,{children:Object(r.jsx)(Me,{})}),Object(r.jsx)(Re.a,{size:"md",display:{base:"none",sm:"block"},children:"Nice homestays"})]})}),Object(r.jsx)(Ce.a,{}),Object(r.jsxs)(g.a,{spacing:4,children:[Object(r.jsx)(We,{}),void 0===i.user?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(se.a,{variant:"ghost",onClick:function(){a.onOpen(),j(!1)},children:"Login"}),Object(r.jsxs)(ze.a,{isOpen:a.isOpen,onClose:a.onClose,size:"xl",motionPreset:"slideInBottom",isCentered:!0,initialFocusRef:c,children:[Object(r.jsx)(ze.g,{}),Object(r.jsxs)(ze.d,{children:[Object(r.jsx)(ze.f,{children:d?"Sign up new account":"Login"}),Object(r.jsx)(ze.c,{}),Object(r.jsx)(ze.b,{pb:"2",children:Object(r.jsx)(Ke,{initRef:c,isRegistering:d})})]})]}),Object(r.jsx)(se.a,{variant:"ghost",onClick:function(){a.onOpen(),j(!0)},children:"Register"})]}):Object(r.jsxs)(r.Fragment,{children:[i.user.roles.includes("Admin")&&Object(r.jsx)(se.a,{children:Object(r.jsx)(p.b,{to:"/verify",children:"Verify new properties"})}),Object(r.jsxs)(Pe.a,{children:[Object(r.jsx)(Pe.b,{as:se.a,variant:"ghost",rightIcon:Object(r.jsx)(ue.f,{}),children:i.user.name}),Object(r.jsxs)(Pe.e,{children:[Object(r.jsxs)(Pe.d,{as:p.b,to:"/profile?view=likes",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ue.c,{})}),"Saved rooms"]}),Object(r.jsxs)(Pe.d,{as:p.b,to:"/profile?view=reservations",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ue.e,{})}),"Your Reservations"]}),Object(r.jsxs)(Pe.d,{as:p.b,to:"/profile?view=notifications",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ue.b,{})}),"Notifications"]}),Object(r.jsx)(Pe.c,{}),(null===(t=i.user.roles)||void 0===t?void 0:t.includes("Owner"))?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Pe.d,{as:p.b,to:"/host/publish",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ue.j,{})}),"Host your property"]}),Object(r.jsxs)(Pe.d,{as:p.b,to:"/host/properties",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ue.i,{})}),"Your properties"]})]}):!i.user.roles.includes("Admin")&&Object(r.jsxs)(Pe.d,{bg:b,as:p.b,to:"/user/register-host",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ue.j,{})}),"Become a host"]}),Object(r.jsxs)(Pe.d,{as:p.b,to:"/",children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ue.k,{})}),"Account"]}),Object(r.jsx)(Pe.c,{}),Object(r.jsxs)(Pe.d,{onClick:function(){return i.logoutAsync()},children:[Object(r.jsx)(f.a,{mr:"3",children:Object(r.jsx)(ue.d,{})}),"Log Out"]})]})]})]})]})]})}))},tt=function(){var e=o.a.useState({childrenNum:0,guestNum:0}),t=Object(m.a)(e,2),n=t[0],i=t[1];return Object(r.jsxs)(f.a,{children:[Object(r.jsx)(f.a,{minH:["50vh","75vh","85vh"],style:{background:"url('"+ke+"') center/cover"},color:"white",children:Object(r.jsxs)(f.a,{px:"10%",pt:"5",children:[Object(r.jsx)(et,{}),Object(r.jsx)(de.c,{children:Object(r.jsx)(Se,{search:n,updateSearch:function(e){i(e)}})}),Object(r.jsx)(f.a,{as:"h1",fontFamily:"mono",textShadow:"gray 2px 2px 2px",color:"whiteAlpha.600",fontWeight:"bold",fontSize:["3xl","4xl","6xl","8xl"],mt:["5vh","10vh","20vh","30vh"],children:"EXPLORE AROUND"})]})}),Object(r.jsxs)(f.a,{px:"10%",mt:"10",children:[Object(r.jsxs)(g.a,{children:[Object(r.jsx)(f.a,{as:"h2",fontWeight:"bold",fontSize:"4xl",mb:"5",children:"LIVE ANYWHERE"}),Object(r.jsx)(Ce.a,{}),Object(r.jsxs)(v.a,{as:p.b,to:"/rooms",d:"flex",flexDir:"row",alignItems:"center",children:["All properties ",Object(r.jsx)(f.a,{ml:"2",children:Object(r.jsx)(ue.a,{})})]})]}),Object(r.jsx)(te,{})]})]})},nt=n(160),rt=n(267),it=function(e){var t,n,i,a,c,s=e.room,l=e.bookInfo,d=e.updateDate,u=e.updatePeople,j=o.a.useContext(_e),b=Object(x.g)(),h=Object(Ie.a)(),p=o.a.useState(0),v=Object(m.a)(p,2),w=v[0],S=v[1],C=Object(be.a)(),I=Object(k.a)(["pricing",l],(function(){if(l.roomId&&l.bookFromDate&&l.bookToDate)return function(e){return console.log(e),P.a.get(T+"/api/reservations/check-pricing",{params:{fromDate:e.bookFromDate,toDate:e.bookToDate,propertyId:e.roomId,guestNum:e.guest,childrenNum:e.children}})}(l)}),{onSuccess:function(e){return console.log(null===e||void 0===e?void 0:e.data)},staleTime:6e4}),z=Object(Ye.a)(N,{onSuccess:function(e){C({description:"Success",status:"success",isClosable:!0}),b.push("/profile?view=reservations")},onError:function(e){C({description:"Something's wrong",status:"error",isClosable:!0})}}),F=function(){var e=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.user){e.next=2;break}return e.abrupt("return",C({description:"Login is required",status:"info",isClosable:!0}));case 2:z.mutate(l);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=null===(t=I.data)||void 0===t?void 0:t.data;return o.a.useEffect((function(){return l.bookFromDate&&l.bookToDate?(S(pe(l.bookFromDate.toDateString(),l.bookToDate.toDateString()).length+1),h.onOpen()):h.onClose()}),[l.bookFromDate,l.bookToDate]),Object(r.jsxs)(f.a,{display:"inline-flex",flexDir:"column",alignContent:"center",justifyContent:"center",children:[Object(r.jsxs)(ne.a,{alignItems:"baseline",children:[Object(r.jsx)(f.a,{as:"h2",fontFamily:"mono",fontSize:"3xl",fontWeight:"semibold",children:s.formattedPrice+"$ "}),Object(r.jsx)(f.a,{as:"span",color:"gray.500",fontStyle:"italic",children:"/ per night"}),Object(r.jsx)(Ce.a,{}),Object(r.jsx)(f.a,{d:"flex",alignItems:"center",children:Array(5).fill("").map((function(e,t){return t<Math.round(s.totalStar/s.totalReview)?Object(r.jsx)(ue.n,{colorRendering:"teal.400"},t):Object(r.jsx)(ue.m,{},t)}))})]}),Object(r.jsxs)(f.a,{mt:"4",children:[Object(r.jsxs)(oe.a,{closeOnBlur:!0,children:[Object(r.jsx)(oe.c,{children:Object(r.jsxs)(g.a,{spacing:"0",children:[Object(r.jsx)(se.a,{variant:"outline",borderTopLeftRadius:"lg",size:"lg",w:"100%",_focusVisible:{border:"0"},borderRadius:"0",children:(null===l||void 0===l||null===(n=l.bookFromDate)||void 0===n?void 0:n.toLocaleDateString())||"From"}),Object(r.jsx)(se.a,{variant:"outline",borderTopRightRadius:"lg",size:"lg",w:"100%",_focusVisible:{border:"0"},borderRadius:"0",children:(null===l||void 0===l||null===(i=l.bookToDate)||void 0===i?void 0:i.toLocaleDateString())||"To"})]})}),Object(r.jsx)(oe.b,{flexWrap:"nowrap",alignItems:"center",w:{base:"100%",lg:"550px"},style:{backdropFilter:"blur(5px)"},borderRadius:"0",bg:"inherit",bgColor:"rgba(66, 153, 225, 0.5)",children:Object(r.jsx)(ve,{schedules:{reservedDates:s.reservedDates,dayOff:s.daysOff},updateDate:d})})]}),Object(r.jsxs)(oe.a,{children:[Object(r.jsx)(oe.c,{children:Object(r.jsx)(se.a,{variant:"outline",w:"100%",size:"lg",borderRadius:"0",borderBottomRadius:"lg",px:"2",children:l.guest+" guests - "+l.children+" children"})}),Object(r.jsx)(oe.b,{flexWrap:"nowrap",borderRadius:"0",bg:"inherit",bgColor:"rgba(66, 153, 225, 0.5)",children:Object(r.jsx)(we,{updatePeople:u,guest:l.guest,children:l.children,maxGuest:s.maxGuest})})]})]}),Object(r.jsx)(se.a,{variant:"solid",colorScheme:"green",alignSelf:"stretch",mt:"4",isDisabled:!h.isOpen||s.ownerInfo.userId===(null===(a=j.user)||void 0===a?void 0:a.userId),onClick:F,children:s.ownerInfo.userId===(null===(c=j.user)||void 0===c?void 0:c.userId)?"You can't book your own property":h.isOpen?"Proceed checkout":"Choose dates to see detail"}),Object(r.jsx)(f.a,{alignSelf:"center",my:"2",fontWeight:"thin",fontStyle:"oblique",children:"You won't be charged yet"}),Object(r.jsx)(Ze.a,{in:h.isOpen,children:Object(r.jsxs)(f.a,{fontSize:"lg",children:[Object(r.jsxs)(ne.a,{alignItems:"baseline",children:[Object(r.jsx)(y.a,{label:w&&"You are currently booking ".concat(null===W||void 0===W?void 0:W.nightCount," night(s)"),placement:"left",hasArrow:!0,children:Object(r.jsxs)(f.a,{fontWeight:"light",textDecoration:"underline",children:[s.formattedPrice,"$ x ",null===W||void 0===W?void 0:W.nightCount," nights"]})}),Object(r.jsx)(Ce.a,{}),I.isLoading?Object(r.jsx)(ce.a,{}):Object(r.jsx)(f.a,{fontFamily:"mono",children:W&&"".concat((null===W||void 0===W?void 0:W.pricePerNight)*(null===W||void 0===W?void 0:W.nightCount)," $")})]}),Object(r.jsxs)(ne.a,{alignItems:"baseline",children:[Object(r.jsx)(y.a,{label:"The owner keeps your place in highest cleanliness",placement:"left",hasArrow:!0,children:Object(r.jsx)(f.a,{fontWeight:"light",textDecoration:"underline",children:"Cleaning fee"})}),Object(r.jsx)(Ce.a,{}),I.isLoading?Object(r.jsx)(ce.a,{}):Object(r.jsxs)(f.a,{fontFamily:"mono",children:[null===W||void 0===W?void 0:W.cleaningFee," $"]})]}),Object(r.jsxs)(ne.a,{alignItems:"baseline",children:[Object(r.jsx)(y.a,{label:"This helps us run our platform and offer services like 24/7 support on your trip. It includes VAT.",placement:"left",hasArrow:!0,children:Object(r.jsx)(f.a,{fontWeight:"light",textDecoration:"underline",children:"Service fee"})}),Object(r.jsx)(Ce.a,{}),I.isLoading?Object(r.jsx)(ce.a,{}):Object(r.jsxs)(f.a,{fontFamily:"mono",children:[null===W||void 0===W?void 0:W.serviceFee," $"]})]}),Object(r.jsxs)(ne.a,{alignItems:"baseline",children:[Object(r.jsx)(y.a,{label:"We offer you discount based on your reservation!",placement:"left",hasArrow:!0,children:Object(r.jsxs)(f.a,{fontWeight:"light",textDecoration:"underline",children:["Discount",Object(r.jsx)(f.a,{as:"span",textDecoration:"none",mx:"2",children:W?W.discountPercent+"%":"0%"})]})}),Object(r.jsx)(Ce.a,{}),I.isLoading?Object(r.jsx)(ce.a,{}):Object(r.jsxs)(f.a,{fontFamily:"mono",children:[null===W||void 0===W?void 0:W.discount," $"]})]}),Object(r.jsx)(O.a,{my:"2",colorScheme:"green",variant:"dashed"}),Object(r.jsxs)(ne.a,{fontWeight:"black",fontSize:"3xl",children:[Object(r.jsx)(f.a,{fontFamily:"mono",children:"Total"}),Object(r.jsx)(Ce.a,{}),I.isLoading?Object(r.jsx)(ce.a,{}):Object(r.jsxs)(f.a,{fontFamily:"mono",children:[null===W||void 0===W?void 0:W.totalCost," $"]})]})]})})]})},at=n(78),ct=n(126),ot=[{id:"1",title:"Helpful owner",description:"Owner provides best services"},{id:"2",title:"Extra clean",description:"Owner follows our strict policies of enhanced clealiness"},{id:"3",title:"Not smoking",description:"Owner does not allow smoking inside"},{id:"4",title:"Free cancelation",description:"You can cancel with full refund in 24 hours"}],st=function(e){var t=e.id,n=o.a.useState(),i=Object(m.a)(n,2),a=i[0],c=i[1],s=o.a.useState(),l=Object(m.a)(s,2),d=l[0],u=l[1];return o.a.useEffect((function(){var e=ot.find((function(e){return e.id===t}));switch(u(e),t){case"1":c(ct.b);break;default:c(ct.a)}}),[t]),Object(r.jsxs)(g.a,{alignContent:"center",spacing:"0",mb:"2",children:[Object(r.jsx)(at.a,{d:"flex",boxSize:"10",alignItems:"center",justifyContent:"center",mt:"2",ml:"2",children:a}),Object(r.jsxs)(g.d,{alignItems:"start",spacing:"0",children:[Object(r.jsx)(f.a,{as:"h4",fontSize:"md",fontWeight:"semibold",children:null===d||void 0===d?void 0:d.title}),Object(r.jsx)(f.a,{as:"h5",fontSize:"sm",m:"0",children:null===d||void 0===d?void 0:d.description})]})]})},lt=n(266),dt=n(96),ut=function(e){var t=e.propertyId,n=e.isOpen,i=e.onClose,a=e.onDelete,c=e.message,o=e.headerMessage,s=e.leastDestructiveRef,l=Object(j.a)(e,["propertyId","isOpen","onClose","onDelete","message","headerMessage","leastDestructiveRef"]),d=Object(be.a)(),b=Object(dt.b)(),h=Object(Ye.a)(["property",t],(function(){return X(t)}),{onSuccess:function(e){d({description:"Successful!",status:"success"}),b.removeQueries(["property",t])},onError:function(e){d({description:"Error"+JSON.stringify(e),status:"error"})},onSettled:function(){return i()}});return Object(r.jsxs)(lt.a,Object(u.a)(Object(u.a)({motionPreset:"slideInBottom",leastDestructiveRef:s,onClose:i,isOpen:n,isCentered:!0},l),{},{children:[Object(r.jsx)(ze.g,{}),Object(r.jsxs)(lt.b,{children:[Object(r.jsx)(ze.f,{children:o||"Confirm your action"}),Object(r.jsx)(ze.c,{}),Object(r.jsx)(ze.b,{children:c||"Are you sure you want to proceed the action?"}),Object(r.jsxs)(ze.e,{children:[Object(r.jsx)(se.a,{ref:s,onClick:i,children:"No"}),Object(r.jsx)(se.a,{colorScheme:"red",ml:3,onClick:function(){if(a)return a();h.mutate()},isLoading:h.isLoading,children:"Yes"})]})]})]}))},jt=function(e){var t,n,i,a=e.propId,c=(Object(j.a)(e,["propId"]),Object(k.a)(["reviews",a],(function(){return $(a)}),{retry:2,onSuccess:function(e){}})),o=(null===(t=c.data)||void 0===t?void 0:t.data)?c.data.data:[],s=0;return o.forEach((function(e){return s+=e.starCount})),Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(f.a,{d:"flex",gridGap:"2",alignItems:"baseline",fontWeight:"semibold",fontSize:"2xl",mb:"5",children:[Object(r.jsx)(ue.n,{}),Object(r.jsxs)(f.a,{as:"h2",children:[" ",0!=o.length?(s/o.length).toPrecision(2):0," (",o.length," reviews)"]})]}),0===(null===(n=c.data)||void 0===n?void 0:n.data.length)?Object(r.jsx)(f.a,{fontWeight:"light",children:"Looks like this property does not have any reviews"}):Object(r.jsxs)(f.a,{d:"flex",flexWrap:"wrap",gridGap:"5",children:[null===(i=c.data)||void 0===i?void 0:i.data.map((function(e){return Object(r.jsx)(ht,{review:e},e.reviewId)})),Object(r.jsx)(ht,{review:bt}),Object(r.jsx)(ht,{review:bt}),Object(r.jsx)(ht,{review:bt})]})]})},bt={user:{name:"Test user name",userId:"123",profileImageUrl:""},comment:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Id, repellat. Harum, facilis corrupti eligendi laborum minus nihil et a mollitia!",propertyId:"1",reviewId:"123123",starCount:4,timeCreated:"20202020",timeUpdated:"20202020"},ht=function(e){var t,n=e.review,i=Object(j.a)(e,["review"]);return Object(r.jsxs)(f.a,Object(u.a)(Object(u.a)({},i),{},{flex:"1 1 25em",children:[Object(r.jsxs)(f.a,{d:"flex",flexDir:"row",gridGap:"2",children:[Object(r.jsx)(rt.a,{name:null===(t=n.user)||void 0===t?void 0:t.name,src:n.user.profileImageUrl}),Object(r.jsxs)(f.a,{d:"flex",flexDir:"column",children:[Object(r.jsx)(f.a,{as:"h4",fontWeight:"bold",children:n.user.name}),Object(r.jsx)(f.a,{as:"h4",fontWeight:"light",children:n.timeUpdated})]})]}),Object(r.jsx)(f.a,{as:"h4",children:n.comment})]}))},ft=ot,Ot=function(e){e.initRoom,e.children;var t,n,i=o.a.useContext(_e),a=o.a.useState(),c=Object(m.a)(a,2),s=c[0],l=c[1],d=o.a.useState({guest:0,children:0}),j=Object(m.a)(d,2),b=j[0],h=j[1],p=o.a.useState(!1),v=Object(m.a)(p,2),y=v[0],S=v[1],C=Object(x.i)().slug,I=Object(be.a)(),D=Object(x.g)(),R=Object(Ie.a)(),z=o.a.useRef(null),P=Object(k.a)(["property",C],(function(){return M(C)}),{staleTime:18e4,retry:2,onError:function(e){console.log(e)},onSuccess:function(e){e.data.liked&&S(e.data.liked),console.log(e.data),l(Object(u.a)(Object(u.a)({},e.data),{},{roomBadges:ft})),h((function(t){return Object(u.a)(Object(u.a)({},t),{},{roomId:e.data.id})}))},onSettled:function(){}}),T=(P.data,P.isError,P.error,P.isLoading),F=Object(Ye.a)(Q,{onSuccess:function(e){S(e.data.liked),I({description:e.data.liked?"Saved room":"Removed from wishlist",status:"info",duration:1e3})},onError:function(e){return console.log(e)}}),W=function(e,t){h((function(n){return Object(u.a)(Object(u.a)({},n),{},{bookFromDate:e,bookToDate:t})}))},L=Object(x.h)();return T?Object(r.jsx)(De.a,{children:Object(r.jsx)(ce.a,{})}):s?Object(r.jsxs)(f.a,{children:[Object(r.jsx)(O.a,{my:"5"}),Object(r.jsx)(f.a,{as:"h2",fontSize:"3xl",fontWeight:"semibold",children:s.name}),Object(r.jsxs)(f.a,{d:"flex",mt:"1",flexDir:{base:"column",sm:"row"},justifyItems:"baseline",children:[Object(r.jsxs)(f.a,{d:"flex",alignItems:"start",children:[Object(r.jsxs)(f.a,{d:"flex",flexDir:{base:"column",sm:"row"},children:[Object(r.jsx)(f.a,{d:"flex",flexDir:{base:"row"},children:Array(5).fill("").map((function(e,t){return t<Math.round(s.totalStar/s.totalReview)?Object(r.jsx)(ue.n,{colorRendering:"teal.400"},t):Object(r.jsx)(ue.m,{},t)}))}),Object(r.jsxs)(f.a,{as:"span",ml:"2",color:"gray.500",children:[s.totalReview," reviews"]})]}),Object(r.jsx)(f.a,{mx:"4",children:"\u2022"}),Object(r.jsx)(se.a,{variant:"link",onClick:function(){return function(e){D.push({pathname:"/rooms",state:{search:{city:e}}})}(s.location)},children:s.location})]}),Object(r.jsx)(Ce.a,{}),s.ownerInfo.userId===(null===(t=i.user)||void 0===t?void 0:t.userId)&&Object(r.jsxs)(r.Fragment,{children:["IsActive"==s.propertyStatus?Object(r.jsx)(se.a,{colorScheme:"red",mr:"2",onClick:R.onOpen,children:"Close this property"}):Object(r.jsx)(se.a,{colorScheme:"green",mr:"2",onClick:R.onOpen,children:"Reopen this property"}),Object(r.jsx)(se.a,{onClick:function(){D.push(Object(u.a)(Object(u.a)({},L),{},{pathname:"/host/publish",search:"?id=".concat(null===s||void 0===s?void 0:s.id)}))},children:"Edit"}),Object(r.jsx)(ut,{isOpen:R.isOpen,onClose:R.onClose,propertyId:s.id,leastDestructiveRef:z,headerMessage:"IsActive"==s.propertyStatus?"Close your property":"Reopen this property",message:"IsActive"==s.propertyStatus?"Closing this property will prevent further reservations. Please confirm your action!":"Reopen this property will allow guest to find your property and make reservations",children:" "})]}),Object(r.jsx)(se.a,{alignSelf:"start",variant:"ghost",onClick:function(){s&&(i.user?F.mutate({roomId:s.id,token:i.user.token}):I({description:"Login is required",status:"info",duration:1e3}))},leftIcon:y&&i.user?Object(r.jsx)(ue.h,{color:"red"}):Object(r.jsx)(ue.g,{}),children:"Like"})]}),Object(r.jsx)(f.a,{borderRadius:"lg",overflow:"hidden",mt:"4",children:Object(r.jsx)(nt.a,{gap:"2",h:"40%",maxH:"450px",objectFit:"cover",templateRows:"repeat(2, 1fr)",templateColumns:"repeat(4, 1fr)",children:s.images.slice(0,5).map((function(e,t){return Object(r.jsx)(nt.b,{colSpan:0===t?2:1,rowSpan:0===t?2:1,overflow:"hidden",children:Object(r.jsx)(w.a,{src:e.url,h:"auto",height:"100%",w:"100%",objectFit:"cover",loading:"lazy"})},t)}))})}),Object(r.jsxs)(f.a,{mt:"4",d:["flex","flex","flex","block"],flexDir:"column-reverse",children:[Object(r.jsx)(f.a,{w:["100%","100%","100%","35%"],boxShadow:"2xl",mt:{base:"4",lg:"0"},top:"30%",float:{lg:"right"},position:{lg:"sticky"},borderRadius:"lg",display:"inline-flex",flexDir:"column",zIndex:1,borderWidth:"thin",p:"4",alignContent:"center",justifyContent:"center",children:Object(r.jsx)(it,{room:s,bookInfo:b,updateDate:W,updatePeople:function(e,t){h((function(n){return Object(u.a)(Object(u.a)({},n),{},{guest:e,children:t})}))}})}),Object(r.jsxs)(f.a,{w:["100%","100%","100%","60%"],children:[Object(r.jsxs)(ne.a,{alignItems:"center",children:[Object(r.jsxs)(g.d,{alignItems:"start",children:[Object(r.jsx)(f.a,{as:"h1",fontSize:"2xl",fontWeight:"semibold",children:"Owner: "+s.ownerInfo.name}),Object(r.jsx)(g.a,{children:s.services&&s.services.map((function(e,t){return Object(r.jsxs)(f.a,{color:"gray.500",fontWeight:"semibold",letterSpacing:"wide",fontSize:"xs",textTransform:"uppercase",ml:"2",isTruncated:!0,children:[e.serviceName," ",s.services[s.services.length-1]!==e&&Object(r.jsx)(r.Fragment,{children:"\u2022"})," "]},t)}))})]}),Object(r.jsx)(Ce.a,{}),Object(r.jsx)(rt.a,{name:s.ownerInfo.name,src:s.ownerInfo.profileImageUrl,cursor:"pointer",onClick:function(){return alert("go to user's page")}})]}),Object(r.jsx)(O.a,{my:"3"}),null===(n=s.roomBadges)||void 0===n?void 0:n.map((function(e,t){return Object(r.jsx)(st,{id:e.id},t)})),Object(r.jsx)(O.a,{my:"3"}),Object(r.jsx)(f.a,{as:"h5",fontWeight:"semibold",fontSize:"2xl",children:"More about room"}),Object(r.jsx)(f.a,{as:"p",children:s.introduction}),Object(r.jsx)(O.a,{my:"3"}),Object(r.jsx)(f.a,{w:"100%",display:{base:"none",sm:"block"},children:Object(r.jsx)(ve,{schedules:{reservedDates:s.reservedDates,dayOff:s.daysOff},updateDate:W})})]})]}),Object(r.jsx)(O.a,{my:"5"}),Object(r.jsx)(jt,{propId:s.id})]}):Object(r.jsx)(r.Fragment,{})},pt=n(290),xt=function(){var e=Object(x.h)();if(e.state){var t=e.state.message;return Object(r.jsxs)(pt.a,{status:"error",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[Object(r.jsx)(pt.c,{boxSize:"40px",mr:0}),Object(r.jsx)(pt.d,{mt:4,mb:1,fontSize:"lg",children:t}),Object(r.jsx)(pt.b,{maxWidth:"md",children:"Look like you have some problems! Contact us for more info!"})]})}return Object(r.jsxs)(pt.a,{status:"info",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[Object(r.jsx)(pt.c,{boxSize:"40px",mr:0}),Object(r.jsx)(pt.d,{mt:4,mb:1,fontSize:"lg",children:"Not Found!"}),Object(r.jsx)(pt.b,{maxWidth:"md",children:"The page you are looking does not exist or was deleted"})]})},mt=n(270),gt=n(269),vt=n(268),yt=function(e){var t=e.room,n=e.isSaved,i=Object(j.a)(e,["room","isSaved"]);return Object(r.jsxs)(f.a,Object(u.a)(Object(u.a)({borderWidth:"1px",borderRadius:"lg"},i),{},{bg:Object(de.e)("gray.100","gray.900"),d:"flex",flexDir:"column",children:[Object(r.jsx)(v.a,{as:p.b,to:"/rooms/"+t.id,children:Object(r.jsx)(f.a,{minH:"200px",maxH:"300px",overflow:"hidden",children:Object(r.jsx)(w.a,{src:t.thumbnailUrl,objectFit:"cover",fit:"cover",fallback:Object(r.jsx)(f.a,{bgColor:"gray",color:"gray"}),alt:t.thumbnailAlt,overflow:"hidden",style:{transition:"ease 0.5s"},_hover:{transform:"scale(1.1)"}})})}),Object(r.jsx)(Ce.a,{}),Object(r.jsxs)(f.a,{p:"4",d:"flex",flexDir:"column",children:[!n&&Object(r.jsxs)(f.a,{d:"flex",alignItems:"baseline",children:[Object(r.jsx)(vt.a,{borderRadius:"full",px:"2",colorScheme:"teal",children:"New"}),t.services&&t.services.map((function(e,n){return Object(r.jsxs)(f.a,{color:"gray.500",fontWeight:"semibold",letterSpacing:"wide",fontSize:"xs",textTransform:"uppercase",ml:"2",isTruncated:!0,children:[e.serviceName," ",t.services[t.services.length-1]!==e&&Object(r.jsx)(r.Fragment,{children:"\u2022"})," "]},n)}))]}),Object(r.jsx)(f.a,{mt:"1",fontWeight:"semibold",as:"h4",lineHeight:"tight",children:t.name}),!n&&Object(r.jsx)(f.a,{as:"p",lineHeight:"tight",textOverflow:"ellipsis",overflow:"hidden",children:t.description.length>100?t.description.substring(0,100)+"...":t.description}),Object(r.jsxs)(f.a,{d:"flex",flexWrap:"wrap",justifySelf:"end",alignItems:"baseline",flexDir:"row",children:[Object(r.jsx)(f.a,{as:"h4",fontSize:"3xl",children:t.formattedPrice+"$"}),Object(r.jsx)(f.a,{as:"span",color:"gray.500",fontStyle:"italic",children:"/ per night"}),Object(r.jsx)(f.a,{d:"flex",alignItems:"center",alignSelf:"center",ml:"auto",children:Array(5).fill("").map((function(e,n){return n<Math.round(t.totalStar/t.totalReview)?Object(r.jsx)(ue.n,{colorRendering:"teal.400"},n):Object(r.jsx)(ue.m,{},n)}))})]})]})]}))},wt={id:"random-id-12321",name:"Crystal palace",thumbnailUrl:"https://picsum.photos/1100/1000?random=1",thumbnailAlt:"rear view house with pool",description:"Best place in townBest place in townBest place in townBest ",location:"Dark side, the moon",totalReview:4,totalStar:23,formattedPrice:2021,services:[]},St=(Object(u.a)(Object(u.a)({},wt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=1"}),Object(u.a)(Object(u.a)({},wt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=2"}),Object(u.a)(Object(u.a)({},wt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=3"}),Object(u.a)(Object(u.a)({},wt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=4"}),Object(u.a)(Object(u.a)({},wt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=5"}),function(e){var t=e.rooms,n=Object(j.a)(e,["rooms"]);return t&&0!==t.length?Object(r.jsx)(gt.a,Object(u.a)(Object(u.a)({spacing:"8",columns:[1,1,1,2,3]},n),{},{children:t&&t.map((function(e,t){return Object(r.jsx)(yt,{room:e,isSaved:!1},e.id)}))})):Object(r.jsx)(f.a,{children:"Not found any room"})}),Ct=function(e){e.label,e.onClose;var t=Object(j.a)(e,["label","onClose"]);return Object(r.jsxs)(mt.a,Object(u.a)(Object(u.a)({size:"lg",colorScheme:"green"},t),{},{children:[Object(r.jsx)(mt.c,{children:e.label}),Object(r.jsx)(mt.b,{onClick:function(){return e.onClose()}})]}))},kt=function(){new URLSearchParams(Object(x.h)().search);var e=Object(de.e)("gray.100","gray.900"),t=Object(x.h)(),n=o.a.useState({childrenNum:0,guestNum:0}),i=Object(m.a)(n,2),a=i[0],c=i[1],s=o.a.useState(),l=Object(m.a)(s,2),d=l[0],j=l[1];o.a.useEffect((function(){void 0!==t.state&&t.state.search&&c(t.state.search),void 0!==t.state&&t.state.type&&j(t.state.type)}),[]);var b=[null===d||void 0===d?void 0:d.id,a],h=Object(k.a)(["propertyView",b],(function(){return G(null===d||void 0===d?void 0:d.id,a)}),{staleTime:6e4}),O=h.data,p=h.isLoading,v=h.error,y=h.refetch,w=h.remove;return v?Object(r.jsx)(r.Fragment,{children:"Error"}):Object(r.jsxs)(f.a,{d:"flex",flexDir:"column",gridGap:"5",children:[Object(r.jsxs)(f.a,{position:{lg:"sticky"},top:0,bgColor:e,d:"flex",flexDir:"column",boxShadow:"2xl",gridGap:"5",pb:"5",children:[Object(r.jsx)(Se,{search:a,updateSearch:function(e){c(e)},isLoading:p,onClickSearch:function(){w(),y()}}),Object(r.jsxs)(g.a,{children:[d&&Object(r.jsx)(Ct,{label:"Property type: "+d.propertyType,onClose:function(){j(void 0)}}),a.city&&Object(r.jsx)(Ct,{label:a.city,onClose:function(){c((function(e){return Object(u.a)(Object(u.a)({},e),{},{city:""})}))}}),a.from&&Object(r.jsx)(Ct,{label:"From: "+a.from.toLocaleDateString(),onClose:function(){c((function(e){return Object(u.a)(Object(u.a)({},e),{},{from:void 0})}))}}),a.to&&Object(r.jsx)(Ct,{label:"To: "+a.to.toLocaleDateString(),onClose:function(){c((function(e){return Object(u.a)(Object(u.a)({},e),{},{to:void 0})}))}}),a.guestNum>0&&Object(r.jsx)(Ct,{label:a.guestNum+" guests",onClose:function(){c((function(e){return Object(u.a)(Object(u.a)({},e),{},{guestNum:0})}))}}),a.childrenNum>0&&Object(r.jsx)(Ct,{label:a.childrenNum+" children",onClose:function(){c((function(e){return Object(u.a)(Object(u.a)({},e),{},{childrenNum:0})}))}})]})]}),Object(r.jsx)(f.a,{as:"h3",mb:"5",fontSize:"4xl",fontWeight:"bold",children:"Find place that fits you most..."}),p?Object(r.jsx)(ce.a,{color:"green",size:"lg",alignSelf:"center"}):Object(r.jsx)(St,{rooms:null===O||void 0===O?void 0:O.data})]})},It=(n(222),n(157)),Dt=function(e){return Object(r.jsxs)(ye.a,Object(u.a)(Object(u.a)({fontSize:"sm"},e),{},{children:["\xa9 ",(new Date).getFullYear()," Hai, Inc. All rights reserved."]}))},Rt=function(e){var t="";"fb"===e?t="https://facebook.com":"github"===e?t="https://github.com/haihaibeo":"reddit"===e&&(t="https://reddit.com/user/haihaibeo"),window.open(t,"_blank").focus()},zt=function(e){return Object(r.jsxs)(It.a,Object(u.a)(Object(u.a)({variant:"ghost",color:"gray.600"},e),{},{children:[Object(r.jsx)(Te.a,{as:"a",href:"#","aria-label":"Facebook",onClick:function(){return Rt("fb")},icon:Object(r.jsx)(Fe.c,{fontSize:"20px"})}),Object(r.jsx)(Te.a,{as:"a",href:"#","aria-label":"GitHub",onClick:function(){return Rt("github")},icon:Object(r.jsx)(Fe.d,{fontSize:"20px"})}),Object(r.jsx)(Te.a,{as:"a",href:"#","aria-label":"Reddit",onClick:function(){return Rt("reddit")},icon:Object(r.jsx)(Fe.h,{fontSize:"20px"})})]}))},Pt=function(e){e.children;var t=Object(j.a)(e,["children"]);return Object(r.jsx)(f.a,Object(u.a)(Object(u.a)({as:"footer",role:"contentinfo",py:"12"},t),{},{children:Object(r.jsx)(g.b,{spacing:"10",divider:Object(r.jsx)(g.c,{}),children:Object(r.jsxs)(g.b,{direction:{base:"column-reverse",md:"row"},justifyContent:"space-between",alignItems:"center",children:[Object(r.jsx)(Dt,{}),Object(r.jsx)(zt,{})]})})}))},Tt=n(283),Ft=n(271),Wt=n(272),Lt=function(e){var t=o.a.useState(0),n=Object(m.a)(t,2),i=n[0],a=n[1],c=o.a.useState(0),s=Object(m.a)(c,2),l=s[0],d=s[1],j=o.a.useState(),b=Object(m.a)(j,2),h=b[0],O=b[1],p=Object(de.e)("red","yellow"),x=Object(be.a)(),g=e.onClose,v=Object(Ye.a)(L,{onSuccess:function(e){console.log(e.data),x({description:"Successfully sent review",status:"success"})},onError:function(e){console.log(e)}});return Object(r.jsxs)(ze.a,Object(u.a)(Object(u.a)({},e),{},{onClose:function(){d(0),g()},children:[Object(r.jsx)(ze.g,{}),Object(r.jsxs)(ze.d,{children:[Object(r.jsx)(ze.f,{children:"Write a review"}),Object(r.jsx)(ze.b,{children:Object(r.jsxs)(ne.a,{flexDir:"column",gridGap:"2",children:[Object(r.jsx)(f.a,{children:Array(5).fill(5).map((function(e,t){return Object(r.jsx)(Te.a,{variant:"ghost","aria-label":"star",onClick:function(){d(t+1)},_focus:{borderWidth:"1px"},borderRadius:"full",onMouseOver:function(){return a(t+1)},onMouseLeave:function(){return a(0)},icon:i>t||l>t?Object(r.jsx)(ue.n,{color:p}):Object(r.jsx)(ue.m,{})},t)}))}),Object(r.jsx)(Ft.a,{size:"md",placeholder:"Please describe some of your thoughts",value:h,onChange:function(e){return O(e.target.value)}}),Object(r.jsx)(se.a,{ml:"auto",isDisabled:l<=0,onClick:function(){v.mutate({propertyId:e.propId,starCount:l,reviewComment:h,reservationId:e.reservationId})},children:"Send"})]})})]})]}))},Et=function(e){var t,n=Object(Ie.a)(),i=o.a.useContext(_e),a=Object(be.a)(),c=o.a.useState(""),s=Object(m.a)(c,2),l=s[0],d=s[1],j=Object(k.a)(["reservations",null===(t=i.user)||void 0===t?void 0:t.token],_,{onSuccess:function(e){},retry:2}),b=j.data,h=(j.error,j.isError),p=Object(Ye.a)(J,{onSuccess:function(){a({description:"Reservation is canceled",status:"success"})},onError:function(e){a({description:e.errors,status:"success"})}});return 0===(null===b||void 0===b?void 0:b.data.length)?Object(r.jsx)(f.a,{children:"You don't have any reservations"}):h?Object(r.jsx)(f.a,{children:"Something's wrong"}):Object(r.jsx)(f.a,Object(u.a)(Object(u.a)({},e),{},{children:Object(r.jsxs)(ne.a,{gridGap:"2",flexDir:"column",children:[Object(r.jsx)(f.a,{as:"h1",fontFamily:"heading",fontWeight:"bold",fontSize:"4xl",mb:"3",children:"Your reservations"}),null===b||void 0===b?void 0:b.data.map((function(e){return Object(r.jsx)(f.a,{borderWidth:"1px",p:"2",style:{transition:"ease 0.3s"},_hover:{transform:"scale(1.02)"},bg:Object(de.e)("gray.100","gray.800"),borderRadius:"10px",children:Object(r.jsxs)(ne.a,{w:"100%",flexDir:"row",gridGap:"2",children:[Object(r.jsx)(g.b,{w:"100%",gridGap:"2",children:Object(r.jsx)(Wt.b,{h:"100%",children:Object(r.jsxs)(nt.a,{h:"100%",fontWeight:"bold",gridTemplateColumns:{base:"1fr",md:"1fr 1fr"},templateRows:"auto",gridGap:"2",children:[Object(r.jsx)(Wt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"From Date: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.fromDate}),Object(r.jsx)(Wt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"To Date: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.toDate}),Object(r.jsx)(Wt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"Total Cost: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.total}),Object(r.jsx)(Wt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"Reserved from: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.createdAt}),Object(r.jsx)(Wt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"Reservations Status: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.reservationStatus}),Object(r.jsx)(Wt.a,{children:Object(r.jsx)(f.a,{as:"h3",children:"Payment Status: "})}),Object(r.jsx)(f.a,{fontWeight:"light",children:e.paymentStatus}),Object(r.jsx)(se.a,{colorScheme:"green",onClick:function(){d(e.property.id),n.onOpen()},children:"Write a review"}),Object(r.jsx)(se.a,{colorScheme:"red",isDisabled:"on reserved"!==e.reservationStatus.toLowerCase(),onClick:function(){var t;t=e.id,p.mutate(t)},children:"Cancel reservation"})]})})}),Object(r.jsx)(f.a,{ml:"auto",children:Object(r.jsx)(O.a,{orientation:"vertical",borderColor:"currentcolor"})}),Object(r.jsx)(yt,{room:e.property,isSaved:!0,flex:"0 0 15em",borderWidth:"0px"})]},e.id)})})),Object(r.jsx)(Lt,{isOpen:n.isOpen,isCentered:!0,onClose:n.onClose,reservationId:"",propId:l})]})}))},Nt=function(){var e=Object(k.a)("propertiesLiked",(function(){return F.get(T+"/api/properties/saved")}),{onSuccess:function(e){},refetchOnMount:"always"}).data;return 0===(null===e||void 0===e?void 0:e.data.length)?Object(r.jsx)(f.a,{children:"Looks like you didn't save any room"}):Object(r.jsxs)(f.a,{children:[Object(r.jsx)(f.a,{as:"h1",fontFamily:"heading",fontWeight:"bold",fontSize:"4xl",mb:"3",children:"Rooms that you saved"}),Object(r.jsx)(gt.a,{spacing:"4",columns:{base:1,lg:2},children:null===e||void 0===e?void 0:e.data.map((function(e){return Object(r.jsx)(yt,{room:e,isSaved:!0},e.id)}))})]})},At=function(){return Object(r.jsx)(f.a,{children:"Notification"})},qt=function(){var e,t=o.a.useContext(_e).user,n=null===(e=Z().get("view"))||void 0===e?void 0:e.toLowerCase();return Object(r.jsxs)(f.a,{d:"flex",flexDir:{base:"column",md:"row"},children:[Object(r.jsx)(f.a,{w:{base:"100%",md:"25%"},minW:"300px",children:Object(r.jsxs)(f.a,{d:"flex",overflow:"hidden",borderWidth:"1px",borderRadius:"lg",p:"4",flexDir:{base:"row-reverse",md:"column"},spacing:"2",children:[Object(r.jsxs)(g.d,{alignSelf:"center",justifySelf:"start",children:[Object(r.jsx)(rt.a,{name:null===t||void 0===t?void 0:t.name,boxSize:{base:"20",md:"40"}}),Object(r.jsx)(se.a,{variant:"link",my:"2",fontSize:"sm",children:"Update photo"})]}),Object(r.jsxs)(g.d,{alignItems:"start",spacing:"2",children:[Object(r.jsx)(at.a,{as:Fe.j,boxSize:"8"}),Object(r.jsx)(f.a,{as:"h4",fontWeight:"bold",fontSize:"lg",fontFamily:"mono",children:"Identity verification"}),Object(r.jsx)(f.a,{as:"h4",children:"Show others you\u2019re really you with the identity verification badge."}),Object(r.jsx)(O.a,{}),Object(r.jsx)(f.a,{as:"h4",fontWeight:"bold",fontSize:"lg",fontFamily:"mono",children:(null===t||void 0===t?void 0:t.name)+" confirmed"}),Object(r.jsxs)(f.a,{d:"flex",flexDir:"row",alignItems:"baseline",children:[Object(r.jsx)(Fe.b,{}),Object(r.jsx)(f.a,{as:"h4",ml:"4",children:"Email confirmed"})]}),Object(r.jsxs)(f.a,{d:"flex",flexDir:"row",alignItems:"baseline",children:[Object(r.jsx)(Fe.b,{}),Object(r.jsx)(f.a,{as:"h4",ml:"4",children:"Phone confirmed"})]})]})]})}),Object(r.jsx)(Ce.a,{minW:"2"}),Object(r.jsxs)(f.a,{w:{base:"100%",md:"65%"},children:[("likes"===n||null==n)&&Object(r.jsx)(Nt,{}),"notifications"===n&&Object(r.jsx)(At,{}),"reservations"===n&&Object(r.jsx)(Et,{})]})]})},Gt=n(249),Ht=n(285),Bt=n(282),Mt=n(275),Ut=n(273),Yt=function(e){var t,n=[],r=new Set,i=Object(d.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.has(a.countryId)||n.push({id:a.countryId,countryName:a.countryName}),r.add(a.countryId)}}catch(c){i.e(c)}finally{i.f()}return n},_t=function(e){return Object(r.jsxs)(Ve.a,{display:"flex",alignItems:"center",justifyContent:"space-between",pr:"2",children:[Object(r.jsx)(Je.a,{htmlFor:"service_"+e.name,mb:"0",opacity:e.isOn?1:.4,children:e.name}),Object(r.jsx)(Mt.a,Object(u.a)(Object(u.a)({id:"service_"+e.name,isChecked:e.isOn},e),{},{onChange:function(t){e.toggle(t.target.checked)}}))]})},$t=function(e){var t,n=Object(be.a)(),i=o.a.useState({isEditting:!1}),a=Object(m.a)(i,2),c=a[0],s=a[1],l=Object(k.a)("cities",H,{staleTime:6e5,onSuccess:function(e){console.log(e);var t=Yt(e);D(t)}}),d=l.data,j=(l.isLoading,l.status,Object(k.a)("propertypeList",B,{staleTime:6e5,onSuccess:function(){console.log("got types")}})),b=j.data,h=(j.isError,Object(k.a)("services",V,{onSuccess:function(e){console.log(e.data)},onError:function(e){return console.log(e)}})),y=Object(k.a)(["property",c.propId],(function(){if(c.propId)return M(c.propId)}),{onSuccess:function(e){if(console.log(null===e||void 0===e?void 0:e.data),null===e||void 0===e?void 0:e.data){var t=e.data;N((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:t.name,basePrice:t.formattedPrice,cleaningFee:t.cleaningFee,description:t.description,introdution:t.introduction,serviceFee:t.serviceFee,maxGuest:t.maxGuest,images:t.images})}))}},refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1}),S=o.a.useState(d&&Yt(d)),C=Object(m.a)(S,2),I=C[0],D=C[1],R=Z(),z=Object(x.h)();o.a.useEffect((function(){var e,t=null===(e=R.get("id"))||void 0===e?void 0:e.toLocaleLowerCase();return t&&(console.log(t),s({propId:t,isEditting:!0})),function(){s({propId:void 0,isEditting:!1})}}),[z]);var P=o.a.useState({cityId:"1",countryId:"",description:"Test description",images:[{url:"https://picsum.photos/1100/1000?random=1",alt:"alt",deleteHash:"delHash"},{url:"https://picsum.photos/1100/1000?random=2",alt:"alt",deleteHash:"delHash"},{url:"https://picsum.photos/1100/1000?random=3",alt:"alt",deleteHash:"delHash"},{url:"https://picsum.photos/1100/1000?random=10",alt:"alt",deleteHash:"delHash"},{url:"https://picsum.photos/1100/1000?random=15",alt:"alt",deleteHash:"delHash"}],maxGuest:0,propTypeId:"",introdution:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto minus ad assumenda dignissimos. Perferendis optio est nam accusamus aliquid voluptas?",name:"Lorem ipsum",refundPercent:100,number:"12",streetName:"Street asdfgg",serviceIdList:["1","2"],basePrice:250,cleaningFee:10,serviceFee:0}),T=Object(m.a)(P,2),L=T[0],N=T[1],A=Object(Ye.a)(E,{onSuccess:function(e){n({description:e.data,status:"success"})},onError:function(e){console.log(e),n({description:"Something's wrong",status:"error"})}});o.a.useEffect((function(){return function(){localStorage.removeItem("previewRoom")}}),[]);var q=function(e){if(null!=e.target.files){var t=Array.from(e.target.files),n=new FormData;n.append("image",t[0]),(i=n,W({method:"post",url:"https://api.imgur.com/3/upload",data:i,headers:{"Content-Type":"multipart/form-data"}})).then((function(e){return e.data})).catch((function(e){return console.log(e)})),(r="",F({method:"DELETE",url:"https://api.imgur.com/3/image/".concat(r)})).then((function(e){return console.log(e.data)}))}var r,i};return y.isLoading?Object(r.jsx)(ce.a,{}):y.isError?Object(r.jsx)(x.a,{to:"/error"}):Object(r.jsx)(qe.a.form,{children:Object(r.jsx)(f.a,Object(u.a)(Object(u.a)({d:"flex",flexDir:"column",mt:"10"},e),{},{children:Object(r.jsxs)(g.d,{spacing:"8",w:"75%",alignSelf:"center",children:[Object(r.jsx)(f.a,{as:"h1",fontSize:"3xl",fontWeight:"bold",alignSelf:"start",children:c.propId?"Edit your property":"Publish your new property"}),Object(r.jsx)(O.a,{borderColor:"currentcolor"}),Object(r.jsxs)(f.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(f.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Property info"}),Object(r.jsxs)(g.d,{alignItems:"start",w:"100%",children:[Object(r.jsxs)(Ve.a,{isRequired:!0,id:"prop-name",children:[Object(r.jsx)(Je.a,{as:"h2",fontSize:"md",children:"Property Name"}),Object(r.jsx)(ae.a,{variant:"filled",required:!0,value:L.name,onChange:function(e){return N((function(t){return Object(u.a)(Object(u.a)({},t),{},{name:e.target.value})}))}})]}),Object(r.jsxs)(Ve.a,{isRequired:!0,id:"prop-type",children:[Object(r.jsx)(Je.a,{as:"h2",fontSize:"md",children:"Property's Type"}),Object(r.jsx)(Ut.a,{variant:"filled",placeholder:"--Choose your property type--",onChange:function(e){return N((function(t){return Object(u.a)(Object(u.a)({},t),{},{propTypeId:e.target.value,cityId:""})}))},children:null===b||void 0===b?void 0:b.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.propertyType},e.id)}))})]}),Object(r.jsxs)(Ve.a,{isRequired:!0,id:"prop-description",children:[Object(r.jsx)(Je.a,{as:"h2",fontSize:"md",children:"Description"}),Object(r.jsx)(ae.a,{variant:"filled",required:!0,value:L.description,onChange:function(e){return N((function(t){return Object(u.a)(Object(u.a)({},t),{},{description:e.target.value})}))}})]}),Object(r.jsxs)(Ve.a,{isRequired:!0,id:"prop-introduction",children:[Object(r.jsx)(Je.a,{as:"h2",fontSize:"md",children:"Introduction"}),Object(r.jsx)(Ft.a,{rows:4,required:!0,variant:"filled",value:L.introdution,onChange:function(e){return N((function(t){return Object(u.a)(Object(u.a)({},t),{},{introdution:e.target.value})}))}})]})]})]}),Object(r.jsx)(O.a,{borderColor:"currentcolor"}),Object(r.jsxs)(f.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(f.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Location info"}),Object(r.jsxs)(g.d,{alignItems:"start",w:"100%",children:[Object(r.jsxs)(Ve.a,{isRequired:!0,id:"prop-country",children:[Object(r.jsx)(Je.a,{as:"h2",fontSize:"md",children:"Country"}),Object(r.jsx)(Ut.a,{variant:"filled",placeholder:"--Choose your country--",onChange:function(e){return N((function(t){return Object(u.a)(Object(u.a)({},t),{},{countryId:e.target.value,cityId:""})}))},children:null===I||void 0===I?void 0:I.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.countryName},e.countryName)}))})]}),Object(r.jsxs)(Ve.a,{isRequired:!0,id:"prop-city",children:[Object(r.jsx)(Je.a,{as:"h2",fontSize:"md",children:"City"}),Object(r.jsx)(Ut.a,{variant:"filled",placeholder:"--Choose your city--",onChange:function(e){N((function(t){return Object(u.a)(Object(u.a)({},t),{},{cityId:e.target.value})}))},children:null===d||void 0===d?void 0:d.filter((function(e){return e.countryId===L.countryId})).map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.cityName},e.id)}))})]}),Object(r.jsxs)(ne.a,{gridGap:"2",w:"100%",flexDir:{base:"column",lg:"row"},children:[Object(r.jsxs)(Ve.a,{isRequired:!0,id:"prop-street",flex:"0 1 60%",children:[Object(r.jsx)(Je.a,{as:"h2",fontSize:"md",children:"Street Name"}),Object(r.jsx)(ae.a,{required:!0,variant:"filled",value:L.streetName,onChange:function(e){N((function(t){return Object(u.a)(Object(u.a)({},t),{},{streetName:e.target.value})}))}})]}),Object(r.jsxs)(Ve.a,{isRequired:!0,id:"prop-number",flex:"0 1 40%",children:[Object(r.jsx)(Je.a,{as:"h2",fontSize:"md",children:"Property's number"}),Object(r.jsx)(ae.a,{required:!0,variant:"filled",value:L.number,onChange:function(e){N((function(t){return Object(u.a)(Object(u.a)({},t),{},{number:e.target.value})}))}})]})]}),Object(r.jsxs)(Ve.a,{id:"prop-add-note",children:[Object(r.jsxs)(Je.a,{as:"h2",fontSize:"md",children:["Notes to client",Object(r.jsx)(f.a,{as:"span",fontStyle:"oblique",fontWeight:"light",children:"(optional)"})]}),Object(r.jsx)(ae.a,{variant:"filled",value:L.addressDesc,onChange:function(e){N((function(t){return Object(u.a)(Object(u.a)({},t),{},{addressDesc:e.target.value})}))}})]})]})]}),Object(r.jsx)(O.a,{borderColor:"currentcolor"}),Object(r.jsxs)(f.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",justifyContent:"space-between",children:[Object(r.jsxs)(f.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",flexWrap:"wrap",children:["Images",Object(r.jsx)(f.a,{as:"span",fontStyle:"oblique",fontWeight:"light",children:" (At least 5 images)"})]}),Object(r.jsxs)(g.d,{alignItems:"start",w:"100%",children:[Object(r.jsx)(ae.a,{required:!0,variant:"ghost",type:"file",justifySelf:"flex-end",multiple:!0,accept:"image/*",onChange:function(e){return q(e)}}),Object(r.jsx)(gt.a,{columns:{base:2,md:3,lg:4},gridGap:"2",children:L.images.map((function(e,t){return Object(r.jsxs)(f.a,{position:"relative",transition:"all ease 0.5s",children:[Object(r.jsx)(w.a,{src:e.url,display:"block",_hover:{opacity:"0.5"},style:{backfaceVisibility:"hidden"}}),Object(r.jsx)(De.a,{opacity:"0",w:"100%",h:"100%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",transition:"all ease 0.5s",_hover:{opacity:"1"},children:Object(r.jsx)(Gt.a,{size:"lg",colorScheme:"red",color:"red",onClick:function(){!function(e){var t=L.images;t.find((function(n,r){n===e&&delete t[r]})),N((function(e){return Object(u.a)(Object(u.a)({},e),{},{images:t})}))}(e)}})})]},t)}))})]})]}),Object(r.jsx)(O.a,{borderColor:"currentcolor"}),Object(r.jsxs)(f.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(f.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Services"}),Object(r.jsx)(f.a,{w:"100%",children:Object(r.jsxs)(gt.a,{minChildWidth:"12em",spacingX:"5rem",spacingY:"2",children:[Object(r.jsxs)(ne.a,{gridGap:"2",alignItems:"center",children:[Object(r.jsx)(f.a,{as:"h2",fontSize:"md",children:"Max Guests"}),Object(r.jsx)(Ce.a,{}),Object(r.jsx)(Te.a,{"aria-label":"Minus",size:"sm",icon:Object(r.jsx)(Fe.e,{}),isDisabled:L.maxGuest<=0,onClick:function(){return N((function(e){return Object(u.a)(Object(u.a)({},e),{},{maxGuest:e.maxGuest--})}))}}),Object(r.jsx)(f.a,{as:"h3",fontSize:"md",w:"3ch",textAlign:"center",children:L.maxGuest}),Object(r.jsx)(Te.a,{"aria-label":"Plus",size:"sm",icon:Object(r.jsx)(Fe.g,{}),isDisabled:L.maxGuest>=10,onClick:function(){return N((function(e){return Object(u.a)(Object(u.a)({},e),{},{maxGuest:e.maxGuest++})}))}})]}),null===(t=h.data)||void 0===t?void 0:t.data.map((function(e){return Object(r.jsx)(_t,{name:e.serviceName,isOn:L.serviceIdList.includes(e.serviceId),toggle:function(){if(L.serviceIdList.includes(e.serviceId)){var t=L.serviceIdList.filter((function(t){return t!=e.serviceId}));N((function(e){return Object(u.a)(Object(u.a)({},e),{},{serviceIdList:t})}))}else N((function(t){return Object(u.a)(Object(u.a)({},t),{},{serviceIdList:[].concat(Object(je.a)(t.serviceIdList),[e.serviceId])})}))}},e.serviceId)}))]})})]}),Object(r.jsx)(O.a,{borderColor:"currentcolor"}),Object(r.jsxs)(f.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(f.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Pricing ($)"}),Object(r.jsxs)(g.d,{alignItems:"start",w:"100%",children:[Object(r.jsx)(_t,{isOn:100===L.refundPercent,name:"Allow full refund",size:"lg",toggle:function(e){N((function(t){return Object(u.a)(Object(u.a)({},t),{},{refundPercent:e?100:80})}))}}),100!==L.refundPercent&&Object(r.jsxs)(f.a,{children:["Amount refund: ",L.refundPercent,"%"]}),Object(r.jsxs)(Ht.a,{value:L.refundPercent,min:0,max:100,step:5,colorScheme:"blue",onChange:function(e){N((function(t){return Object(u.a)(Object(u.a)({},t),{},{refundPercent:e})}))},children:[Object(r.jsx)(Ht.d,{children:Object(r.jsx)(Ht.b,{})}),Object(r.jsx)(Ht.c,{boxSize:6})]}),Object(r.jsxs)(Ve.a,{isRequired:!0,id:"prop-price-base",isInvalid:0===L.basePrice,children:[Object(r.jsx)(Je.a,{opacity:0===L.basePrice?.4:1,as:"h2",fontSize:"md",children:"Base price"}),Object(r.jsx)(Bt.a,{value:L.basePrice,onChange:function(e){N((function(t){return Object(u.a)(Object(u.a)({},t),{},{basePrice:0|parseInt(e)})}))},children:Object(r.jsx)(Bt.b,{variant:"filled",required:!0})})]}),Object(r.jsxs)(Ve.a,{isRequired:!0,id:"prop-price-cleaning",children:[Object(r.jsx)(Je.a,{opacity:0===L.cleaningFee?.4:1,as:"h2",fontSize:"md",children:"Cleaning fee"}),Object(r.jsx)(Bt.a,{value:L.cleaningFee,onChange:function(e){N((function(t){return Object(u.a)(Object(u.a)({},t),{},{cleaningFee:0|parseInt(e)})}))},children:Object(r.jsx)(Bt.b,{variant:"filled",required:!0})})]}),Object(r.jsxs)(Ve.a,{isRequired:!0,id:"prop-price-service",children:[Object(r.jsx)(Je.a,{opacity:0===L.serviceFee?.4:1,as:"h2",fontSize:"md",children:"Service fee"}),Object(r.jsx)(Bt.a,{value:L.serviceFee,onChange:function(e){N((function(t){return Object(u.a)(Object(u.a)({},t),{},{serviceFee:0|parseInt(e)})}))},children:Object(r.jsx)(Bt.b,{variant:"filled",required:!0})})]})]})]}),Object(r.jsxs)(ne.a,{justifyContent:"space-between",w:"100%",px:"10%",children:[Object(r.jsx)(v.a,{as:p.b,to:"/room/preview",_hover:{textStyle:"none"},target:"_blank",onClick:function(){return localStorage.setItem("previewRoom",JSON.stringify(L))},children:Object(r.jsx)(se.a,{variant:"solid",colorScheme:"green",children:"See a preview"})}),Object(r.jsx)(se.a,{variant:"solid",type:"submit",colorScheme:"blue",onClick:function(e){return function(e){e.preventDefault(),c.isEditting||A.mutate(L)}(e)},children:c.isEditting?"Update property":"Publish"}),(null===c||void 0===c?void 0:c.propId)&&Object(r.jsx)(se.a,{variant:"solid",colorScheme:"red",children:"Close this property"})]})]})}))})},Vt=n(161),Jt=function(){var e=o.a.useState(),t=Object(m.a)(e,2),n=t[0],i=t[1];return console.log(n),o.a.useEffect((function(){var e=localStorage.getItem("previewRoom");return console.log(e),e&&i(JSON.parse(e)),function(){localStorage.removeItem("previewRoom")}}),[]),o.a.useEffect((function(){console.log(n)}),[n]),Object(r.jsx)(r.Fragment,{children:"Hello"})},Xt=function(){return Object(r.jsxs)(pt.a,{status:"success",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[Object(r.jsx)(pt.c,{boxSize:"40px",mr:0}),Object(r.jsx)(pt.d,{mt:4,mb:1,fontSize:"lg",children:"Application submitted!"}),Object(r.jsx)(pt.b,{maxWidth:"sm",children:"Thanks for submitting your application. Our team will get back to you soon."})]})},Zt=function(){var e,t,n=Object(c.useContext)(_e),i=Object(be.a)(),a=Object(Ie.a)(),o=function(){a.onOpen(),F.post(T+"/api/user/register-host").then((function(e){console.log(e),200===e.status&&(localStorage.setItem("token",e.data.token),n.updateToken(e.data.token),i({description:"Congrat! You are eligible as a new host!",status:"success"}))})).catch((function(e){i({description:e,status:"error"})}))};return Object(r.jsxs)(f.a,{d:"flex",flexDir:"column",gridGap:"2",justifyItems:"center",justifyContent:"center",children:[Object(r.jsx)(se.a,{onClick:function(){return o()},colorScheme:"green",w:"30ch",isDisabled:null===(e=n.user)||void 0===e?void 0:e.roles.includes("Owner"),alignSelf:"center",children:(null===(t=n.user)||void 0===t?void 0:t.roles.includes("Owner"))?"You are already a host!":"Register to become a host!"}),Object(r.jsx)(Ze.a,{in:a.isOpen,children:Object(r.jsx)(Xt,{})})]})},Qt=function(e){var t=Object(k.a)("host",(function(){return U()}),{onSuccess:function(e){console.log(e)}}).data;return Object(r.jsxs)(f.a,Object(u.a)(Object(u.a)({},e),{},{children:[Object(r.jsx)(f.a,{as:"h1",fontSize:"4xl",fontWeight:"bold",mb:"10",my:"4",children:"Your hosted properties"}),Object(r.jsx)(St,{rooms:null===t||void 0===t?void 0:t.data,columns:{base:1,md:2,lg:3}})]}))},Kt=function(e){var t=o.a.useState(),n=Object(m.a)(t,2),i=n[0];n[1],Object(k.a)(["notActive",i],(function(){return Y(i)}),{onSuccess:function(e){}});return Object(r.jsx)(f.a,Object(u.a)({},e))},en=Object(b.a)({config:{initialColorMode:"dark"},components:{Button:{defaultProps:{}}}}),tn=new Tt.a({defaultOptions:{queries:{}}}),nn=function(){var e=c.useRef(null);return c.useEffect((function(){e.current.complete(),F.interceptors.request.use((function(t){return e.current.staticStart(),t}),(function(t){return e.current.complete(),Promise.reject(t)})),F.interceptors.response.use((function(t){return e.current.complete(),t}),(function(t){return e.current.complete(),t.reponse.status,Promise.reject(t)}))}),[]),Object(r.jsx)(p.a,{basename:"/",children:Object(r.jsx)(h.a,{theme:en,children:Object(r.jsx)(dt.a,{client:tn,children:Object(r.jsxs)(f.a,{d:"flex",flexDir:"column",minH:"100vh",children:[Object(r.jsxs)($e,{children:[Object(r.jsx)(on,{}),Object(r.jsxs)(f.a,{flex:"1",children:[Object(r.jsx)(Vt.a,{color:"#f11946",ref:e}),Object(r.jsxs)(x.d,{children:[Object(r.jsx)(x.b,{exact:!0,path:"/",children:Object(r.jsx)(tt,{})}),Object(r.jsx)(x.b,{component:rn,exact:!0,path:"/login",render:function(e){var t=e.location;return Object(r.jsx)(x.a,{to:{pathname:"/login",state:{from:t}}})}}),Object(r.jsxs)(f.a,{mx:{base:"10px",md:"50px",lg:"100px"},mt:"5",children:[Object(r.jsx)(et,{}),Object(r.jsxs)(x.d,{children:[Object(r.jsx)(x.b,{exact:!0,path:"/rooms/:slug",component:Ot}),Object(r.jsx)(x.b,{exact:!0,path:"/rooms",component:kt}),Object(r.jsx)(x.b,{exact:!0,path:"/room/preview",component:Jt}),Object(r.jsx)(an,{exact:!0,path:"/profile",component:qt}),Object(r.jsx)(cn,{roles:["Owner"],path:"/host/publish",component:$t}),Object(r.jsx)(an,{exact:!0,path:"/user/register-host",component:Zt}),Object(r.jsx)(cn,{roles:["Admin"],exact:!0,path:"/verify",children:Object(r.jsx)(Kt,{})}),Object(r.jsx)(cn,{roles:["Owner"],path:"/host/properties",children:Object(r.jsx)(Qt,{})}),Object(r.jsx)(x.b,{component:xt})]})]})]})]})]}),Object(r.jsx)(O.a,{mt:"10"}),Object(r.jsx)(Pt,{mx:{base:"10px",md:"50px",lg:"100px"}})]})})})})},rn=function(){var e=Object(x.h)(),t=c.useContext(_e),n=(e.state||{from:{pathname:"/"}}).from;return t.user?Object(r.jsx)(x.a,{to:n}):Object(r.jsxs)(f.a,{mx:"20%",mt:"10",flex:"0",children:[Object(r.jsx)(et,{}),Object(r.jsx)(Ke,{isRegistering:!1})]})},an=function(e){var t=e.children,n=Object(j.a)(e,["children"]);return c.useContext(_e).user?Object(r.jsx)(x.b,Object(u.a)(Object(u.a)({},n),{},{children:t})):Object(r.jsx)(x.b,Object(u.a)(Object(u.a)({},n),{},{children:Object(r.jsx)(x.a,{to:Object(u.a)({pathname:"/login",state:{from:n.path}},n.location)})}))},cn=function(e){var t,n=e.roles,i=e.children,a=Object(j.a)(e,["roles","children"]),o=c.useContext(_e);if(!o.user)return Object(r.jsx)(x.b,Object(u.a)(Object(u.a)({},a),{},{children:Object(r.jsx)(x.a,{to:Object(u.a)({pathname:"/login",state:{from:a.path}},a.location)})}));return function(e,t){if(!e)return!1;if(!t)return!0;var n,r=Object(d.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!e.includes(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(null===(t=o.user)||void 0===t?void 0:t.roles,n)?Object(r.jsx)(x.b,Object(u.a)(Object(u.a)({},a),{},{children:i})):Object(r.jsx)(x.b,Object(u.a)(Object(u.a)({},a),{},{children:Object(r.jsx)(x.a,{to:{pathname:"/error",state:{message:"You are not authorized"}}})}))},on=function(){var e=Object(x.h)().pathname;return c.useEffect((function(){window.scrollTo(0,0)}),[e]),null};l.a.render(Object(r.jsxs)(c.StrictMode,{children:[Object(r.jsx)(i.a,{initialColorMode:a.theme.config.initialColorMode}),Object(r.jsx)(nn,{})]}),document.getElementById("root"))}},[[223,1,2]]]);
//# sourceMappingURL=main.bfd46efd.chunk.js.map