(this["webpackJsonphotel-chakra"]=this["webpackJsonphotel-chakra"]||[]).push([[0],{219:function(e,t,n){},220:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(272),a=n(73),c=n(1),o=n.n(c),s=n(60),l=n.n(s),j=n(65),d=n(4),u=n(62),b=n(271),h=n(284),O=n(240),f=n(27),m=n(17),x=n(6),p=n(285),g=n(241),v=n(283),y=n(244),w=n(149),S=n.n(w),k=(n(132),n(133),n(282)),C=n(28),D=n.n(C),I=n(44),R=n(85),z=n.n(R),P="https://nicehostel.herokuapp.com",T=z.a.create();T.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.Authorization="Bearer ".concat(t),e})),T.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&(console.log("unauthorized, logging out ..."),localStorage.removeItem("token")),Promise.reject(e.response)}));var F=function(e){return T({method:"POST",url:P+"/api/properties/",data:e})},W=function(e){return T({url:P+"/api/reservations",method:"POST",data:JSON.stringify({propertyId:e.roomId,fromDate:e.bookFromDate,toDate:e.bookToDate,adultNum:e.guest,childrenNum:e.children}),headers:{"Content-Type":"application/json"}})},N=function(e){return T.post(P+"/api/user/authenticate",{email:e.email,password:e.password})},L=function(e){return z.a.post(P+"/api/user/register-user",{email:e.email,password:e.password,confirmPassword:e.confirmPassword})},A=function(){var e=Object(I.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:return"/api/properties",console.log(n),e.abrupt("return",z.a.get(P+"/api/properties",{params:{typeId:t,city:n.city,from:n.from,to:n.to,guestNum:n.guestNum,childrenNum:n.childrenNum}}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(I.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(P+"/api/cities");case 2:return t=e.sent,n=t.json(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(I.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(P+"/api/propertytypes");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(I.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.get(P+"/api/properties/"+t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(I.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.get(P+"/api/reservations/user"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e){var t=e.roomId,n=e.token;return T.post("".concat(P,"/api/likes/").concat(t),{},{headers:{Authorization:"Bearer ".concat(n)}})},_={dots:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,initialSlide:0,swipeToSlide:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:1,infinite:!0,dots:!0}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:1,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},H=function(e){var t=e.type,n=(e.children,Object(m.g)());return Object(r.jsxs)(p.b,{alignItems:"start",p:"4",children:[Object(r.jsx)(g.a,{onClick:function(){n.push({pathname:"/rooms",state:{type:t}})},children:Object(r.jsx)(v.a,{hasArrow:!0,placement:"top","aria-label":"tooltips",label:t.description,openDelay:500,children:Object(r.jsxs)(O.a,{children:[Object(r.jsx)(O.a,{maxW:"sm",maxH:"sm",minH:"100px",children:Object(r.jsx)(y.a,{width:"inherit",height:"inherit",src:t.thumbnailImg,objectFit:"cover"})}),Object(r.jsx)(O.a,{mt:"1",fontWeight:"semibold",as:"h4",lineHeight:"tight",isTruncated:!0,children:t.propertyType})]})})}),Object(r.jsx)(O.a,{color:"gray.500",fontSize:"md",children:t.count+" "+t.propertyType})]})},M=function(){var e=Object(k.a)("propertypeList",q,{staleTime:6e5}),t=e.data,n=e.isError;return e.isFetching&&console.log("refetching prop"),n?Object(r.jsx)(O.a,{children:"Something's wrong"}):Object(r.jsx)("div",{children:Object(r.jsx)(S.a,Object(d.a)(Object(d.a)({},_),{},{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(r.jsx)(H,{type:e},t)}))}))})},Y=n(246),$=n(249),V=n(250),K=n(251),J=n(247),Z=n(276),X=n(160),Q=n(243),ee=n(166),te=n(19),ne=n(22),re=n(275),ie=n(100),ae=n.n(ie),ce=(n(218),new Date(Date.now()),function(e,t){var n=new Date(e),r=new Date(t),i=[],a=n;for(a.setDate(a.getDate()+1);a.getDate()<r.getDate();)i.push(new Date(a)),a.setDate(a.getDate()+1);return i}),oe=function(e){var t;return null===e||void 0===e||null===(t=e.reservedDates)||void 0===t?void 0:t.map((function(e){return new Date(e.fromDate)}))},se=function(e,t){var n=void 0;return(null===t||void 0===t?void 0:t.reservedDates)&&t.reservedDates.forEach((function(t){var r=new Date(t.fromDate);r>e&&(n?r<=n&&(n=r):n=r)})),n!==e?n:null},le={from:void 0,to:void 0,enteredTo:void 0},je=function(e){var t=e.from,n=e.to,i=e.updateDate,a=e.schedules,c=Object(re.a)(),s=o.a.useState({from:t,to:n}),l=Object(x.a)(s,2),j=l[0],u=l[1],b=[{before:new Date(Date.now())}].concat(Object(ne.a)(function(e){var t=[];if(null===e||void 0===e?void 0:e.reservedDates)for(var n=0;n<e.reservedDates.length;n++)t.push.apply(t,Object(ne.a)(ce(e.reservedDates[n].fromDate,e.reservedDates[n].toDate)));return(null===e||void 0===e?void 0:e.dayOff)&&t.push.apply(t,Object(ne.a)(e.dayOff)),t}(a))),h=o.a.useState(b),f=Object(x.a)(h,2),m=f[0],p=f[1];o.a.useEffect((function(){(j.from&&j.to||!j.from&&!j.to)&&i(j.from,j.to)}),[j.from,j.to]);var g=function(e,t,n){var r=t&&ie.DateUtils.isDayBefore(e,t);return!t||r||t&&n},v=function(){u(le)},y=[j.from,{from:j.from,to:j.enteredTo}],w={start:j.from,end:j.enteredTo,checkoutOnly:oe(a)};return Object(r.jsxs)(O.a,{alignSelf:"stretch",children:[Object(r.jsx)(Y.a,{alignItems:"stretch",flexDir:"column",children:Object(r.jsx)(ae.a,{numberOfMonths:2,fromMonth:j.from,modifiers:w,onDayClick:function(e,t){if(!t.disabled){var n=new Date(Date.now());if(!(e<n)){var r=j.from,i=j.to;if(r&&i&&e>=r&&e<=i)v();else if(g(e,r,i)){if(t.checkoutOnly)return void c({status:"info",description:"Check out only!",duration:3e3});p((function(t){return Object(d.a)(Object(d.a)({},t),{},{before:e,after:se(e,a)})})),u({from:e,to:void 0,enteredTo:void 0})}else{var o;if(p(b),(null===(o=j.from)||void 0===o?void 0:o.getDate())===e.getDate())return void u({from:void 0,to:void 0,enteredTo:void 0});u((function(t){return Object(d.a)(Object(d.a)({},t),{},{to:e,enteredTo:e})}))}}}},disabledDays:m,onDayMouseEnter:function(e){var t=j.from,n=j.to;g(e,t,n)||u((function(t){return Object(d.a)(Object(d.a)({},t),{},{enteredTo:e})}))},selectedDays:y})}),Object(r.jsxs)(Y.a,{justifyContent:"center",alignItems:"center",children:[!j.from&&!j.to&&"Please select the first day.",j.from&&!j.to&&"Please select the last day.",j.from&&j.to&&"Selected from ".concat(j.from.toLocaleDateString()," to\n                ").concat(j.to.toLocaleDateString())," ",j.from&&j.to&&Object(r.jsx)(X.a,{onClick:v,children:"Reset"})]})]})},de=n(248),ue=function(e){var t=e.guest,n=e.children,i=e.updatePeople,a=e.maxGuest;return Object(r.jsx)(O.a,{p:"4",style:{backdropFilter:"blur(5px)"},children:Object(r.jsxs)(p.b,{align:"stretch",spacing:4,children:[Object(r.jsxs)(Y.a,{alignItems:"center",children:[Object(r.jsx)(de.a,{mr:"auto",fontSize:"md",children:"Guests"}),Object(r.jsx)(O.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(X.a,{variant:"ghost",borderRadius:"0",disabled:t<=0,onClick:function(){return i(--t,n)},children:"-"})}),Object(r.jsx)(de.a,{mx:"4",fontSize:"md",children:t}),Object(r.jsx)(O.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(X.a,{variant:"ghost",borderRadius:"0",disabled:void 0!==a&&t>=a,onClick:function(){return i(++t,n)},children:"+"})})]}),Object(r.jsxs)(Y.a,{alignItems:"center",children:[Object(r.jsx)(de.a,{mr:"auto",fontSize:"md",children:"Children"}),Object(r.jsx)(O.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(X.a,{variant:"ghost",borderRadius:"0",disabled:n<=0,onClick:function(){return i(t,--n)},children:"-"})}),Object(r.jsx)(de.a,{mx:"4",fontSize:"md",children:n}),Object(r.jsx)(O.b,{border:"1px",borderColor:"yellow.400",children:Object(r.jsx)(X.a,{variant:"ghost",borderRadius:"0",isDisabled:n>=5,onClick:function(){return i(t,++n)},children:"+"})})]})]})})},be=function(e){var t,n,i=Object(k.a)("cities",E,{staleTime:6e5}),a=i.data,c=i.isLoading,s=(i.status,Object(m.g)()),l=e.search;o.a.useEffect((function(){e.updateSearch&&(console.log("update form"),e.updateSearch(l))}),[l]);return Object(r.jsx)(O.a,{p:"2",border:"1px",borderColor:"yellow.400",style:{backdropFilter:"blur(5px)"},children:Object(r.jsxs)(Y.a,{display:{lg:"flex"},alignItems:"center",children:[Object(r.jsxs)($.a,{children:[Object(r.jsx)(V.a,{pointerEvents:"none",children:Object(r.jsx)(te.l,{})}),Object(r.jsx)(K.a,{list:"datalist-cities",placeholder:"City",size:"lg",borderRadius:"0",onChange:function(t){return n=t.target.value,void(e.updateSearch&&(null===e||void 0===e||e.updateSearch(Object(d.a)(Object(d.a)({},e.search),{},{city:n}))));var n},value:e.search.city}),c?Object(r.jsx)(V.b,{children:Object(r.jsx)(J.a,{alignSelf:"center"})}):Object(r.jsx)("datalist",{id:"datalist-cities",children:null===a||void 0===a?void 0:a.map((function(e){return Object(r.jsx)("option",{value:e.cityName},e.cityId)}))})]}),Object(r.jsxs)(Z.a,{closeOnBlur:!0,children:[Object(r.jsx)(Z.c,{children:Object(r.jsxs)(X.a,{variant:"outline",w:["100%","100%","100%","150%"],size:"lg",_focusVisible:{border:"0"},borderRadius:"0",px:"2",children:[(null===l||void 0===l||null===(t=l.from)||void 0===t?void 0:t.toLocaleDateString())||"From"," - ",(null===l||void 0===l||null===(n=l.to)||void 0===n?void 0:n.toLocaleDateString())||"To"]})}),Object(r.jsx)(Q.a,{children:Object(r.jsx)(Z.b,{flexWrap:"nowrap",alignItems:"center",style:{backdropFilter:"blur(5px)"},w:"550px",borderRadius:"0",bgColor:Object(ee.e)("gray.100","gray.800"),children:Object(r.jsx)(je,{updateDate:function(t,n){e.updateSearch&&(null===e||void 0===e||e.updateSearch(Object(d.a)(Object(d.a)({},e.search),{},{from:t,to:n})))}})})})]}),Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(Z.c,{children:Object(r.jsx)(X.a,{variant:"outline",w:["100%","100%","100%","150%"],size:"lg",borderRadius:"0",px:"2",children:l.guestNum+" guests - "+l.childrenNum+" children"})}),Object(r.jsx)(Q.a,{children:Object(r.jsx)(Z.b,{flexWrap:"nowrap",borderRadius:"0",bg:"inherit",bgColor:Object(ee.e)("gray.100","gray.800"),children:Object(r.jsx)(ue,{updatePeople:function(t,n){e.updateSearch&&(null===e||void 0===e||e.updateSearch(Object(d.a)(Object(d.a)({},e.search),{},{guestNum:t,childrenNum:n})))},guest:l.guestNum,children:l.childrenNum})})})]}),Object(r.jsx)(X.a,{alignSelf:"center",size:"lg",minW:"100px",ml:[0,0,0,2],onClick:e.onClickSearch?e.onClickSearch:function(){s.push({pathname:"/rooms",state:{search:e.search}})},isLoading:e.isLoading,mt:[2,2,2,0],w:["100%","100%","100%","30%"],borderRadius:"0",children:"Search"})]})})},he=n(260),Oe=n.p+"static/media/HomeBG.c3c3859c.webp",fe=n(242),me=n(258),xe=n(259),pe=n(273),ge=n(277),ve=n(254),ye=n(43),we=function(e){var t=Object(ee.d)().toggleColorMode,n=Object(ee.e)("dark","light"),i=Object(ee.e)(ye.d,ye.f);return Object(r.jsx)(ve.a,Object(d.a)({size:"md",fontSize:"lg",variant:"ghost",color:"current",marginLeft:"2",onClick:t,icon:Object(r.jsx)(i,{}),"aria-label":"Switch to ".concat(n," mode")},e))},Se=n(154),ke=n(56),Ce=n(15),De=n(287),Ie=n(13),Re=n.p+"static/media/logo.314a949b.svg";function ze(){var e=Object(Se.a)(["\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n"]);return ze=function(){return e},e}var Pe=Object(ke.b)(ze()),Te=Object(Ce.a)((function(e,t){var n=Object(De.a)()?void 0:"".concat(Pe," infinite 20s linear");return Object(r.jsx)(Ie.a.img,Object(d.a)({animation:n,boxSize:"30px",src:Re,ref:t},e))})),Fe=n(155),We=n(94),Ne=n(288),Le=o.a.createContext({}),Ae=function(e){var t=e.children,n=o.a.useState(!1),i=Object(x.a)(n,2),a=i[0],c=i[1],s=o.a.useState(void 0),l=Object(x.a)(s,2),j=l[0],d=l[1],u=o.a.useState(localStorage.getItem("token")),b=Object(x.a)(u,2),h=b[0],O=b[1],f=(Object(We.b)(),Object(re.a)());o.a.useEffect((function(){var e=localStorage.getItem("token");e&&(function(e){return fetch("".concat(P,"/api/user/validate-token"),{headers:{Authorization:"Bearer ".concat(e)}})}(e).then((function(e){if(console.log("validating..."),200!==e.status)return g("Token expired")})),O(e))}),[]),o.a.useEffect((function(){if(h){var e=Object(Fe.a)(h);d({email:e.email,name:e.name,roles:e.roles,token:h})}}),[h]);var m=Object(Ne.a)(N,{onSuccess:function(e){O(e.data.token),localStorage.setItem("token",e.data.token),f({description:"Logged in successfully",status:"success",duration:3e3})},onError:function(e){f({description:e.data.message,status:"error",duration:3e3})},onSettled:function(){return c(!1)}}),p=Object(Ne.a)(L,{onSuccess:function(e){O(e.data.token),localStorage.setItem("token",e.data.token),f({description:"Logged in successfully",status:"success",duration:3e3})},onError:function(e){console.log(e.data);for(var t=0;t<e.data.messages.length;t++)f({description:e.data.messages[t],status:"error",duration:3e3})},onSettled:function(){return c(!1)}}),g=function(){var e=Object(I.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1e3)}));case 2:return d(void 0),O(null),localStorage.removeItem("token"),f({title:t||"Logged out successfully!",isClosable:!0,duration:3e3,status:"success"}),e.next=8,new Promise((function(e){return setTimeout(e,500)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(I.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,new Promise((function(e){return setTimeout(e,1e3)}));case 3:try{m.mutate(t)}catch(n){console.log(n)}finally{c(!1)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(I.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,new Promise((function(e){return setTimeout(e,1e3)}));case 3:try{p.mutate(t)}catch(n){console.log(n)}finally{c(!1)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(Le.Provider,{value:{loginAsync:v,logoutAsync:g,updateToken:function(e){O(e)},isLoading:a,user:j,registerAsync:y},children:t})},Ee=n(68),qe=n(255),Be=n(256),Ge=n(257),Ue=n(280);var _e=function(e){var t=e.initRef,n=e.fromUrl,i=e.isRegistering,a=Object(m.g)(),c=o.a.useState({remember:!1,isRegistering:i}),s=Object(x.a)(c,2),l=s[0],j=s[1],u=o.a.useState(!1),b=Object(x.a)(u,2),h=b[0],O=b[1],f=o.a.useState(!1),p=Object(x.a)(f,2),g=p[0],v=p[1],y=o.a.useState(!1),w=Object(x.a)(y,2),S=w[0],k=w[1];o.a.useEffect((function(){var e,t;e=l.email,t=l.password,function(e){return!!e&&/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}(e)?O(!1):O(!0),v(""===t)}),[l.email,l.password]),o.a.useEffect((function(){l.isRegistering&&l.confirmedPassword===l.password?(console.log(l.password),console.log(l.confirmedPassword),k(!1),console.log(S)):k(!0)}),[l.confirmedPassword,l.isRegistering,l.password]);var C=o.a.useContext(Le);return Object(r.jsxs)(Ie.a.form,{d:"flex",flexDir:"column",children:[Object(r.jsxs)(Ee.a,{isInvalid:h,children:[Object(r.jsx)(qe.a,{htmlFor:"email",children:"Email"}),Object(r.jsx)(K.a,{placeholder:"Enter your email",id:"email",isInvalid:h,ref:t,variant:"filled",size:"lg",type:"email",value:l.email,isRequired:!0,onChange:function(e){return j((function(t){return Object(d.a)(Object(d.a)({},t),{},{email:e.target.value.trim()})}))}}),Object(r.jsx)(Be.a,{children:"Email not correct"})]}),Object(r.jsxs)(Ee.a,{isInvalid:g,children:[Object(r.jsx)(qe.a,{htmlFor:"password",my:"2",children:"Password"}),Object(r.jsx)(K.a,{placeholder:"Enter your password",id:"password",isInvalid:g,variant:"filled",size:"lg",type:"password",value:l.password,minLength:1,isRequired:!0,onChange:function(e){return j((function(t){return Object(d.a)(Object(d.a)({},t),{},{password:e.target.value})}))}})]}),Object(r.jsxs)(Ge.a,{in:l.isRegistering,children:[Object(r.jsxs)(Ee.a,{isInvalid:S,children:[Object(r.jsx)(qe.a,{htmlFor:"confirm-password",my:"2",children:"Confirm Password"}),Object(r.jsx)(K.a,{placeholder:"Confirm your password",id:"confirm-password",isInvalid:S,variant:"filled",size:"lg",type:"password",value:l.confirmedPassword,minLength:1,isRequired:!0,onChange:function(e){return j((function(t){return Object(d.a)(Object(d.a)({},t),{},{confirmedPassword:e.target.value})}))}})]}),Object(r.jsx)(Be.a,{children:"Password does not match"})]}),Object(r.jsx)(Ue.a,{size:"lg",checked:l.remember,mt:"2",onChange:function(e){return j((function(t){return Object(d.a)(Object(d.a)({},t),{},{remember:e.target.checked})}))},children:"Remember me"}),Object(r.jsx)(X.a,{my:"3",w:"30%",rounded:"full",type:"submit",alignSelf:"center",title:"Login",isLoading:C.isLoading,isDisabled:l.isRegistering?h||g||S:h||g,onClick:l.isRegistering?function(){C.registerAsync({email:l.email,password:l.password,confirmPassword:l.confirmedPassword}),n&&a.replace(n)}:function(){C.loginAsync(l),n&&a.replace(n)},children:Object(r.jsx)(ye.a,{})}),Object(r.jsx)(X.a,{variant:"link",alignSelf:"center",textStyle:"",onClick:function(){j((function(e){return Object(d.a)(Object(d.a)({},e),{},{isRegistering:!e.isRegistering})}))},children:l.isRegistering?"Or login instead!":"Register your account!"})]})},He=function(e){var t,n=Object.assign({},e),i=o.a.useContext(Le),a=Object(fe.a)(),c=o.a.useRef(null),s=o.a.useState(!1),l=Object(x.a)(s,2),j=l[0],u=l[1],b=(Object(m.h)().pathname,Object(ee.e)("gray.800","gray.800"),Object(ee.e)("white","white"),Object(ee.e)("cyan.200","blue.400"));return Object(r.jsx)(O.a,Object(d.a)(Object(d.a)({marginBottom:["5%"]},n),{},{children:Object(r.jsxs)(Y.a,{justifyContent:"center",alignItems:"center",children:[Object(r.jsx)(f.b,{to:"/",children:Object(r.jsxs)(p.a,{spacing:4,children:[Object(r.jsx)(me.a,{children:Object(r.jsx)(Te,{})}),Object(r.jsx)(xe.a,{size:"md",display:{base:"none",sm:"block"},children:"haihaibeo.github.io/Hostel/"})]})}),Object(r.jsx)(he.a,{}),Object(r.jsxs)(p.a,{spacing:4,children:[Object(r.jsx)(we,{}),void 0===i.user?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(X.a,{variant:"ghost",onClick:function(){a.onOpen(),u(!1)},children:"Login"}),Object(r.jsxs)(pe.a,{isOpen:a.isOpen,onClose:a.onClose,size:"xl",motionPreset:"slideInBottom",isCentered:!0,initialFocusRef:c,children:[Object(r.jsx)(pe.f,{}),Object(r.jsxs)(pe.d,{children:[Object(r.jsx)(pe.e,{children:j?"Sign up new account":"Login"}),Object(r.jsx)(pe.c,{}),Object(r.jsx)(pe.b,{pb:"2",children:Object(r.jsx)(_e,{initRef:c,isRegistering:j})})]})]}),Object(r.jsx)(X.a,{variant:"ghost",onClick:function(){a.onOpen(),u(!0)},children:"Register"})]}):Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(ge.a,{children:[Object(r.jsx)(ge.b,{as:X.a,variant:"ghost",rightIcon:Object(r.jsx)(te.f,{}),children:i.user.name}),Object(r.jsxs)(ge.e,{children:[Object(r.jsxs)(ge.d,{as:f.b,to:"/profile?view=likes",children:[Object(r.jsx)(O.a,{mr:"3",children:Object(r.jsx)(te.c,{})}),"Saved rooms"]}),Object(r.jsxs)(ge.d,{as:f.b,to:"/profile?view=reservations",children:[Object(r.jsx)(O.a,{mr:"3",children:Object(r.jsx)(te.e,{})}),"Your Reservations"]}),Object(r.jsxs)(ge.d,{as:f.b,to:"/profile?view=notifications",children:[Object(r.jsx)(O.a,{mr:"3",children:Object(r.jsx)(te.b,{})}),"Notifications"]}),Object(r.jsx)(ge.c,{}),(null===(t=i.user.roles)||void 0===t?void 0:t.includes("Owner"))?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(ge.d,{as:f.b,to:"/user/publish",children:[Object(r.jsx)(O.a,{mr:"3",children:Object(r.jsx)(te.j,{})}),"Host your property"]}),Object(r.jsxs)(ge.d,{as:f.b,to:"/user/publish",children:[Object(r.jsx)(O.a,{mr:"3",children:Object(r.jsx)(te.i,{})}),"Your properties"]})]}):Object(r.jsxs)(ge.d,{bg:b,as:f.b,to:"/user/register-host",children:[Object(r.jsx)(O.a,{mr:"3",children:Object(r.jsx)(te.j,{})}),"Become a host"]}),Object(r.jsxs)(ge.d,{as:f.b,to:"/",children:[Object(r.jsx)(O.a,{mr:"3",children:Object(r.jsx)(te.k,{})}),"Account"]}),Object(r.jsx)(ge.c,{}),Object(r.jsxs)(ge.d,{onClick:function(){return i.logoutAsync()},children:[Object(r.jsx)(O.a,{mr:"3",children:Object(r.jsx)(te.d,{})}),"Log Out"]})]})]})})]})]})}))},Me=function(){var e=o.a.useState({childrenNum:0,guestNum:0}),t=Object(x.a)(e,2),n=t[0],i=t[1];return Object(r.jsxs)(O.a,{children:[Object(r.jsx)(O.a,{minH:["50vh","75vh","85vh"],style:{background:"url('"+Oe+"') center/cover"},color:"white",children:Object(r.jsxs)(O.a,{px:"10%",pt:"5",children:[Object(r.jsx)(He,{}),Object(r.jsx)(ee.c,{children:Object(r.jsx)(be,{search:n,updateSearch:function(e){i(e)}})}),Object(r.jsx)(O.a,{as:"h1",fontFamily:"mono",textShadow:"gray 2px 2px 2px",color:"whiteAlpha.600",fontWeight:"bold",fontSize:["3xl","4xl","6xl","8xl"],mt:["5vh","10vh","20vh","30vh"],children:"EXPLORE AROUND"})]})}),Object(r.jsxs)(O.a,{px:"10%",mt:"10",children:[Object(r.jsxs)(p.a,{children:[Object(r.jsx)(O.a,{as:"h2",fontWeight:"bold",fontSize:"4xl",mb:"5",children:"LIVE ANYWHERE"}),Object(r.jsx)(he.a,{}),Object(r.jsxs)(g.a,{as:f.b,to:"/rooms",d:"flex",flexDir:"row",alignItems:"center",children:["All properties ",Object(r.jsx)(O.a,{ml:"2",children:Object(r.jsx)(te.a,{})})]})]}),Object(r.jsx)(M,{})]})]})},Ye=n(261),$e=n(156),Ve=n(262),Ke=function(e){var t,n,i,a=e.room,c=e.bookInfo,s=e.updateDate,l=e.updatePeople,j=o.a.useContext(Le),d=Object(m.g)(),u=Object(fe.a)(),b=o.a.useState(0),h=Object(x.a)(b,2),f=h[0],g=h[1],y=Object(re.a)(),w=Object(k.a)(["pricing",c],(function(){if(c.roomId&&c.bookFromDate&&c.bookToDate)return function(e){return console.log(e),z.a.get(P+"/api/reservations/check-pricing",{params:{fromDate:e.bookFromDate,toDate:e.bookToDate,propertyId:e.roomId,guestNum:e.guest,childrenNum:e.children}})}(c)}),{onSuccess:function(e){return console.log(null===e||void 0===e?void 0:e.data)},staleTime:6e4}),S=Object(Ne.a)(W,{onSuccess:function(e){y({description:"Success",status:"success",isClosable:!0}),d.push("/profile?view=reservations")},onError:function(e){y({description:"Something's wrong",status:"error",isClosable:!0})}}),C=function(){var e=Object(I.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.user){e.next=2;break}return e.abrupt("return",y({description:"Login is required",status:"info",isClosable:!0}));case 2:S.mutate(c);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=null===(t=w.data)||void 0===t?void 0:t.data;return o.a.useEffect((function(){return c.bookFromDate&&c.bookToDate?(g(ce(c.bookFromDate.toDateString(),c.bookToDate.toDateString()).length+1),u.onOpen()):u.onClose()}),[c.bookFromDate,c.bookToDate]),Object(r.jsxs)(O.a,{display:"inline-flex",flexDir:"column",alignContent:"center",justifyContent:"center",children:[Object(r.jsxs)(Y.a,{alignItems:"baseline",children:[Object(r.jsx)(O.a,{as:"h2",fontFamily:"mono",fontSize:"3xl",fontWeight:"semibold",children:a.formattedPrice+"$ "}),Object(r.jsx)(O.a,{as:"span",color:"gray.500",fontStyle:"italic",children:"/ per night"}),Object(r.jsx)(he.a,{}),Object(r.jsx)(O.a,{d:"flex",alignItems:"center",children:Array(5).fill("").map((function(e,t){return t<Math.round(a.totalStar/a.totalReview)?Object(r.jsx)(te.n,{colorRendering:"teal.400"},t):Object(r.jsx)(te.m,{},t)}))})]}),Object(r.jsxs)(O.a,{mt:"4",children:[Object(r.jsxs)(Z.a,{closeOnBlur:!0,children:[Object(r.jsx)(Z.c,{children:Object(r.jsxs)(p.a,{spacing:"0",children:[Object(r.jsx)(X.a,{variant:"outline",borderTopLeftRadius:"lg",size:"lg",w:"100%",_focusVisible:{border:"0"},borderRadius:"0",children:(null===c||void 0===c||null===(n=c.bookFromDate)||void 0===n?void 0:n.toLocaleDateString())||"From"}),Object(r.jsx)(X.a,{variant:"outline",borderTopRightRadius:"lg",size:"lg",w:"100%",_focusVisible:{border:"0"},borderRadius:"0",children:(null===c||void 0===c||null===(i=c.bookToDate)||void 0===i?void 0:i.toLocaleDateString())||"To"})]})}),Object(r.jsx)(Z.b,{flexWrap:"nowrap",alignItems:"center",w:"550px",style:{backdropFilter:"blur(5px)"},borderRadius:"0",bg:"inherit",bgColor:"rgba(66, 153, 225, 0.5)",children:Object(r.jsx)(je,{schedules:{reservedDates:a.reservedDates,dayOff:a.daysOff},updateDate:s})})]}),Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(Z.c,{children:Object(r.jsx)(X.a,{variant:"outline",w:"100%",size:"lg",borderRadius:"0",borderBottomRadius:"lg",px:"2",children:c.guest+" guests - "+c.children+" children"})}),Object(r.jsx)(Z.b,{flexWrap:"nowrap",borderRadius:"0",bg:"inherit",bgColor:"rgba(66, 153, 225, 0.5)",children:Object(r.jsx)(ue,{updatePeople:l,guest:c.guest,children:c.children,maxGuest:a.maxGuest})})]})]}),Object(r.jsx)(X.a,{variant:"solid",colorScheme:"green",alignSelf:"stretch",mt:"4",isDisabled:!u.isOpen,onClick:C,children:u.isOpen?"Proceed checkout":"Choose dates to see detail"}),Object(r.jsx)(O.a,{alignSelf:"center",my:"2",fontWeight:"thin",fontStyle:"oblique",children:"You won't be charged yet"}),Object(r.jsx)(Ge.a,{in:u.isOpen,children:Object(r.jsxs)(O.a,{fontSize:"lg",children:[Object(r.jsxs)(Y.a,{alignItems:"baseline",children:[Object(r.jsx)(v.a,{label:f&&"You are currently booking ".concat(null===R||void 0===R?void 0:R.nightCount," night(s)"),placement:"left",hasArrow:!0,children:Object(r.jsxs)(O.a,{fontWeight:"light",textDecoration:"underline",children:[a.formattedPrice,"$ x ",null===R||void 0===R?void 0:R.nightCount," nights"]})}),Object(r.jsx)(he.a,{}),w.isLoading?Object(r.jsx)(J.a,{}):Object(r.jsx)(O.a,{fontFamily:"mono",children:R&&"".concat((null===R||void 0===R?void 0:R.pricePerNight)*(null===R||void 0===R?void 0:R.nightCount)," $")})]}),Object(r.jsxs)(Y.a,{alignItems:"baseline",children:[Object(r.jsx)(v.a,{label:"The owner keeps your place in highest cleanliness",placement:"left",hasArrow:!0,children:Object(r.jsx)(O.a,{fontWeight:"light",textDecoration:"underline",children:"Cleaning fee"})}),Object(r.jsx)(he.a,{}),w.isLoading?Object(r.jsx)(J.a,{}):Object(r.jsxs)(O.a,{fontFamily:"mono",children:[null===R||void 0===R?void 0:R.cleaningFee," $"]})]}),Object(r.jsxs)(Y.a,{alignItems:"baseline",children:[Object(r.jsx)(v.a,{label:"This helps us run our platform and offer services like 24/7 support on your trip. It includes VAT.",placement:"left",hasArrow:!0,children:Object(r.jsx)(O.a,{fontWeight:"light",textDecoration:"underline",children:"Service fee"})}),Object(r.jsx)(he.a,{}),w.isLoading?Object(r.jsx)(J.a,{}):Object(r.jsxs)(O.a,{fontFamily:"mono",children:[null===R||void 0===R?void 0:R.serviceFee," $"]})]}),Object(r.jsxs)(Y.a,{alignItems:"baseline",children:[Object(r.jsx)(v.a,{label:"We offer you discount based on your reservation!",placement:"left",hasArrow:!0,children:Object(r.jsxs)(O.a,{fontWeight:"light",textDecoration:"underline",children:["Discount",Object(r.jsx)(O.a,{as:"span",textDecoration:"none",mx:"2",children:R?R.discountPercent+"%":"0%"})]})}),Object(r.jsx)(he.a,{}),w.isLoading?Object(r.jsx)(J.a,{}):Object(r.jsxs)(O.a,{fontFamily:"mono",children:[null===R||void 0===R?void 0:R.discount," $"]})]}),Object(r.jsx)(Ye.a,{my:"2",colorScheme:"green",variant:"dashed"}),Object(r.jsxs)(Y.a,{fontWeight:"black",fontSize:"3xl",children:[Object(r.jsx)(O.a,{fontFamily:"mono",children:"Total"}),Object(r.jsx)(he.a,{}),w.isLoading?Object(r.jsx)(J.a,{}):Object(r.jsxs)(O.a,{fontFamily:"mono",children:[null===R||void 0===R?void 0:R.totalCost," $"]})]})]})})]})},Je=n(76),Ze=n(124),Xe=[{id:"1",title:"Helpful owner",description:"Owner provides best services"},{id:"2",title:"Extra clean",description:"Owner follows our strict policies of enhanced clealiness"},{id:"3",title:"Not smoking",description:"Owner does not allow smoking inside"},{id:"4",title:"Free cancelation",description:"You can cancel with full refund in 24 hours"}],Qe=function(e){var t=e.id,n=o.a.useState(),i=Object(x.a)(n,2),a=i[0],c=i[1],s=o.a.useState(),l=Object(x.a)(s,2),j=l[0],d=l[1];return o.a.useEffect((function(){var e=Xe.find((function(e){return e.id===t}));switch(d(e),t){case"1":c(Ze.b);break;default:c(Ze.a)}}),[t]),Object(r.jsxs)(p.a,{alignContent:"center",spacing:"0",mb:"2",children:[Object(r.jsx)(Je.a,{d:"flex",boxSize:"10",alignItems:"center",justifyContent:"center",mt:"2",ml:"2",children:a}),Object(r.jsxs)(p.b,{alignItems:"start",spacing:"0",children:[Object(r.jsx)(O.a,{as:"h4",fontSize:"md",fontWeight:"semibold",children:null===j||void 0===j?void 0:j.title}),Object(r.jsx)(O.a,{as:"h5",fontSize:"sm",m:"0",children:null===j||void 0===j?void 0:j.description})]})]})},et=Xe,tt={id:"1",name:"Crystal palace",thumbnailUrl:"https://bit.ly/2Z4KKcF",maxGuest:1,images:[{url:"https://picsum.photos/1100/1000"},{url:"https://picsum.photos/700/1200"},{url:"https://picsum.photos/1000/1000"},{url:"https://picsum.photos/1200/1000"},{url:"https://picsum.photos/1100/900"}],thumbnailAlt:"rear view house with pool",introduction:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum congue eros id ligula porta, id fermentum ligula semper. Pellentesque eget pulvinar justo. Phasellus eu risus dolor. Aliquam mollis urna vel lectus ornare, nec ultricies augue gravida. Nunc dignissim diam vel massa cursus condimentum. Nulla pharetra molestie nunc, ac hendrerit felis posuere a. Sed finibus magna ut nibh luctus, ac dapibus mauris cursus. Sed eu porttitor lacus. Nulla venenatis erat quis orci consectetur efficitur. Phasellus nisl nisl, luctus et sapien nec, dictum feugiat felis. Nam nec ullamcorper mi, eu vulputate justo. Nullam nibh ipsum, dictum at commodo nec, molestie et ipsum. Aliquam sit amet tincidunt augue, sit amet consectetur mi.",description:"Best place in town",location:"Dark side, the moon",totalReview:4,totalStar:19,formattedPrice:2021,services:["Pet","Kitchen","Breakfast","Wifi"],roomBadges:et,serviceFee:0,cleaningFee:40},nt={id:"1234",name:"Ivanov Ivan Ivanovich",profileImageUrl:"https://scontent-arn2-1.xx.fbcdn.net/v/t1.6435-9/168934405_1649568108574870_2922711241924143290_n.jpg?_nc_cat=103&ccb=1-3&_nc_sid=09cbfe&_nc_ohc=NE0y-9oTNT4AX_6yZvA&_nc_ht=scontent-arn2-1.xx&oh=4a47294ccdbae32c261080108427acd1&oe=6096A09B"},rt=function(e){e.initRoom,e.children;var t,n=o.a.useContext(Le),i=o.a.useState(tt),a=Object(x.a)(i,2),c=a[0],s=a[1],l=o.a.useState({guest:0,children:0}),j=Object(x.a)(l,2),u=j[0],b=j[1],h=o.a.useState(),g=Object(x.a)(h,2),v=g[0],w=g[1],S=o.a.useState(!1),C=Object(x.a)(S,2),D=C[0],I=C[1],R=Object(m.i)().slug,z=Object(re.a)(),P=Object(k.a)(["property",R],(function(){return B(R)}),{retry:2,onError:function(e){console.log(e)},onSuccess:function(e){e.data.liked&&I(e.data.liked),s(Object(d.a)(Object(d.a)({},e.data),{},{roomBadges:et})),b((function(t){return Object(d.a)(Object(d.a)({},t),{},{roomId:e.data.id})}))},onSettled:function(){}}),T=P.data,F=(P.isError,P.error,P.isLoading,Object(Ne.a)(U,{onSuccess:function(e){I(e.data.liked),z({description:e.data.liked?"Saved room":"Removed from wishlist",status:"info",duration:1e3})},onError:function(e){return console.log(e)}}));o.a.useEffect((function(){w(nt)}),[]);var W=function(e,t){b((function(n){return Object(d.a)(Object(d.a)({},n),{},{bookFromDate:e,bookToDate:t})}))};return T?Object(r.jsxs)(O.a,{children:[Object(r.jsx)(Ye.a,{my:"5"}),Object(r.jsx)(O.a,{as:"h2",fontSize:"3xl",fontWeight:"semibold",children:c.name}),Object(r.jsxs)(O.a,{d:"flex",mt:"1",flexDir:{base:"column",sm:"row"},children:[Object(r.jsxs)(O.a,{d:"flex",alignItems:"start",children:[Object(r.jsxs)(O.a,{d:"flex",flexDir:{base:"column",sm:"row"},children:[Object(r.jsx)(O.a,{d:"flex",flexDir:{base:"row"},children:Array(5).fill("").map((function(e,t){return t<Math.round(c.totalStar/c.totalReview)?Object(r.jsx)(te.n,{colorRendering:"teal.400"},t):Object(r.jsx)(te.m,{},t)}))}),Object(r.jsxs)(O.a,{as:"span",ml:"2",color:"gray.500",children:[c.totalReview," reviews"]})]}),Object(r.jsx)(he.a,{}),Object(r.jsx)(f.b,{to:"/",children:Object(r.jsxs)(X.a,{variant:"link",children:[Object(r.jsx)(O.a,{mx:"4",children:"\u2022"}),c.location]})})]}),Object(r.jsx)(he.a,{}),Object(r.jsx)(X.a,{alignSelf:"start",variant:"ghost",size:"sm",onClick:function(){n.user?F.mutate({roomId:c.id,token:n.user.token}):z({description:"Login is required",status:"info",duration:1e3})},leftIcon:D&&n.user?Object(r.jsx)(te.h,{color:"red"}):Object(r.jsx)(te.g,{}),children:"Like"})]}),Object(r.jsx)(O.a,{borderRadius:"lg",overflow:"hidden",mt:"4",children:Object(r.jsx)($e.a,{gap:"2",h:"40%",maxH:"450px",objectFit:"cover",templateRows:"repeat(2, 1fr)",templateColumns:"repeat(4, 1fr)",children:c.images.slice(0,5).map((function(e,t){return Object(r.jsx)($e.b,{colSpan:0===t?2:1,rowSpan:0===t?2:1,overflow:"hidden",children:Object(r.jsx)(y.a,{src:e.url,h:"auto",height:"100%",w:"100%",objectFit:"cover",loading:"lazy"})},t)}))})}),Object(r.jsxs)(O.a,{mt:"4",d:["flex","flex","flex","block"],flexDir:"column-reverse",children:[Object(r.jsx)(O.a,{w:["100%","100%","100%","35%"],boxShadow:"2xl",mt:{base:"4",lg:"0"},top:"30%",float:{lg:"right"},position:{lg:"sticky"},borderRadius:"lg",display:"inline-flex",flexDir:"column",zIndex:1,borderWidth:"thin",p:"4",alignContent:"center",justifyContent:"center",children:Object(r.jsx)(Ke,{room:c,bookInfo:u,updateDate:W,updatePeople:function(e,t){b((function(n){return Object(d.a)(Object(d.a)({},n),{},{guest:e,children:t})}))}})}),Object(r.jsxs)(O.a,{height:"1000px",w:["100%","100%","100%","60%"],children:[Object(r.jsxs)(Y.a,{alignItems:"center",children:[Object(r.jsxs)(p.b,{alignItems:"start",children:[Object(r.jsx)(O.a,{as:"h1",fontSize:"2xl",fontWeight:"semibold",children:"Owner: "+(null===v||void 0===v?void 0:v.name)}),Object(r.jsx)(p.a,{children:c.services.map((function(e,t){return Object(r.jsxs)(O.a,{color:"gray.500",fontWeight:"semibold",letterSpacing:"wide",fontSize:"xs",textTransform:"uppercase",ml:"2",isTruncated:!0,children:[e," ",c.services[c.services.length-1]!==e&&Object(r.jsx)(r.Fragment,{children:"\u2022"})," "]},t)}))})]}),Object(r.jsx)(he.a,{}),Object(r.jsx)(Ve.a,{name:null===v||void 0===v?void 0:v.name,src:null===v||void 0===v?void 0:v.profileImageUrl})]}),Object(r.jsx)(Ye.a,{my:"3"}),null===(t=c.roomBadges)||void 0===t?void 0:t.map((function(e,t){return Object(r.jsx)(Qe,{id:e.id},t)})),Object(r.jsx)(Ye.a,{my:"3"}),Object(r.jsx)(O.a,{as:"h5",fontWeight:"semibold",fontSize:"2xl",children:"More about room"}),Object(r.jsx)(O.a,{as:"p",children:c.introduction}),Object(r.jsx)(Ye.a,{my:"3"}),Object(r.jsx)(O.a,{w:"100%",display:{md:"none",lg:"block"},children:Object(r.jsx)(je,{schedules:{reservedDates:c.reservedDates,dayOff:c.daysOff},updateDate:W})}),Object(r.jsx)(Ye.a,{my:"3"})]})]})]}):Object(r.jsx)(r.Fragment,{})},it=n(286),at=function(){var e=Object(m.h)();if(e.state){var t=e.state.message;return Object(r.jsxs)(it.a,{status:"error",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[Object(r.jsx)(it.c,{boxSize:"40px",mr:0}),Object(r.jsx)(it.d,{mt:4,mb:1,fontSize:"lg",children:t}),Object(r.jsx)(it.b,{maxWidth:"md",children:"Look like you have some problems! Contact us for more info!"})]})}return Object(r.jsxs)(it.a,{status:"info",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[Object(r.jsx)(it.c,{boxSize:"40px",mr:0}),Object(r.jsx)(it.d,{mt:4,mb:1,fontSize:"lg",children:"Not Found!"}),Object(r.jsx)(it.b,{maxWidth:"md",children:"The page you are looking does not exist or was deleted"})]})},ct=n(265),ot=n(264),st=n(263),lt=function(e){var t=e.room,n=e.isSaved,i=Object(u.a)(e,["room","isSaved"]);return Object(r.jsxs)(O.a,Object(d.a)(Object(d.a)({borderWidth:"1px",borderRadius:"lg"},i),{},{bg:Object(ee.e)("gray.100","gray.900"),d:"flex",flexDir:"column",children:[Object(r.jsx)(g.a,{as:f.b,to:"/rooms/"+t.id,children:Object(r.jsx)(O.a,{minH:"200px",maxH:"300px",overflow:"hidden",children:Object(r.jsx)(y.a,{src:t.thumbnailUrl,objectFit:"cover",fit:"cover",fallback:Object(r.jsx)(O.a,{bgColor:"gray",color:"gray"}),alt:t.thumbnailAlt,overflow:"hidden",style:{transition:"ease 0.5s"},_hover:{transform:"scale(1.1)"}})})}),Object(r.jsx)(he.a,{}),Object(r.jsxs)(O.a,{p:"4",d:"flex",flexDir:"column",children:[!n&&Object(r.jsxs)(O.a,{d:"flex",alignItems:"baseline",children:[Object(r.jsx)(st.a,{borderRadius:"full",px:"2",colorScheme:"teal",children:"New"}),t.services.map((function(e,n){return Object(r.jsxs)(O.a,{color:"gray.500",fontWeight:"semibold",letterSpacing:"wide",fontSize:"xs",textTransform:"uppercase",ml:"2",isTruncated:!0,children:[e," ",t.services[t.services.length-1]!==e&&Object(r.jsx)(r.Fragment,{children:"\u2022"})," "]},n)}))]}),Object(r.jsx)(O.a,{mt:"1",fontWeight:"semibold",as:"h4",lineHeight:"tight",children:t.name}),!n&&Object(r.jsx)(O.a,{as:"p",lineHeight:"tight",textOverflow:"ellipsis",overflow:"hidden",children:t.description.length>100?t.description.substring(0,100)+"...":t.description}),Object(r.jsxs)(O.a,{d:"flex",flexWrap:"wrap",justifySelf:"end",alignItems:"baseline",flexDir:"row",children:[Object(r.jsx)(O.a,{as:"h4",fontSize:"3xl",children:t.formattedPrice+"$"}),Object(r.jsx)(O.a,{as:"span",color:"gray.500",fontStyle:"italic",children:"/ per night"}),Object(r.jsx)(O.a,{d:"flex",alignItems:"center",alignSelf:"center",ml:"auto",children:Array(5).fill("").map((function(e,n){return n<Math.round(t.totalStar/t.totalReview)?Object(r.jsx)(te.n,{colorRendering:"teal.400"},n):Object(r.jsx)(te.m,{},n)}))})]})]})]}))},jt={id:"random-id-12321",name:"Crystal palace",thumbnailUrl:"https://picsum.photos/1100/1000?random=1",thumbnailAlt:"rear view house with pool",description:"Best place in townBest place in townBest place in townBest ",location:"Dark side, the moon",totalReview:4,totalStar:23,formattedPrice:2021,services:["Pet","Kitchen","Breakfast","Wifi"]},dt=(Object(d.a)(Object(d.a)({},jt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=1"}),Object(d.a)(Object(d.a)({},jt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=2"}),Object(d.a)(Object(d.a)({},jt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=3"}),Object(d.a)(Object(d.a)({},jt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=4"}),Object(d.a)(Object(d.a)({},jt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=5"}),function(e){var t=e.rooms;return t&&0!==t.length?Object(r.jsx)(ot.a,{spacing:"8",columns:[1,1,1,2,3],children:t&&t.map((function(e,t){return Object(r.jsx)(lt,{room:e,isSaved:!1},e.id)}))}):Object(r.jsx)(O.a,{children:"Not found any room"})}),ut=function(e){e.label,e.onClose;var t=Object(u.a)(e,["label","onClose"]);return Object(r.jsxs)(ct.a,Object(d.a)(Object(d.a)({size:"lg",colorScheme:"green"},t),{},{children:[Object(r.jsx)(ct.c,{children:e.label}),Object(r.jsx)(ct.b,{onClick:function(){return e.onClose()}})]}))},bt=function(){new URLSearchParams(Object(m.h)().search);var e=Object(ee.e)("gray.100","gray.900"),t=Object(m.h)(),n=o.a.useState({childrenNum:0,guestNum:0}),i=Object(x.a)(n,2),a=i[0],c=i[1],s=o.a.useState(),l=Object(x.a)(s,2),j=l[0],u=l[1];o.a.useEffect((function(){void 0!==t.state&&t.state.search&&c(t.state.search),void 0!==t.state&&t.state.type&&u(t.state.type)}),[]);var b=[null===j||void 0===j?void 0:j.id,a],h=Object(k.a)(["propertyView",b],(function(){return A(null===j||void 0===j?void 0:j.id,a)}),{staleTime:6e4}),f=h.data,g=h.isLoading,v=h.error,y=h.refetch,w=h.remove;return v?Object(r.jsx)(r.Fragment,{children:"Error"}):Object(r.jsxs)(O.a,{d:"flex",flexDir:"column",gridGap:"5",children:[Object(r.jsxs)(O.a,{position:{lg:"sticky"},top:0,bgColor:e,d:"flex",flexDir:"column",boxShadow:"2xl",gridGap:"5",pb:"5",children:[Object(r.jsx)(be,{search:a,updateSearch:function(e){c(e)},isLoading:g,onClickSearch:function(){w(),y()}}),Object(r.jsxs)(p.a,{children:[j&&Object(r.jsx)(ut,{label:"Property type: "+j.propertyType,onClose:function(){u(void 0)}}),a.city&&Object(r.jsx)(ut,{label:a.city,onClose:function(){c((function(e){return Object(d.a)(Object(d.a)({},e),{},{city:""})}))}}),a.from&&Object(r.jsx)(ut,{label:"From: "+a.from.toLocaleDateString(),onClose:function(){c((function(e){return Object(d.a)(Object(d.a)({},e),{},{from:void 0})}))}}),a.to&&Object(r.jsx)(ut,{label:"To: "+a.to.toLocaleDateString(),onClose:function(){c((function(e){return Object(d.a)(Object(d.a)({},e),{},{to:void 0})}))}}),a.guestNum>0&&Object(r.jsx)(ut,{label:a.guestNum+" guests",onClose:function(){c((function(e){return Object(d.a)(Object(d.a)({},e),{},{guestNum:0})}))}}),a.childrenNum>0&&Object(r.jsx)(ut,{label:a.childrenNum+" children",onClose:function(){c((function(e){return Object(d.a)(Object(d.a)({},e),{},{childrenNum:0})}))}})]})]}),Object(r.jsx)(O.a,{as:"h3",mb:"5",fontSize:"4xl",fontWeight:"bold",children:"Find place that fits you most..."}),g?Object(r.jsx)(J.a,{color:"green",size:"lg",alignSelf:"center"}):Object(r.jsx)(dt,{rooms:null===f||void 0===f?void 0:f.data})]})},ht=(n(219),function(e){e.children;var t=Object(u.a)(e,["children"]);return Object(r.jsxs)(O.a,Object(d.a)(Object(d.a)({mt:"10",mb:"5"},t),{},{children:[Object(r.jsx)(Ye.a,{mb:"5",boxShadow:"lg"}),Object(r.jsxs)(me.a,{as:"h4",children:["Made with",Object(r.jsx)(r.Fragment,{children:"\xa0"}),Object(r.jsx)(O.a,{as:"a",href:"",cursor:"default",children:Object(r.jsx)(te.h,{})}),Object(r.jsx)(r.Fragment,{children:"\xa0"}),"by",Object(r.jsx)(r.Fragment,{children:"\xa0"}),Object(r.jsx)(O.a,{as:"a",href:"https://github.com/haihaibeo",children:"Hai"})]})]}))}),Ot=n(279),ft=n(266),mt=n(267),xt=function(e){var t=o.a.useState(0),n=Object(x.a)(t,2),i=n[0],a=n[1],c=o.a.useState(0),s=Object(x.a)(c,2),l=s[0],j=s[1],u=Object(ee.e)("red","yellow"),b=e.onClose;return Object(r.jsxs)(pe.a,Object(d.a)(Object(d.a)({},e),{},{onClose:function(){j(0),b()},children:[Object(r.jsx)(pe.f,{}),Object(r.jsxs)(pe.d,{children:[Object(r.jsx)(pe.e,{children:"Write a review"}),Object(r.jsx)(pe.b,{children:Object(r.jsxs)(Y.a,{flexDir:"column",gridGap:"2",children:[Object(r.jsx)(O.a,{children:Array(5).fill(5).map((function(e,t){return Object(r.jsx)(ve.a,{variant:"ghost","aria-label":"star",onClick:function(){j(t+1)},_focus:{borderWidth:"1px"},borderRadius:"full",onMouseOver:function(){return a(t+1)},onMouseLeave:function(){return a(0)},icon:i>t||l>t?Object(r.jsx)(te.n,{color:u}):Object(r.jsx)(te.m,{})},t)}))}),Object(r.jsx)(ft.a,{size:"md",placeholder:"Please describe some of your thoughts"}),Object(r.jsx)(X.a,{ml:"auto",isDisabled:l<=0,children:"Send"})]})})]})]}))},pt=function(e){var t,n=Object(fe.a)(),i=o.a.useContext(Le),a=Object(k.a)(["reservations",null===(t=i.user)||void 0===t?void 0:t.token],G,{onSuccess:function(e){console.log(e)},retry:2}),c=a.data,s=(a.error,a.isError);return 0===(null===c||void 0===c?void 0:c.data.length)?Object(r.jsx)(O.a,{children:"You don't have any reservations"}):s?Object(r.jsx)(O.a,{children:"Something's wrong"}):Object(r.jsx)(O.a,{children:Object(r.jsxs)(Y.a,{gridGap:"2",flexDir:"column",children:[Object(r.jsx)(O.a,{as:"h1",fontFamily:"heading",fontWeight:"bold",fontSize:"4xl",mb:"3",children:"Your reservations"}),null===c||void 0===c?void 0:c.data.map((function(e){return Object(r.jsx)(O.a,{borderWidth:"1px",p:"2",style:{transition:"ease 0.3s"},_hover:{transform:"scale(1.02)"},bg:Object(ee.e)("gray.100","gray.800"),borderRadius:"10px",children:Object(r.jsxs)(Y.a,{w:"100%",flexDir:"row",gridGap:"2",children:[Object(r.jsxs)(Y.a,{w:"100%",flexDir:"column",gridGap:"2",children:[Object(r.jsx)(mt.b,{h:"100%",children:Object(r.jsxs)($e.a,{h:"100%",fontWeight:"bold",gridTemplateColumns:{base:"1fr",md:"1fr 1fr"},templateRows:"auto",children:[Object(r.jsx)(mt.a,{children:Object(r.jsx)(O.a,{as:"h3",children:"From Date: "})}),Object(r.jsx)(O.a,{fontWeight:"light",children:e.fromDate}),Object(r.jsx)(mt.a,{children:Object(r.jsx)(O.a,{as:"h3",children:"To Date: "})}),Object(r.jsx)(O.a,{fontWeight:"light",children:e.toDate}),Object(r.jsx)(mt.a,{children:Object(r.jsx)(O.a,{as:"h3",children:"Total Cost: "})}),Object(r.jsx)(O.a,{fontWeight:"light",children:e.total}),Object(r.jsx)(mt.a,{children:Object(r.jsx)(O.a,{as:"h3",children:"Reserved from: "})}),Object(r.jsx)(O.a,{fontWeight:"light",children:e.createdAt}),Object(r.jsx)(mt.a,{children:Object(r.jsx)(O.a,{as:"h3",children:"Reservations Status: "})}),Object(r.jsx)(O.a,{fontWeight:"light",children:e.reservationStatus}),Object(r.jsx)(mt.a,{children:Object(r.jsx)(O.a,{as:"h3",children:"Payment Status: "})}),Object(r.jsx)(O.a,{fontWeight:"light",children:e.paymentStatus})]})}),Object(r.jsx)(X.a,{colorScheme:"green",onClick:function(){return n.onOpen()},children:"Write a review"}),Object(r.jsx)(X.a,{colorScheme:"red",isDisabled:"on reserved"!==e.reservationStatus.toLowerCase(),children:"Cancel reservation"})]}),Object(r.jsx)(O.a,{ml:"auto",children:Object(r.jsx)(Ye.a,{orientation:"vertical",borderColor:"currentcolor"})}),Object(r.jsx)(lt,{room:e.property,isSaved:!0,flex:"0 0 15em",borderWidth:"0px"})]},e.id)})})),Object(r.jsx)(xt,{isOpen:n.isOpen,isCentered:!0,onClose:n.onClose,reservationId:"",propId:""})]})})},gt=function(){var e=Object(k.a)("propertiesLiked",(function(){return T.get(P+"/api/properties/saved")}),{onSuccess:function(e){},refetchOnMount:"always"}).data;return 0===(null===e||void 0===e?void 0:e.data.length)?Object(r.jsx)(O.a,{children:"Looks like you didn't save any room"}):Object(r.jsxs)(O.a,{children:[Object(r.jsx)(O.a,{as:"h1",fontFamily:"heading",fontWeight:"bold",fontSize:"4xl",mb:"3",children:"Rooms that you saved"}),Object(r.jsx)(ot.a,{spacing:"4",columns:{base:1,lg:2},children:null===e||void 0===e?void 0:e.data.map((function(e){return Object(r.jsx)(lt,{room:e,isSaved:!0},e.id)}))})]})},vt=function(){return Object(r.jsx)(O.a,{children:"Notification"})},yt=function(){var e,t=o.a.useContext(Le).user,n=null===(e=new URLSearchParams(Object(m.h)().search).get("view"))||void 0===e?void 0:e.toLowerCase();return Object(r.jsxs)(O.a,{d:"flex",flexDir:{base:"column",md:"row"},children:[Object(r.jsx)(O.a,{w:{base:"100%",md:"25%"},minW:"300px",children:Object(r.jsxs)(O.a,{d:"flex",overflow:"hidden",borderWidth:"1px",borderRadius:"lg",p:"4",flexDir:{base:"row-reverse",md:"column"},spacing:"2",children:[Object(r.jsxs)(p.b,{alignSelf:"center",justifySelf:"start",children:[Object(r.jsx)(Ve.a,{name:null===t||void 0===t?void 0:t.name,boxSize:{base:"20",md:"40"}}),Object(r.jsx)(X.a,{variant:"link",my:"2",fontSize:"sm",children:"Update photo"})]}),Object(r.jsxs)(p.b,{alignItems:"start",spacing:"2",children:[Object(r.jsx)(Je.a,{as:ye.g,boxSize:"8"}),Object(r.jsx)(O.a,{as:"h4",fontWeight:"bold",fontSize:"lg",fontFamily:"mono",children:"Identity verification"}),Object(r.jsx)(O.a,{as:"h4",children:"Show others you\u2019re really you with the identity verification badge."}),Object(r.jsx)(Ye.a,{}),Object(r.jsx)(O.a,{as:"h4",fontWeight:"bold",fontSize:"lg",fontFamily:"mono",children:(null===t||void 0===t?void 0:t.name)+" confirmed"}),Object(r.jsxs)(O.a,{d:"flex",flexDir:"row",alignItems:"baseline",children:[Object(r.jsx)(ye.b,{}),Object(r.jsx)(O.a,{as:"h4",ml:"4",children:"Email confirmed"})]}),Object(r.jsxs)(O.a,{d:"flex",flexDir:"row",alignItems:"baseline",children:[Object(r.jsx)(ye.b,{}),Object(r.jsx)(O.a,{as:"h4",ml:"4",children:"Phone confirmed"})]})]})]})}),Object(r.jsx)(he.a,{minW:"2"}),Object(r.jsxs)(O.a,{w:{base:"100%",md:"65%"},children:[("likes"===n||null==n)&&Object(r.jsx)(gt,{}),"notifications"===n&&Object(r.jsx)(vt,{}),"reservations"===n&&Object(r.jsx)(pt,{})]})]})},wt={id:"random-id-12321",name:"Crystal palace",thumbnailUrl:"https://picsum.photos/1100/1000?random=1",thumbnailAlt:"rear view house with pool",description:"Best place in townBest place in townBest place in townBest ",location:"Dark side, the moon",totalReview:4,totalStar:23,formattedPrice:2021,services:["Pet","Kitchen","Breakfast","Wifi"]},St=(Object(d.a)(Object(d.a)({},wt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=1"}),Object(d.a)(Object(d.a)({},wt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=2"}),Object(d.a)(Object(d.a)({},wt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=3"}),Object(d.a)(Object(d.a)({},wt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=4"}),Object(d.a)(Object(d.a)({},wt),{},{thumbnailUrl:"https://picsum.photos/1100/1000?random=5"}),n(281)),kt=n(278),Ct=n(270),Dt=n(268),It=function(e){return Object(r.jsxs)(Ee.a,{display:"flex",alignItems:"center",justifyContent:"space-between",pr:"2",children:[Object(r.jsx)(qe.a,{htmlFor:"service_"+e.name,mb:"0",opacity:e.isOn?1:.4,children:e.name}),Object(r.jsx)(Ct.a,Object(d.a)(Object(d.a)({id:"service_"+e.name,isChecked:e.isOn},e),{},{onChange:function(t){e.toggle(t.target.checked)}}))]})},Rt=function(e){var t=Object.assign({},e),n=Object(re.a)(),i=o.a.useState(),a=Object(x.a)(i,2),c=a[0],s=a[1],l=o.a.useState({cityId:"1",countryId:"",description:"Test description",images:[{url:"url",alt:"alt",deleteHash:"delHash"}],maxGuest:0,propTypeId:"",introdution:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto minus ad assumenda dignissimos. Perferendis optio est nam accusamus aliquid voluptas?",name:"Lorem ipsum",refundPercent:100,number:"12",streetName:"Street asdfgg",services:{breakfast:!0,kitchen:!1,parking:!0,pet:!1,wifi:!0},pricing:{basePrice:250,cleaningFee:10,serviceFee:0}}),u=Object(x.a)(l,2),b=u[0],h=u[1],m=Object(k.a)("cities",E,{staleTime:6e5,onSuccess:function(e){s(function(e){var t,n=[],r=new Set,i=Object(j.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.has(a.countryId)||n.push({id:a.countryId,countryName:a.countryName}),r.add(a.countryId)}}catch(c){i.e(c)}finally{i.f()}return console.log(n),n}(e))}}),v=m.data,y=(m.isLoading,m.status,Object(k.a)("propertypeList",q,{staleTime:6e5})),w=y.data,S=(y.isError,Object(Ne.a)(F,{onSuccess:function(e){n({description:e.data,status:"success"})},onError:function(e){console.log(e),n({description:"Something's wrong",status:"error"})}}));o.a.useEffect((function(){return function(){localStorage.removeItem("previewRoom")}}),[]);var C=function(e){if(null!=e.target.files){var t=Array.from(e.target.files),n=new FormData;n.append("image",t[0]),(i=n,T({method:"post",url:"https://api.imgur.com/3/upload",data:i,headers:{"Content-Type":"multipart/form-data"}})).then((function(e){return e.data})).catch((function(e){return console.log(e)})),(r="",T({method:"DELETE",url:"https://api.imgur.com/3/image/".concat(r)})).then((function(e){return console.log(e.data)}))}var r,i};return Object(r.jsx)(Ie.a.form,{children:Object(r.jsx)(O.a,Object(d.a)(Object(d.a)({d:"flex",flexDir:"column",mt:"10"},t),{},{children:Object(r.jsxs)(p.b,{spacing:"8",w:"75%",alignSelf:"center",children:[Object(r.jsx)(O.a,{as:"h1",fontSize:"3xl",fontWeight:"bold",alignSelf:"start",children:"Publish your new property"}),Object(r.jsx)(Ye.a,{borderColor:"currentcolor"}),Object(r.jsxs)(O.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(O.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Property info"}),Object(r.jsxs)(p.b,{alignItems:"start",w:"100%",children:[Object(r.jsxs)(Ee.a,{isRequired:!0,id:"prop-name",children:[Object(r.jsx)(qe.a,{as:"h2",fontSize:"md",children:"Property Name"}),Object(r.jsx)(K.a,{variant:"filled",required:!0,value:b.name,onChange:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{name:e.target.value})}))}})]}),Object(r.jsxs)(Ee.a,{isRequired:!0,id:"prop-type",children:[Object(r.jsx)(qe.a,{as:"h2",fontSize:"md",children:"Property's Type"}),Object(r.jsx)(Dt.a,{variant:"filled",placeholder:"--Choose your property type--",onChange:function(e){return h((function(t){return Object(d.a)(Object(d.a)({},t),{},{propTypeId:e.target.value,cityId:""})}))},children:null===w||void 0===w?void 0:w.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.propertyType},e.id)}))})]}),Object(r.jsxs)(Ee.a,{isRequired:!0,id:"prop-description",children:[Object(r.jsx)(qe.a,{as:"h2",fontSize:"md",children:"Description"}),Object(r.jsx)(K.a,{variant:"filled",required:!0,value:b.description,onChange:function(e){return h((function(t){return Object(d.a)(Object(d.a)({},t),{},{description:e.target.value})}))}})]}),Object(r.jsxs)(Ee.a,{isRequired:!0,id:"prop-introduction",children:[Object(r.jsx)(qe.a,{as:"h2",fontSize:"md",children:"Introduction"}),Object(r.jsx)(ft.a,{rows:4,required:!0,variant:"filled",value:b.introdution,onChange:function(e){return h((function(t){return Object(d.a)(Object(d.a)({},t),{},{introdution:e.target.value})}))}})]})]})]}),Object(r.jsx)(Ye.a,{borderColor:"currentcolor"}),Object(r.jsxs)(O.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(O.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Location info"}),Object(r.jsxs)(p.b,{alignItems:"start",w:"100%",children:[Object(r.jsxs)(Ee.a,{isRequired:!0,id:"prop-country",children:[Object(r.jsx)(qe.a,{as:"h2",fontSize:"md",children:"Country"}),Object(r.jsx)(Dt.a,{variant:"filled",placeholder:"--Choose your country--",onChange:function(e){return h((function(t){return Object(d.a)(Object(d.a)({},t),{},{countryId:e.target.value,cityId:""})}))},children:null===c||void 0===c?void 0:c.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.countryName},e.countryName)}))})]}),Object(r.jsxs)(Ee.a,{isRequired:!0,id:"prop-city",children:[Object(r.jsx)(qe.a,{as:"h2",fontSize:"md",children:"City"}),Object(r.jsx)(Dt.a,{variant:"filled",placeholder:"--Choose your city--",onChange:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{cityId:e.target.value})}))},children:null===v||void 0===v?void 0:v.filter((function(e){return e.countryId===b.countryId})).map((function(e){return Object(r.jsx)("option",{value:e.cityId,children:e.cityName},e.cityId)}))})]}),Object(r.jsxs)(Y.a,{gridGap:"2",w:"100%",flexDir:{base:"column",lg:"row"},children:[Object(r.jsxs)(Ee.a,{isRequired:!0,id:"prop-street",flex:"0 1 60%",children:[Object(r.jsx)(qe.a,{as:"h2",fontSize:"md",children:"Street Name"}),Object(r.jsx)(K.a,{required:!0,variant:"filled",value:b.streetName,onChange:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{streetName:e.target.value})}))}})]}),Object(r.jsxs)(Ee.a,{isRequired:!0,id:"prop-number",flex:"0 1 40%",children:[Object(r.jsx)(qe.a,{as:"h2",fontSize:"md",children:"Property's number"}),Object(r.jsx)(K.a,{required:!0,variant:"filled",value:b.number,onChange:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{number:e.target.value})}))}})]})]}),Object(r.jsxs)(Ee.a,{id:"prop-add-note",children:[Object(r.jsxs)(qe.a,{as:"h2",fontSize:"md",children:["Notes to client",Object(r.jsx)(O.a,{as:"span",fontStyle:"oblique",fontWeight:"light",children:"(optional)"})]}),Object(r.jsx)(K.a,{variant:"filled",value:b.addressDesc,onChange:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{addressDesc:e.target.value})}))}})]})]})]}),Object(r.jsx)(Ye.a,{borderColor:"currentcolor"}),Object(r.jsxs)(O.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",justifyContent:"space-between",children:[Object(r.jsxs)(O.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",flexWrap:"wrap",children:[Object(r.jsx)(O.a,{children:"Images"}),Object(r.jsx)(O.a,{as:"span",fontStyle:"oblique",fontWeight:"light",children:" (At least 5 images)"})]}),Object(r.jsx)(K.a,{required:!0,variant:"ghost",type:"file",justifySelf:"flex-end",multiple:!0,accept:"image/*",onChange:function(e){return C(e)}})]}),Object(r.jsx)(Ye.a,{borderColor:"currentcolor"}),Object(r.jsxs)(O.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(O.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Services"}),Object(r.jsx)(O.a,{w:"100%",children:Object(r.jsxs)(ot.a,{minChildWidth:"12em",spacingX:"5rem",spacingY:"2",children:[Object(r.jsxs)(Y.a,{gridGap:"2",alignItems:"center",children:[Object(r.jsx)(O.a,{as:"h2",fontSize:"md",children:"Max Guests"}),Object(r.jsx)(he.a,{}),Object(r.jsx)(ve.a,{"aria-label":"Minus",size:"sm",icon:Object(r.jsx)(ye.c,{}),isDisabled:b.maxGuest<=0,onClick:function(){return h((function(e){return Object(d.a)(Object(d.a)({},e),{},{maxGuest:e.maxGuest--})}))}}),Object(r.jsx)(O.a,{as:"h3",fontSize:"md",w:"3ch",textAlign:"center",children:b.maxGuest}),Object(r.jsx)(ve.a,{"aria-label":"Plus",size:"sm",icon:Object(r.jsx)(ye.e,{}),isDisabled:b.maxGuest>=10,onClick:function(){return h((function(e){return Object(d.a)(Object(d.a)({},e),{},{maxGuest:e.maxGuest++})}))}})]}),Object(r.jsx)(It,{name:"Wifi",isOn:b.services.wifi,toggle:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{services:Object(d.a)(Object(d.a)({},t.services),{},{wifi:e})})}))}}),Object(r.jsx)(It,{name:"Kitchen",isOn:b.services.kitchen,toggle:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{services:Object(d.a)(Object(d.a)({},t.services),{},{kitchen:e})})}))}}),Object(r.jsx)(It,{name:"Breakfast",isOn:b.services.breakfast,toggle:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{services:Object(d.a)(Object(d.a)({},t.services),{},{breakfast:e})})}))}}),Object(r.jsx)(It,{name:"Pet Allow",isOn:b.services.pet,toggle:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{services:Object(d.a)(Object(d.a)({},t.services),{},{pet:e})})}))}}),Object(r.jsx)(It,{name:"Free Parking",isOn:b.services.parking,toggle:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{services:Object(d.a)(Object(d.a)({},t.services),{},{parking:e})})}))}})]})})]}),Object(r.jsx)(Ye.a,{borderColor:"currentcolor"}),Object(r.jsxs)(O.a,{d:{base:"inline-block",lg:"flex"},flexDir:"row",w:"100%",fontWeight:"medium",children:[Object(r.jsx)(O.a,{as:"h2",fontSize:"lg",w:{base:"100%",lg:"30%"},mb:"5",children:"Pricing ($)"}),Object(r.jsxs)(p.b,{alignItems:"start",w:"100%",children:[Object(r.jsx)(It,{isOn:100===b.refundPercent,name:"Allow full refund",size:"lg",toggle:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{refundPercent:e?100:80})}))}}),100!==b.refundPercent&&Object(r.jsxs)(O.a,{children:["Amount refund: ",b.refundPercent,"%"]}),Object(r.jsxs)(St.a,{value:b.refundPercent,min:0,max:100,step:5,colorScheme:"blue",onChangeEnd:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{refundPercent:e})}))},children:[Object(r.jsx)(St.d,{children:Object(r.jsx)(St.b,{})}),Object(r.jsx)(St.c,{boxSize:6})]}),Object(r.jsxs)(Ee.a,{isRequired:!0,id:"prop-price-base",isInvalid:0===b.pricing.basePrice,children:[Object(r.jsx)(qe.a,{opacity:0===b.pricing.basePrice?.4:1,as:"h2",fontSize:"md",children:"Base price"}),Object(r.jsx)(kt.a,{value:b.pricing.basePrice,onChange:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{pricing:Object(d.a)(Object(d.a)({},t.pricing),{},{basePrice:0|parseInt(e)})})}))},children:Object(r.jsx)(kt.b,{variant:"filled",required:!0})})]}),Object(r.jsxs)(Ee.a,{isRequired:!0,id:"prop-price-cleaning",children:[Object(r.jsx)(qe.a,{opacity:0===b.pricing.cleaningFee?.4:1,as:"h2",fontSize:"md",children:"Cleaning fee"}),Object(r.jsx)(kt.a,{value:b.pricing.cleaningFee,onChange:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{pricing:Object(d.a)(Object(d.a)({},t.pricing),{},{cleaningFee:0|parseInt(e)})})}))},children:Object(r.jsx)(kt.b,{variant:"filled",required:!0})})]}),Object(r.jsxs)(Ee.a,{isRequired:!0,id:"prop-price-service",children:[Object(r.jsx)(qe.a,{opacity:0===b.pricing.serviceFee?.4:1,as:"h2",fontSize:"md",children:"Service fee"}),Object(r.jsx)(kt.a,{value:b.pricing.serviceFee,onChange:function(e){h((function(t){return Object(d.a)(Object(d.a)({},t),{},{pricing:Object(d.a)(Object(d.a)({},t.pricing),{},{serviceFee:0|parseInt(e)})})}))},children:Object(r.jsx)(kt.b,{variant:"filled",required:!0})})]})]})]}),Object(r.jsxs)(O.a,{children:[Object(r.jsx)(g.a,{as:f.b,to:"/room/preview",_hover:{textStyle:"none"},target:"_blank",onClick:function(){return localStorage.setItem("previewRoom",JSON.stringify(b))},children:Object(r.jsx)(X.a,{variant:"solid",mr:"10",colorScheme:"green",children:"See a preview"})}),Object(r.jsx)(X.a,{variant:"solid",type:"submit",colorScheme:"blue",onClick:function(e){return function(e){e.preventDefault(),S.mutate(b)}(e)},children:"Confirm"})]})]})}))})},zt=n(157),Pt=function(){var e=o.a.useState(),t=Object(x.a)(e,2),n=t[0],i=t[1];return console.log(n),o.a.useEffect((function(){var e=localStorage.getItem("previewRoom");return console.log(e),e&&i(JSON.parse(e)),function(){localStorage.removeItem("previewRoom")}}),[]),o.a.useEffect((function(){console.log(n)}),[n]),Object(r.jsx)(r.Fragment,{children:"Hello"})},Tt=function(){return Object(r.jsxs)(it.a,{status:"success",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[Object(r.jsx)(it.c,{boxSize:"40px",mr:0}),Object(r.jsx)(it.d,{mt:4,mb:1,fontSize:"lg",children:"Application submitted!"}),Object(r.jsx)(it.b,{maxWidth:"sm",children:"Thanks for submitting your application. Our team will get back to you soon."})]})},Ft=function(){var e,t,n=Object(c.useContext)(Le),i=Object(re.a)(),a=Object(fe.a)(),o=function(){a.onOpen(),T.post(P+"/api/user/register-host").then((function(e){console.log(e),200===e.status&&(localStorage.setItem("token",e.data.token),n.updateToken(e.data.token),i({description:"Congrat! You are eligible as a new host!",status:"success"}))})).catch((function(e){i({description:e,status:"error"})}))};return Object(r.jsxs)(O.a,{d:"flex",flexDir:"column",gridGap:"2",justifyItems:"center",justifyContent:"center",children:[Object(r.jsx)(X.a,{onClick:function(){return o()},colorScheme:"green",w:"30ch",isDisabled:null===(e=n.user)||void 0===e?void 0:e.roles.includes("Owner"),alignSelf:"center",children:(null===(t=n.user)||void 0===t?void 0:t.roles.includes("Owner"))?"You are already a host!":"Register to become a host!"}),Object(r.jsx)(Ge.a,{in:a.isOpen,children:Object(r.jsx)(Tt,{})})]})},Wt=Object(b.a)({components:{Button:{defaultProps:{}}}}),Nt=new Ot.a({defaultOptions:{queries:{}}}),Lt=function(){var e=c.useRef(null);return c.useEffect((function(){e.current.complete(),T.interceptors.request.use((function(t){return e.current.staticStart(),t}),(function(t){return e.current.complete(),Promise.reject(t)})),T.interceptors.response.use((function(t){return e.current.complete(),t}),(function(t){return e.current.complete(),Promise.reject(t)}))}),[]),Object(r.jsx)(f.a,{basename:"/",children:Object(r.jsx)(h.a,{theme:Wt,children:Object(r.jsx)(We.a,{client:Nt,children:Object(r.jsxs)(O.a,{d:"flex",flexDir:"column",minH:"100vh",children:[Object(r.jsxs)(Ae,{children:[Object(r.jsx)(Bt,{}),Object(r.jsxs)(O.a,{flex:"1",children:[Object(r.jsx)(zt.a,{color:"#f11946",ref:e}),Object(r.jsxs)(m.d,{children:[Object(r.jsx)(m.b,{exact:!0,path:"/",children:Object(r.jsx)(Me,{})}),Object(r.jsx)(m.b,{component:At,exact:!0,path:"/login",render:function(e){var t=e.location;return Object(r.jsx)(m.a,{to:{pathname:"/login",state:{from:t}}})}}),Object(r.jsxs)(O.a,{mx:"10%",mt:"5",children:[Object(r.jsx)(He,{}),Object(r.jsxs)(m.d,{children:[Object(r.jsx)(m.b,{exact:!0,path:"/rooms/:slug",component:rt}),Object(r.jsx)(m.b,{exact:!0,path:"/rooms",component:bt}),Object(r.jsx)(m.b,{exact:!0,path:"/room/preview",component:Pt}),Object(r.jsx)(Et,{exact:!0,path:"/profile",component:yt}),Object(r.jsx)(qt,{roles:["Owner"],exact:!0,path:"/user/publish",component:Rt}),"roles=",["Owner"],Object(r.jsx)(Et,{exact:!0,path:"/user/register-host",component:Ft}),Object(r.jsx)(qt,{roles:["Admin"],exact:!0,path:"/admin"}),Object(r.jsx)(m.b,{component:at})]})]})]})]})]}),Object(r.jsx)(O.a,{h:"200px"}),Object(r.jsx)(ht,{as:"footer"})]})})})})},At=function(){var e=Object(m.h)(),t=c.useContext(Le),n=(e.state||{from:{pathname:"/"}}).from;return t.user?Object(r.jsx)(m.a,{to:n}):Object(r.jsxs)(O.a,{mx:"20%",mt:"10",flex:"0",children:[Object(r.jsx)(He,{}),Object(r.jsx)(_e,{isRegistering:!1})]})},Et=function(e){var t=e.children,n=Object(u.a)(e,["children"]);return c.useContext(Le).user?Object(r.jsx)(m.b,Object(d.a)(Object(d.a)({},n),{},{children:t})):Object(r.jsx)(m.b,Object(d.a)(Object(d.a)({},n),{},{children:Object(r.jsx)(m.a,{to:{pathname:"/login",state:{from:n.path}}})}))},qt=function(e){var t,n=e.roles,i=e.children,a=Object(u.a)(e,["roles","children"]),o=c.useContext(Le);if(!o.user)return Object(r.jsx)(m.b,Object(d.a)(Object(d.a)({},a),{},{children:Object(r.jsx)(m.a,{to:{pathname:"/login",state:{from:a.path}}})}));return function(e,t){if(!e)return!1;if(!t)return!0;var n,r=Object(j.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!e.includes(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(null===(t=o.user)||void 0===t?void 0:t.roles,n)?Object(r.jsx)(m.b,Object(d.a)(Object(d.a)({},a),{},{children:i})):Object(r.jsx)(m.b,Object(d.a)(Object(d.a)({},a),{},{children:Object(r.jsx)(m.a,{to:{pathname:"/error",state:{message:"You are not authorized"}}})}))},Bt=function(){var e=Object(m.h)().pathname;return c.useEffect((function(){window.scrollTo(0,0)}),[e]),null};l.a.render(Object(r.jsxs)(c.StrictMode,{children:[Object(r.jsx)(i.a,{initialColorMode:a.theme.config.initialColorMode}),Object(r.jsx)(Lt,{})]}),document.getElementById("root"))}},[[220,1,2]]]);
//# sourceMappingURL=main.211eab34.chunk.js.map